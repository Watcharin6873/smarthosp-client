import{P as gn}from"./d3-path-CimkQT29.js";function A(n){return function(){return n}}const fn=Math.abs,M=Math.atan2,W=Math.cos,hn=Math.max,un=Math.min,D=Math.sin,C=Math.sqrt,w=1e-12,F=Math.PI,Z=F/2,Y=2*F;function mn(n){return n>1?0:n<-1?F:Math.acos(n)}function ln(n){return n>=1?Z:n<=-1?-Z:Math.asin(n)}function pn(n){let e=3;return n.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const u=Math.floor(r);if(!(u>=0))throw new RangeError(`invalid digits: ${r}`);e=u}return n},()=>new gn(e)}function yn(n){return n.innerRadius}function dn(n){return n.outerRadius}function vn(n){return n.startAngle}function An(n){return n.endAngle}function xn(n){return n&&n.padAngle}function kn(n,e,r,u,a,o,i,t){var g=r-n,l=u-e,f=i-a,d=t-o,s=d*g-f*l;if(!(s*s<w))return s=(f*(e-o)-d*(n-a))/s,[n+s*g,e+s*l]}function X(n,e,r,u,a,o,i){var t=n-r,g=e-u,l=(i?o:-o)/C(t*t+g*g),f=l*g,d=-l*t,s=n+f,h=e+d,y=r+f,v=u+d,T=(s+y)/2,p=(h+v)/2,S=y-s,k=v-h,x=S*S+k*k,R=a-o,O=s*v-y*h,V=(k<0?-1:1)*C(hn(0,R*R*x-O*O)),b=(O*k-S*V)/x,q=(-O*S-k*V)/x,I=(O*k+S*V)/x,P=(-O*S+k*V)/x,N=b-T,c=q-p,m=I-T,z=P-p;return N*N+c*c>m*m+z*z&&(b=I,q=P),{cx:b,cy:q,x01:-f,y01:-d,x11:b*(a/R-1),y11:q*(a/R-1)}}function In(){var n=yn,e=dn,r=A(0),u=null,a=vn,o=An,i=xn,t=null,g=pn(l);function l(){var f,d,s=+n.apply(this,arguments),h=+e.apply(this,arguments),y=a.apply(this,arguments)-Z,v=o.apply(this,arguments)-Z,T=fn(v-y),p=v>y;if(t||(t=f=g()),h<s&&(d=h,h=s,s=d),!(h>w))t.moveTo(0,0);else if(T>Y-w)t.moveTo(h*W(y),h*D(y)),t.arc(0,0,h,y,v,!p),s>w&&(t.moveTo(s*W(v),s*D(v)),t.arc(0,0,s,v,y,p));else{var S=y,k=v,x=y,R=v,O=T,V=T,b=i.apply(this,arguments)/2,q=b>w&&(u?+u.apply(this,arguments):C(s*s+h*h)),I=un(fn(h-s)/2,+r.apply(this,arguments)),P=I,N=I,c,m;if(q>w){var z=ln(q/s*D(b)),J=ln(q/h*D(b));(O-=z*2)>w?(z*=p?1:-1,x+=z,R-=z):(O=0,x=R=(y+v)/2),(V-=J*2)>w?(J*=p?1:-1,S+=J,k-=J):(V=0,S=k=(y+v)/2)}var $=h*W(S),B=h*D(S),K=s*W(R),L=s*D(R);if(I>w){var Q=h*W(k),U=h*D(k),j=s*W(x),_=s*D(x),E;if(T<F)if(E=kn($,B,j,_,Q,U,K,L)){var nn=$-E[0],tn=B-E[1],en=Q-E[0],rn=U-E[1],an=1/D(mn((nn*en+tn*rn)/(C(nn*nn+tn*tn)*C(en*en+rn*rn)))/2),on=C(E[0]*E[0]+E[1]*E[1]);P=un(I,(s-on)/(an-1)),N=un(I,(h-on)/(an+1))}else P=N=0}V>w?N>w?(c=X(j,_,$,B,h,N,p),m=X(Q,U,K,L,h,N,p),t.moveTo(c.cx+c.x01,c.cy+c.y01),N<I?t.arc(c.cx,c.cy,N,M(c.y01,c.x01),M(m.y01,m.x01),!p):(t.arc(c.cx,c.cy,N,M(c.y01,c.x01),M(c.y11,c.x11),!p),t.arc(0,0,h,M(c.cy+c.y11,c.cx+c.x11),M(m.cy+m.y11,m.cx+m.x11),!p),t.arc(m.cx,m.cy,N,M(m.y11,m.x11),M(m.y01,m.x01),!p))):(t.moveTo($,B),t.arc(0,0,h,S,k,!p)):t.moveTo($,B),!(s>w)||!(O>w)?t.lineTo(K,L):P>w?(c=X(K,L,Q,U,s,-P,p),m=X($,B,j,_,s,-P,p),t.lineTo(c.cx+c.x01,c.cy+c.y01),P<I?t.arc(c.cx,c.cy,P,M(c.y01,c.x01),M(m.y01,m.x01),!p):(t.arc(c.cx,c.cy,P,M(c.y01,c.x01),M(c.y11,c.x11),!p),t.arc(0,0,s,M(c.cy+c.y11,c.cx+c.x11),M(m.cy+m.y11,m.cx+m.x11),p),t.arc(m.cx,m.cy,P,M(m.y11,m.x11),M(m.y01,m.x01),!p))):t.arc(0,0,s,R,x,p)}if(t.closePath(),f)return t=null,f+""||null}return l.centroid=function(){var f=(+n.apply(this,arguments)+ +e.apply(this,arguments))/2,d=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-F/2;return[W(d)*f,D(d)*f]},l.innerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:A(+f),l):n},l.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:A(+f),l):e},l.cornerRadius=function(f){return arguments.length?(r=typeof f=="function"?f:A(+f),l):r},l.padRadius=function(f){return arguments.length?(u=f==null?null:typeof f=="function"?f:A(+f),l):u},l.startAngle=function(f){return arguments.length?(a=typeof f=="function"?f:A(+f),l):a},l.endAngle=function(f){return arguments.length?(o=typeof f=="function"?f:A(+f),l):o},l.padAngle=function(f){return arguments.length?(i=typeof f=="function"?f:A(+f),l):i},l.context=function(f){return arguments.length?(t=f??null,l):t},l}function cn(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Mn(n,e){return e<n?-1:e>n?1:e>=n?0:NaN}function Sn(n){return n}function Dn(){var n=Sn,e=Mn,r=null,u=A(0),a=A(Y),o=A(0);function i(t){var g,l=(t=cn(t)).length,f,d,s=0,h=new Array(l),y=new Array(l),v=+u.apply(this,arguments),T=Math.min(Y,Math.max(-Y,a.apply(this,arguments)-v)),p,S=Math.min(Math.abs(T)/l,o.apply(this,arguments)),k=S*(T<0?-1:1),x;for(g=0;g<l;++g)(x=y[h[g]=g]=+n(t[g],g,t))>0&&(s+=x);for(e!=null?h.sort(function(R,O){return e(y[R],y[O])}):r!=null&&h.sort(function(R,O){return r(t[R],t[O])}),g=0,d=s?(T-l*k)/s:0;g<l;++g,v=p)f=h[g],x=y[f],p=v+(x>0?x*d:0)+k,y[f]={data:t[f],index:g,value:x,startAngle:v,endAngle:p,padAngle:S};return y}return i.value=function(t){return arguments.length?(n=typeof t=="function"?t:A(+t),i):n},i.sortValues=function(t){return arguments.length?(e=t,r=null,i):e},i.sort=function(t){return arguments.length?(r=t,e=null,i):r},i.startAngle=function(t){return arguments.length?(u=typeof t=="function"?t:A(+t),i):u},i.endAngle=function(t){return arguments.length?(a=typeof t=="function"?t:A(+t),i):a},i.padAngle=function(t){return arguments.length?(o=typeof t=="function"?t:A(+t),i):o},i}function G(n,e){if((i=n.length)>1)for(var r=1,u,a,o=n[e[0]],i,t=o.length;r<i;++r)for(a=o,o=n[e[r]],u=0;u<t;++u)o[u][1]+=o[u][0]=isNaN(a[u][1])?a[u][0]:a[u][1]}function H(n){for(var e=n.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Rn(n,e){return n[e]}function On(n){const e=[];return e.key=n,e}function En(){var n=A([]),e=H,r=G,u=Rn;function a(o){var i=Array.from(n.apply(this,arguments),On),t,g=i.length,l=-1,f;for(const d of o)for(t=0,++l;t<g;++t)(i[t][l]=[0,+u(d,i[t].key,l,o)]).data=d;for(t=0,f=cn(e(i));t<g;++t)i[f[t]].index=t;return r(i,f),i}return a.keys=function(o){return arguments.length?(n=typeof o=="function"?o:A(Array.from(o)),a):n},a.value=function(o){return arguments.length?(u=typeof o=="function"?o:A(+o),a):u},a.order=function(o){return arguments.length?(e=o==null?H:typeof o=="function"?o:A(Array.from(o)),a):e},a.offset=function(o){return arguments.length?(r=o??G,a):r},a}function Vn(n,e){if((u=n.length)>0){for(var r,u,a=0,o=n[0].length,i;a<o;++a){for(i=r=0;r<u;++r)i+=n[r][a][1]||0;if(i)for(r=0;r<u;++r)n[r][a][1]/=i}G(n,e)}}function bn(n,e){if((g=n.length)>0)for(var r,u=0,a,o,i,t,g,l=n[e[0]].length;u<l;++u)for(i=t=0,r=0;r<g;++r)(o=(a=n[e[r]][u])[1]-a[0])>0?(a[0]=i,a[1]=i+=o):o<0?(a[1]=t,a[0]=t+=o):(a[0]=0,a[1]=o)}function qn(n,e){if((a=n.length)>0){for(var r=0,u=n[e[0]],a,o=u.length;r<o;++r){for(var i=0,t=0;i<a;++i)t+=n[i][r][1]||0;u[r][1]+=u[r][0]=-t/2}G(n,e)}}function zn(n,e){if(!(!((i=n.length)>0)||!((o=(a=n[e[0]]).length)>0))){for(var r=0,u=1,a,o,i;u<o;++u){for(var t=0,g=0,l=0;t<i;++t){for(var f=n[e[t]],d=f[u][1]||0,s=f[u-1][1]||0,h=(d-s)/2,y=0;y<t;++y){var v=n[e[y]],T=v[u][1]||0,p=v[u-1][1]||0;h+=T-p}g+=d,l+=h*d}a[u-1][1]+=a[u-1][0]=r,g&&(r-=l/g)}a[u-1][1]+=a[u-1][0]=r,G(n,e)}}function wn(n){var e=n.map(Tn);return H(n).sort(function(r,u){return e[r]-e[u]})}function Tn(n){for(var e=-1,r=0,u=n.length,a,o=-1/0;++e<u;)(a=+n[e][1])>o&&(o=a,r=e);return r}function Pn(n){var e=n.map(sn);return H(n).sort(function(r,u){return e[r]-e[u]})}function sn(n){for(var e=0,r=-1,u=n.length,a;++r<u;)(a=+n[r][1])&&(e+=a);return e}function Wn(n){return Pn(n).reverse()}function $n(n){var e=n.length,r,u,a=n.map(sn),o=wn(n),i=0,t=0,g=[],l=[];for(r=0;r<e;++r)u=o[r],i<t?(i+=a[u],g.push(u)):(t+=a[u],l.push(u));return l.reverse().concat(g)}function Bn(n){return H(n).reverse()}export{H as a,zn as b,qn as c,G as d,bn as e,Vn as f,Bn as g,$n as h,Wn as i,Pn as j,wn as k,En as l,Dn as m,In as n};
