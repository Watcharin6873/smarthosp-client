import{j as e,r}from"./react-B9vPmY1d.js";import{c as Js}from"./react-dom-DlYqUQm3.js";import{N as le,c as Ks,R as Ys}from"./react-router-dom-lMGSEp0j.js";import{L as De,U as vs,a as Ws,S as Re,B as Je,b as Fe,c as Ke,d as Ye,e as Ls,M as Es,H as As,f as Qs,g as Us,F as Xs,h as ks,i as et,T as as,G as fs,j as ns,P as _s,k as ys,l as ls,m as rs,n as Ce,o as cs,p as we,R as st,q as tt,r as ze,s as ke,t as Ms}from"./lucide-react-DnLgPLU_.js";import{O as He,e as je,c as Bs,f as at}from"./react-router-BGd-UZx4.js";import{a as $}from"./axios-CCb-kr4I.js";import{F as l,S as J,B as R,M as he,R as de,a as ye,I as j,A as We,b as Oe,T as Me,c as Ns,C as nt,d as Le,e as _e,D as pe,U as qe,f as ds}from"./antd-9UuqTBoT.js";import{n as Ue,_ as lt,h as ie,f as rt,$ as ve,a0 as Qe,a1 as ct,a2 as Ee,a3 as ss,a4 as js}from"./@ant-design-Jdv5mwsP.js";import{c as dt,a as ot,p as it}from"./zustand-YxMTJhBe.js";import{B as G,Q as ht}from"./react-toastify-DoboqzVe.js";import{d as ge,b as Te}from"./dayjs-CFjeZI5M.js";import{D as xt,P as ut,_ as mt,a as pt}from"./react-pdf-BeJXlnCe.js";import"./classnames-BK5ccKcQ.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-C1y9DUPq.js";import"./rc-util-oW5U3vZm.js";import"./@babel-CRsfOLTH.js";import"./rc-resize-observer-CR2VYCCu.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-motion-HwhRbTFL.js";import"./@rc-component-Dlaa6Cye.js";import"./rc-tooltip-DV-237Nc.js";import"./rc-overflow-AlWds4hc.js";import"./rc-tabs-BUVvnP0P.js";import"./rc-dropdown-CyskiKzf.js";import"./rc-menu-CrVkuPeK.js";import"./rc-select-5R3mNFio.js";import"./rc-virtual-list-Bon04Hn3.js";import"./rc-input-number-BpQXjMOQ.js";import"./rc-input-YuVmbF08.js";import"./@ctrl-DOFZgDuz.js";import"./rc-field-form-1nMKhNtd.js";import"./scroll-into-view-if-needed-BZeNfFF0.js";import"./compute-scroll-into-view-DWa9QgjM.js";import"./rc-image-C_0GtJol.js";import"./rc-dialog-UxpIgeC7.js";import"./rc-switch-5wZUC-sr.js";import"./rc-table-Crf7Whfp.js";import"./rc-tree-DIb-S0ar.js";import"./rc-checkbox-C6ElBFBr.js";import"./rc-pagination-RsVRsqUm.js";import"./throttle-debounce-CUWDS_la.js";import"./rc-textarea-CTn4qYC9.js";import"./rc-upload-BybIn4XX.js";import"./rc-picker-BZnu1vU9.js";import"./rc-progress-CZwERuaH.js";import"./@emotion-CW87jbl0.js";import"./stylis-OW4gUFyn.js";import"./clsx-B-dksMZM.js";import"./make-event-props-BSS3Agxc.js";import"./make-cancellable-promise-BDT7duwA.js";import"./tiny-invariant-CopsF_GD.js";import"./warning-Bct0Odts.js";import"./dequal-tFQomdd2.js";import"./merge-refs-B7wZyJkK.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const w of document.querySelectorAll('link[rel="modulepreload"]'))i(w);new MutationObserver(w=>{for(const S of w)if(S.type==="childList")for(const _ of S.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&i(_)}).observe(document,{childList:!0,subtree:!0});function x(w){const S={};return w.integrity&&(S.integrity=w.integrity),w.referrerPolicy&&(S.referrerPolicy=w.referrerPolicy),w.crossOrigin==="use-credentials"?S.credentials="include":w.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function i(w){if(w.ep)return;w.ep=!0;const S=x(w);fetch(w.href,S)}})();const Ze="/smarthosp-quest/assets/SmartHospital-Logo2-CI3tI5li.png",jt=()=>e.jsxs("div",{className:"bg-green-800 w-64 text-gray-100 flex flex-col h-screen",children:[e.jsx("div",{className:"h-24 bg-green-900 flex items-center justify-center gap-1",children:e.jsx("img",{src:Ze})}),e.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[e.jsxs(le,{to:"/smarthosp-quest/",end:!0,className:({isActive:a})=>a?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(De,{className:"mr-2"}),"Dashboard"]}),e.jsxs(le,{to:"register",className:({isActive:a})=>a?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(vs,{className:"mr-2"}),"ลงทะเบียนใช้งาน"]}),e.jsxs(le,{to:"login",className:({isActive:a})=>a?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ws,{className:"mr-2"}),"เข้าสู่ระบบ"]}),e.jsxs(le,{to:"contact-us",className:({isActive:a})=>a?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Re,{className:"mr-2"}),"ติดต่อเรา"]})]})]}),gt=()=>e.jsx("header",{className:"relative bg-white h-16 flex items-center px-6"}),bt=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex h-screen",children:[e.jsx(jt,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(gt,{}),e.jsx("main",{className:"flex-1 p-6 bg-gray-100 overflow-y-auto",children:e.jsx(He,{})})]})]})}),ue=a=>(r.useEffect(()=>{document.title=`SMART HOSPITAL - ${a}`},[a]),null),os="/smarthosp-quest/assets/Blue-gem-CmKK0kqx.png",Ge="/smarthosp-quest/assets/Gold2-gN-PTU6g.png",Pe="/smarthosp-quest/assets/Silver2-CY2qwQIN.png",ws="/smarthosp-quest/assets/Hospital-B9dPxVpb.png",vt=async()=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getListHospitalAll"),$e=async(a,n)=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getHospitalOnProv/"+n,{headers:{Authorization:"Bearer "+a}}),Ps=async(a,n)=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getListHospitalOnZone/"+n,{headers:{Authorization:"Bearer "+a}}),Ie=async a=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getSubQuetList",{headers:{Authorization:"Bearer "+a}}),ft=async(a,n)=>await $.get(`https://bdh-service.moph.go.th/api/smarthosp/splitComma?hcode=${n}`,{headers:{Authorization:"Bearer "+a}}),_t=async()=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/sumEvaluateAll"),yt=async()=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getHospitalInListEvaluate"),is=async(a,n)=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getListSubQuestsForEvaluate/"+n,{headers:{Authorization:"Bearer "+a}}),hs=async(a,n)=>await $.post("https://bdh-service.moph.go.th/api/smarthosp/saveEvaluates",n,{headers:{Authorization:"Bearer "+a}}),Ds=async(a,n)=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getListEvaluateByHosp2/"+n,{headers:{Authorization:"Bearer "+a}}),xs=async(a,n,x)=>await $.get(`https://bdh-service.moph.go.th/api/smarthosp/getEvaluateByHosp?questId=${n}&hcode=${x}`,{headers:{Authorization:"Bearer "+a}}),Rs=async(a,n)=>await $.get(`https://bdh-service.moph.go.th/api/smarthosp/sumEvaluateByHosp?hcode=${n}`,{headers:{Authorization:"Bearer "+a}}),Xe=async(a,n)=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getListEvaluateByProv/"+n,{headers:{Authorization:"Bearer "+a}}),es=async(a,n)=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getListEvaluateByZone/"+n,{headers:{Authorization:"Bearer "+a}}),gs=async(a,n)=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getEvaluateById/"+n,{headers:{Authorization:"Bearer "+a}}),Nt=async(a,n)=>await $.put("https://bdh-service.moph.go.th/api/smarthosp/updateChoiceEvaluate",n,{headers:{Authorization:"Bearer "+a}}),Ae=async(a,n,x)=>await $.get(`https://bdh-service.moph.go.th/api/smarthosp/getDocumentsByEvaluateByHosp?category_questId=${n}&hcode=${x}`,{headers:{Authorization:"Bearer "+a}}),wt=async(a,n,x)=>await $.put("https://bdh-service.moph.go.th/api/smarthosp/uploadFileById/"+n,x,{headers:{Authorization:"Bearer "+a,"Content-Type":"multipart/form-data"}}),us=async(a,n)=>await $.put("https://bdh-service.moph.go.th/api/smarthosp/ssjChangeStatusApprove",n,{headers:{Authorization:"Bearer "+a}}),qt=async(a,n)=>await $.post("https://bdh-service.moph.go.th/api/smarthosp/uploadCyberImageFile",n,{headers:{Authorization:"Bearer "+a,"Content-Type":"multipart/form-data"}}),qs=async(a,n)=>await $.get(`https://bdh-service.moph.go.th/api/smarthosp/getCyberSecurityLevelData?hcode=${n}`,{headers:{Authorization:"Bearer "+a}}),It=async(a,n)=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/removeFileById/"+n,{headers:{Authorization:"Bearer "+a}}),St=async(a,n)=>await $.get(`https://bdh-service.moph.go.th/api/smarthosp/getSumEvaluateByZone?zone=${n}`,{headers:{Authorization:"Bearer "+a}}),ms=async(a,n)=>await $.put("https://bdh-service.moph.go.th/api/smarthosp/ssjUnApprove",n,{headers:{Authorization:"Bearer "+a}}),Ft=()=>{ue("Dashboard");const[a,n]=r.useState([]),[x,i]=r.useState([]),[w,S]=r.useState([]),[_,H]=r.useState([]),[q,V]=r.useState([]),[m]=l.useForm(),[F,A]=r.useState(""),[p,o]=r.useState(""),[f,g]=r.useState();r.useEffect(()=>{B(),te(),ae()},[]);const B=async()=>{await vt().then(s=>{n(s.data)}).catch(s=>{console.log(s)})},te=async()=>{await yt().then(s=>{i(s.data),V(s.data)}).catch(s=>{console.log(s)})},ae=async()=>{await _t().then(s=>{S(s.data),H(s.data)}).catch(s=>{console.log(s)})},E=s=>{A(s)},D=s=>{o(s)},K=s=>{console.log(s);const U=s.zone,v=s.provcode;g({zone:U,provcode:v}),H(w.filter(ee=>ee.zone===U&&ee.provcode===v)),V(x.filter(ee=>ee.zone===U&&ee.provcode===v)),m.resetFields()},N=s=>{console.log("Failed: ",s)},b=()=>{H(w.map(s=>({...s}))),V(x.map(s=>({...s})))},z=_.map(s=>({zone:s.zone,provcode:s.provcode,provname:s.provname,hcode:s.hcode,hname_th:s.hname_th,sumTotalPoint:s.sub_quest_total_point,sumRequirePoint:s.sub_quest_require_point,cyber_level:s.cyber_level,cyber_levelname:s.cyber_levelname}));[...new Set(z.map(s=>s.zone))];const C=z.map(s=>({zone:s.zone,provcode:s.provcode,provname:s.provname}));function M(s,U){const v=s.map(ce=>[U.map(P=>ce[P]).join("|"),ce]),ee=new Map(v);return Array.from(ee.values())}const W=M(C,["zone"]),re=M(C,["zone","provcode","provname"]),Q=z.filter(s=>s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level=="GREEN"),T=z.filter(s=>s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint==510||s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level!="GREEN"),X=z.filter(s=>s.sumTotalPoint>=600&&s.sumTotalPoint<=700||s.sumTotalPoint>=700&&s.sumRequirePoint<510||s.sumTotalPoint>=800&&s.sumRequirePoint<510);a.length-x.length;const Y=z.filter(s=>s.sumTotalPoint<600),I=Q.length/a.length*100,t=T.length/a.length*100,y=X.length/a.length*100,c=x.length/a.length*100;(a.length-x.length)/a.length*100;const k=Y.length/a.length*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex justify-center items-center mb-5",children:e.jsxs(l,{form:m,name:"formSearch",layout:"inline",onFinish:K,onFinishFailed:N,children:[e.jsx(l.Item,{name:"zone",rules:[{required:!0,message:"กรุณาเลือกเขตสุขภาพ!"}],children:e.jsx(J,{style:{width:180},placeholder:"เลือกเขตสุขภาพ...",onChange:E,children:W.sort((s,U)=>s-U).map((s,U)=>e.jsxs(J.Option,{value:s.zone,children:["เขตสุขภาพที่ ",U+1]},U))})}),e.jsx(l.Item,{name:"provcode",rules:[{required:!0,message:"กรุณาเลือกเขตสุขภาพ!"}],children:e.jsx(J,{style:{width:180},placeholder:"เลือกจังหวัด...",onChange:D,children:re.map((s,U)=>F===s.zone?e.jsx(J.Option,{value:s.provcode,children:s.provname},U):null)})}),e.jsx(l.Item,{children:e.jsxs(R,{type:"primary",htmlType:"submit",children:[e.jsx(Ue,{})," ค้นหา"]})}),e.jsx(l.Item,{children:e.jsxs(R,{danger:!0,onClick:b,children:[e.jsx(lt,{})," ล้างค่า"]})})]})}),e.jsx("div",{className:"flex justify-center items-center mb-5 gap-2 text-base font-bold text-green-700 pr-5",children:W.length>1?e.jsx(e.Fragment,{children:e.jsx("p",{children:"ผลการประเมินทั้งหมด"})}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["ผลการประเมินของเขตสุขภาพที่ ",Number(F)]}),W.map(s=>s.provcode===p?e.jsxs("p",{children:["จังหวัด : ",s.provname]}):null)]})})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:ws,alt:"HospitalIcon"}),e.jsx("p",{className:"text-xl text-green-700 font-bold",children:"ประเมินแล้ว"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3 text-green-700",children:[e.jsx("p",{className:"text-4xl",children:q.length}),e.jsx("p",{children:"แห่ง"})]}),e.jsxs("div",{className:"p-2 flex justify-between text-green-700",children:[e.jsx("div",{children:e.jsx("p",{children:"คิดเป็น"})}),e.jsx("div",{className:"flex",children:e.jsxs("p",{children:[c.toFixed(1)," % "]})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:os,alt:"Gem"}),e.jsx("p",{className:"text-xl text-blue-500 font-bold",children:"ระดับเพชร"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3 text-blue-500",children:[e.jsx("p",{className:"text-4xl",children:Q.length}),e.jsx("p",{children:"แห่ง"})]}),e.jsxs("div",{className:"p-2 flex justify-between text-blue-500",children:[e.jsx("div",{children:e.jsx("p",{children:"คิดเป็น"})}),e.jsx("div",{className:"flex",children:e.jsxs("p",{children:[I.toFixed(1)," % "]})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:Ge,alt:"Gold"}),e.jsx("p",{className:"text-xl  text-yellow-500 font-bold",children:"ระดับทอง"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3 text-yellow-500",children:[e.jsx("p",{className:"text-4xl",children:T.length}),e.jsx("p",{children:"แห่ง"})]}),e.jsxs("div",{className:"p-2 flex justify-between text-yellow-500",children:[e.jsx("div",{children:e.jsx("p",{children:"คิดเป็น"})}),e.jsx("div",{className:"flex",children:e.jsxs("p",{children:[t.toFixed(1)," % "]})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:Pe,alt:"Silver"}),e.jsx("p",{className:"text-xl text-slate-500 font-bold",children:"ระดับเงิน"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3 text-slate-500",children:[e.jsx("p",{className:"text-4xl",children:X.length}),e.jsx("p",{children:"แห่ง"})]}),e.jsxs("div",{className:"p-2 flex justify-between  text-slate-500",children:[e.jsx("div",{children:e.jsx("p",{children:"คิดเป็น"})}),e.jsx("div",{className:"flex",children:e.jsxs("p",{children:[y.toFixed(1)," % "]})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex justify-center items-center bg-amber-50 w-12 h-12 rounded-full shadow-md",children:e.jsx(Je,{size:40,className:"text-red-500"})}),e.jsx("p",{className:"text-xl text-red-500 font-bold",children:"ไม่ผ่าน"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3 text-red-500",children:[e.jsx("p",{className:"text-4xl",children:Y.length}),e.jsx("p",{children:"แห่ง"})]}),e.jsxs("div",{className:"p-2 flex justify-between  text-red-500",children:[e.jsx("div",{children:e.jsx("p",{children:"คิดเป็น"})}),e.jsx("div",{className:"flex",children:e.jsxs("p",{children:[k.toFixed(1)," % "]})})]})]})]})]})},Ct=()=>(ue("Checklist บันทึกข้อมูล"),e.jsx("div",{children:"CheckList"})),kt=()=>(ue("คู่มือการบันทึกข้อมูล"),e.jsx("div",{children:"UserGuide"})),Hs="/smarthosp-quest/assets/SmartHospital-Logo-skdE5XsK.png",Os="/smarthosp-quest/assets/Plogo-f6506bc1-BFPUxwqs.png",zt=async a=>await $.post("https://bdh-service.moph.go.th/api/smarthosp/registerByProviderID",a),Lt=async a=>await $.post("https://bdh-service.moph.go.th/api/smarthosp/loginByProviderID",a),Et=async a=>await $.post("https://bdh-service.moph.go.th/api/smarthosp/current-user",{},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}),At=async a=>await $.post("https://bdh-service.moph.go.th/api/smarthosp/current-admin",{},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}),Ts=async a=>await $.post("https://moph.id.th/api/v1/token",{grant_type:a.grant_type,code:a.code,redirect_uri:a.redirect_uri,client_id:a.client_id,client_secret:a.client_secret},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),Zs=async a=>await $.post("https://provider.id.th/api/v1/services/token",a),$s=async(a,n,x)=>await $.get("https://provider.id.th/api/v1/services/profile",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a,"client-id":n,"secret-key":x}}),Qt=(a,n)=>({user:null,token:null,logout:()=>{a({user:null,token:null})},actionLogin:async x=>{try{const i=await Lt(x);a({user:i.data.payload.user,token:i.data.token})}catch(i){console.log(i.response.data),G.warning(i.response.data.message)}}}),Ut={name:"global-store",storage:dt(()=>localStorage)},O=ot(it(Qt,Ut)),Mt=()=>{ue("Login เข้าใช้งาน");const a=je(),n=Bs().search;O(E=>E.actionLogin),O(E=>E.user);const[x,i]=r.useState([]),[w,S]=r.useState(!1),[_,H]=r.useState({hcode:"",hname_th:"",position_id:"",position:"",address:""}),[q,V]=r.useState(!1),[m]=l.useForm(),F=new URLSearchParams(n).get("code");F&&Ts({grant_type:"authorization_code",code:F,redirect_uri:"https://bdh-service.moph.go.th/smarthosp-quest/register/",client_id:"019274d1-ac2a-7352-b73a-ca66a5b135fb",client_secret:"97e76d1d6eff9ac1ee377d598c0fe995f018a9c3"}).then(D=>{const N={client_id:"49fba4c4-2c60-4d3f-b8da-3925d1ad7e65",secret_key:"F83E767464E7334923C43D1C1443B",token_by:"Health ID",token:D.data.data.access_token};Zs(N).then(b=>{const z=b.data.data.access_token;$s(z,"49fba4c4-2c60-4d3f-b8da-3925d1ad7e65","F83E767464E7334923C43D1C1443B").then(W=>{console.log("ProviderProfile: ",W.data.data),i(W.data.data);const re=W.data.data.organization;re.length>0?S(!0):(H(re),V(!0))}).catch(W=>{console.log(W)})}).catch(b=>{console.log(b)})}).catch(D=>{console.log(D)});const A=x.organization,p=()=>{S(!1)},o=()=>{S(!1),V(!1)},f=E=>{H(E.target.value),S(!1),V(!0)},g={email:x.email,title_th:x.title_th,firstname_th:x.firstname_th,lastname_th:x.lastname_th,hcode:_.hcode,hname_th:_.hname_th,position_id:_.position_id,position:_.position,address:_.address,level:"4",objective:"responder"};r.useEffect(()=>{m.setFieldsValue({hcode:g.hcode,hname_th:g.hname_th,email:g.email,title_th:g.title_th,firstname_th:g.firstname_th,lastname_th:g.lastname_th,position_id:g.position_id,position:g.position,district:g.address.district,province:g.address.province,level:g.level,objective:g.objective})});const B=[{value:"01",label:"เขตสุขภาพที่ 1"},{value:"02",label:"เขตสุขภาพที่ 2"},{value:"03",label:"เขตสุขภาพที่ 3"},{value:"04",label:"เขตสุขภาพที่ 4"},{value:"05",label:"เขตสุขภาพที่ 5"},{value:"06",label:"เขตสุขภาพที่ 6"},{value:"07",label:"เขตสุขภาพที่ 7"},{value:"08",label:"เขตสุขภาพที่ 8"},{value:"09",label:"เขตสุขภาพที่ 9"},{value:"10",label:"เขตสุขภาพที่ 10"},{value:"11",label:"เขตสุขภาพที่ 11"},{value:"12",label:"เขตสุขภาพที่ 12"},{value:"13",label:"เขตสุขภาพที่ 13"}],te=async E=>{console.log(E),await zt(E).then(D=>{G.success(D.data.message),V(!1),setTimeout(()=>a("/smarthosp-quest/login"),5e3)}).catch(D=>{console.log(D),G.warning(D.response.data.message)})},ae=E=>{console.log("Failed",E)};return e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("div",{}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-white rounded-md shadow-md w-full p-2",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex justify-center items-center mb-5",children:e.jsx("img",{className:"mt-5",src:Hs})}),e.jsx("div",{className:"text-lg flex justify-center mb-4",children:e.jsx("h1",{style:{color:"#037840"},children:"ลงทะเบียนใช้งานด้วย"})}),e.jsx("div",{children:e.jsx(R,{className:"h-12",block:!0,href:"https://moph.id.th/oauth/redirect?client_id=019274d1-ac2a-7352-b73a-ca66a5b135fb&redirect_uri=https://bdh-service.moph.go.th/smarthosp-quest/register/&response_type=code",children:e.jsx("img",{className:"w-32 p-2",src:Os})})})]})}),e.jsxs(he,{title:e.jsxs("div",{style:{justifyContent:"center",display:"flex",marginLeft:"auto",marginRight:"auto"},children:[e.jsx(ie,{style:{color:"orange"}}),"  ",e.jsx("span",{children:"เลือกหน่วยบริการที่ต้องการล็อกอิน"})]}),open:w,onOk:p,onCancel:o,footer:null,width:400,style:{top:20},children:[e.jsx("hr",{}),e.jsx(de.Group,{onChange:f,children:e.jsx(ye,{direction:"vertical",children:A&&A.map((E,D)=>e.jsx(de.Button,{value:E,style:{width:"350px"},children:E.hname_th+" ["+E.hcode+"]"},D))})})]}),e.jsx(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{style:{color:"orange"}}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"ลงทะเบียนเข้าใช้งาน"})]}),open:q,onOk:m.submit,onCancel:o,width:1e3,style:{top:20},children:e.jsx(l,{name:"formCreateUser",form:m,layout:"vertical",onFinish:te,onFinishFailed:ae,className:"mt-2",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-full p-2",children:e.jsxs("div",{className:"border rounded-md px-2 py-2 mb-2 h-full",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("p",{className:"text-lg font-bold m-2",children:e.jsx("u",{children:"ข้อมูลบุคคล"})})}),e.jsx(l.Item,{name:"firstname_th",label:e.jsx("b",{children:"ชื่อ :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(j,{readOnly:!0})}),e.jsx(l.Item,{name:"lastname_th",label:e.jsx("b",{children:"นามสกุล :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(j,{readOnly:!0})}),e.jsx(l.Item,{name:"position_id",label:e.jsx("b",{children:"รหัสตำแหน่ง :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(j,{readOnly:!0})}),e.jsx(l.Item,{name:"position",label:e.jsx("b",{children:"ตำแหน่ง :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(j,{readOnly:!0})}),e.jsx(l.Item,{name:"email",label:e.jsx("b",{children:"อีเมล :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(j,{readOnly:!0})})]})}),e.jsx("div",{className:"w-full p-2",children:e.jsxs("div",{className:"border rounded-md px-2 py-2 mb-2 h-full",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("p",{className:"text-lg font-bold m-2",children:e.jsx("u",{children:"ที่อยู่หน่วยบริการ"})})}),e.jsx(l.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(j,{readOnly:!0})}),e.jsx(l.Item,{name:"hname_th",label:e.jsx("b",{children:"ชื่อหน่วยบริการ :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(j,{readOnly:!0})}),e.jsx(l.Item,{name:"district",label:e.jsx("b",{children:"อำเภอ :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(j,{readOnly:!0})}),e.jsx(l.Item,{name:"province",label:e.jsx("b",{children:"จังหวัด :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(j,{readOnly:!0})}),e.jsx(l.Item,{name:"zone",label:e.jsx("b",{children:"เขตสุขภาพ :"}),rules:[{required:!0,message:"กรุณาระบุเขตสุขภาพ!"}],style:{marginBottom:"10px"},children:e.jsx(J,{options:B,placeholder:"กรุณาระบุเขตสุขภาพ..."})})]})}),e.jsx("div",{className:"w-full p-2",children:e.jsxs("div",{className:"border rounded-md px-2 py-2 mb-2 h-full",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("p",{className:"text-lg font-bold m-2",children:e.jsx("u",{children:"ระดับหน่วยงาน"})})}),e.jsx(l.Item,{name:"level",label:e.jsx("b",{children:"ระดับหน่วยงาน :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(de.Group,{onChange:E=>E.target.value,children:e.jsxs(ye,{direction:"vertical",children:[e.jsx(de,{value:"4",children:"หน่วยบริการ"}),e.jsx(de,{value:"3",children:"จังหวัด"}),e.jsx(de,{value:"2",children:"เขตสุขภาพ"}),e.jsx(de,{value:"1",children:"ส่วนกลาง"})]})})}),e.jsx(l.Item,{name:"objective",label:e.jsx("b",{children:"ประเภทผู้ใช้ :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(de.Group,{onChange:E=>E.target.value,children:e.jsxs(ye,{direction:"vertical",children:[e.jsx(de,{value:"zone_approve",children:"คกก.รพ.อัจฉริยะเขตฯ Approve"}),e.jsx(de,{value:"prov_approve",children:"คกก.รพ.อัจฉริยะ สสจ. Approve"}),e.jsx(de,{value:"responder",children:"ผู้ประเมินโรงพยาบาลตนเอง"})]})})})]})})]})})})]}),e.jsx("div",{})]})},Bt=()=>{ue("Login เข้าใช้งาน");const a=je(),n=Bs().search,x=O(o=>o.actionLogin),i=O(o=>o.user),[w,S]=r.useState([]),[_,H]=r.useState(!1),[q,V]=r.useState({hcode:"",hname_th:"",position_id:"",position:"",address:""});l.useForm();const m=new URLSearchParams(n).get("code");m&&Ts({grant_type:"authorization_code",code:m,redirect_uri:"https://bdh-service.moph.go.th/smarthosp-quest/login/",client_id:"019274d1-ac2a-7352-b73a-ca66a5b135fb",client_secret:"97e76d1d6eff9ac1ee377d598c0fe995f018a9c3"}).then(f=>{const B={client_id:"49fba4c4-2c60-4d3f-b8da-3925d1ad7e65",secret_key:"F83E767464E7334923C43D1C1443B",token_by:"Health ID",token:f.data.data.access_token};Zs(B).then(te=>{const ae=te.data.data.access_token;$s(ae,"49fba4c4-2c60-4d3f-b8da-3925d1ad7e65","F83E767464E7334923C43D1C1443B").then(K=>{console.log("ListHosp: ",K.data.organization),S(K.data.data);const N=K.data.data.organization;N.length>0?H(!0):(V(N),setRegisterModal(!0))}).catch(K=>{console.log(K.response.data)})}).catch(te=>{console.log(te.response.data)})}).catch(f=>{console.log(f.response.data)});const F=w.organization,A=()=>{H(!1),setRegisterModal(!1)};w.email,w.firstname_th,w.lastname_th,q.hcode;const p=o=>{const f={email:w.email,firstname_th:w.firstname_th,lastname_th:w.lastname_th,hcode:o.hospital.hcode,level:o.level,objective:o.objective};console.log("Values: ",f),x(f);const g=i.role,B=i.objective;g&&(H(!1),G.success(`ยินดีต้อนรับคุณ ${i.firstname_th+" "+i.lastname_th}`)),g==="admin"&&B==="Administrator"?setTimeout(()=>a("/smarthosp-quest/admin"),5e3):g==="user"&&B==="responder"?setTimeout(()=>a("/smarthosp-quest/user/responder"),5e3):g==="user"&&B==="prov_approve"?setTimeout(()=>a("/smarthosp-quest/user/prov-approve"),5e3):g==="user"&&B==="zone_approve"&&setTimeout(()=>a("/smarthosp-quest/user/zone-approve"),5e3)};return e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("div",{}),e.jsx("div",{children:e.jsx("div",{className:"bg-white rounded-md shadow-md w-full p-2",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex justify-center items-center mb-5",children:e.jsx("img",{className:"mt-5",src:Hs})}),e.jsx("div",{className:"text-lg flex justify-center mb-4",children:e.jsx("h1",{style:{color:"#037840"},children:"ล็อกอินเข้าใช้งานด้วย"})}),e.jsx("div",{children:e.jsx(R,{className:"h-12",block:!0,href:"https://moph.id.th/oauth/redirect?client_id=019274d1-ac2a-7352-b73a-ca66a5b135fb&redirect_uri=https://bdh-service.moph.go.th/smarthosp-quest/login/&response_type=code",children:e.jsx("img",{className:"w-32 p-2",src:Os})})})]})})}),e.jsx("div",{}),e.jsxs(he,{title:e.jsxs("div",{style:{justifyContent:"center",display:"flex",marginLeft:"auto",marginRight:"auto"},children:[e.jsx(ie,{style:{color:"orange"}}),"  ",e.jsx("span",{children:"เลือกหน่วยบริการที่ต้องการล็อกอิน"})]}),open:_,onCancel:A,footer:null,width:400,style:{top:20},children:[e.jsx("hr",{}),e.jsxs(l,{name:"form-login",layout:"vertical",onFinish:p,children:[e.jsx(l.Item,{name:"hospital",label:e.jsx("b",{children:"หน่วยบริการ :"}),rules:[{required:!0,message:"กรุณาคลิกเลือกหน่วยบริการ"}],children:e.jsx(de.Group,{onChange:o=>o.target.value,children:e.jsx(ye,{direction:"vertical",children:F&&F.map((o,f)=>e.jsx(de.Button,{value:o,style:{width:"350px"},children:o.hname_th+" ["+o.hcode+"]"},f))})})}),e.jsx(l.Item,{name:"level",label:e.jsx("b",{children:"ระดับหน่วยงาน :"}),rules:[{required:!0,message:"กรุณาเลือกระดับหน่วยงาน"}],children:e.jsx(de.Group,{onChange:o=>o.target.value,children:e.jsxs(ye,{direction:"vertical",children:[e.jsx(de,{value:"4",children:"หน่วยบริการ"}),e.jsx(de,{value:"3",children:"จังหวัด"}),e.jsx(de,{value:"2",children:"เขตสุขภาพ"}),e.jsx(de,{value:"1",children:"ส่วนกลาง (กระทรวงสาธารณสุข)"})]})})}),e.jsx(l.Item,{children:e.jsx(R,{block:!0,type:"primary",htmlType:"submit",size:"",children:"ล็อกอินเข้าใช้งาน"})})]})]})]})},Be=()=>(ue("ติดต่อเรา"),e.jsxs("div",{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{children:"สำนักสุขภาพดิจิทัล สำนักงานปลัดกระทรวงสาธารณสุข"}),e.jsx("p",{children:"สำนักงานใหม่ อาคาร 6 ชัน 7 ตึกสำนักงานปลัดกระทรวงสาธารณสุข"})]}),e.jsx("div",{})]})),Vs=()=>{const[a,n]=r.useState(3),[x,i]=r.useState(!1);return r.useEffect(()=>{const w=setInterval(()=>{n(S=>(S===1&&(clearInterval(w),i(!0)),S-1))},1e3);return()=>clearInterval(w)},[]),x?e.jsx(at,{to:"/smarthosp-quest/"}):e.jsxs("div",{className:"text-center",children:["No Permission, redirect in ",a]})},ts=({element:a})=>{const n=O(S=>S.user),x=O(S=>S.token),[i,w]=r.useState(!1);return r.useEffect(()=>{n&&x&&Et(x).then(S=>{w(!0)}).catch(S=>{w(!1)})},[]),i?a:e.jsx(Vs,{})},Pt=({element:a})=>{const n=O(S=>S.user),x=O(S=>S.token),[i,w]=r.useState(!1);return console.log("pAdmin: ",n,x),r.useEffect(()=>{n.role&&x&&At(x).then(S=>{w(!0)}).catch(S=>{console.log(S),w(!1)})},[]),i?a:e.jsx(Vs,{})},{confirm:Dt}=he,Rt=()=>{const a=O(i=>i.logout),n=je(),x=()=>{Dt({title:"คุณต้องการออกจากระบบหรือไม่?",icon:e.jsx(ie,{}),content:"",onOk(){a(),n("/smarthosp-quest/")},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"bg-green-800 w-64 text-gray-100 flex flex-col h-screen",children:[e.jsx("div",{className:"h-24 bg-green-900 flex items-center justify-center gap-1",children:e.jsx("div",{children:e.jsx("img",{src:Ze})})}),e.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[e.jsxs(le,{to:"/smarthosp-quest/user",end:!0,className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(De,{className:"mr-2"}),"Dashboard"]}),e.jsxs(le,{to:"result-infrastructure",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Fe,{className:"mr-2"}),"ผลประเมินด้านโครงสร้าง"]}),e.jsxs(le,{to:"result-management",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Fe,{className:"mr-2"}),"ผลประเมินด้านบริหารจัดการ"]}),e.jsxs(le,{to:"result-service",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Fe,{className:"mr-2"}),"ผลประเมินด้านการบริหาร"]}),e.jsxs(le,{to:"result-people",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Fe,{className:"mr-2"}),"ผลประเมินด้านบุคลากร"]}),e.jsxs(le,{to:"contact-us",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Re,{className:"mr-2"}),"ติดต่อเรา"]})]}),e.jsx("footer",{className:"px-4 py-4 space-y-2",children:e.jsxs(le,{onClick:x,className:"text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ke,{className:"mr-2"}),"Logout"]})})]})},Ht=()=>{const a=O(x=>x.token),n=O(x=>x.user);return e.jsx("header",{className:"relative bg-white h-16 flex items-center px-6",children:e.jsx("div",{className:"absolute right-5",children:e.jsx("div",{className:"flex items-center gap-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"bg-green-600",icon:e.jsx(Ye,{})}),e.jsxs("p",{children:[n.firstname_th+" "+n.lastname_th+" ["+n.hcode+"]"," [",n.objective,"]"]})]}):null})})})},Ot=()=>e.jsxs("div",{className:"flex h-screen",children:[e.jsx(Rt,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Ht,{}),e.jsx("main",{className:"flex-1 p-6 bg-gray-100 overflow-y-auto",children:e.jsx(He,{})})]})]}),Tt=()=>{const a=O(o=>o.user),n=O(o=>o.token),[x,i]=r.useState([]),[w,S]=r.useState({cyber_level:"",cyber_image:"",usersId:"",hcode:""});r.useEffect(()=>{H(),q()},[]);const _=a.hcode,H=async()=>{await Rs(n,_).then(o=>{i(o.data)}).catch(o=>{console.log(o)})},q=async()=>{await qs(n,a.hcode).then(o=>{S(o.data)}).catch(o=>{console.log(o)})},V=x.map(o=>({...o})),m=V.filter(o=>o.category_questId===1),F=V.filter(o=>o.category_questId===2),A=V.filter(o=>o.category_questId===3),p=V.filter(o=>o.category_questId===4);return x.reduce((o,f)=>o+Number(f.total_point),0),x.reduce((o,f)=>o+Number(f.require_point),0),e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(Ls,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านโครงสร้าง"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนเต็ม"}),m.map(o=>o.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/300"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[o.total_point,"/300"]})),m.map(o=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(o.total_point/300*100).toFixed(1)," %"]}))]}),e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนจำเป็น"}),m.map(o=>o.require_point===null?e.jsx("p",{className:"text-2xl text-green-700",children:"0/170"}):e.jsxs("p",{className:"text-2xl text-green-700",children:[o.require_point,"/170"]})),m.map(o=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(o.require_point/170*100).toFixed(1)," %"]}))]})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(Es,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านบริหารจัดการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนเต็ม"}),F.map(o=>o.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/300"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[o.total_point,"/300"]})),F.map(o=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(o.total_point/300*100).toFixed(1)," %"]}))]}),e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนจำเป็น"}),F.map(o=>o.require_point===null?e.jsx("p",{className:"text-2xl text-green-700",children:"0/170"}):e.jsxs("p",{className:"text-2xl text-green-700",children:[o.require_point,"/170"]})),F.map(o=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(o.require_point/170*100).toFixed(1)," %"]}))]})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(As,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านการบริการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนเต็ม"}),A.map(o=>o.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/300"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[o.total_point,"/300"]})),A.map(o=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(o.total_point/300*100).toFixed(1)," %"]}))]}),e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนจำเป็น"}),A.map(o=>o.require_point===null?e.jsx("p",{className:"text-2xl text-green-700",children:"0/170"}):e.jsxs("p",{className:"text-2xl text-green-700",children:[o.require_point,"/170"]})),A.map(o=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(o.require_point/170*100).toFixed(1)," %"]}))]})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(Qs,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านบุคลากร"})]}),e.jsx("div",{className:"flex justify-center items-baseline gap-2 my-3",children:e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนเต็ม"}),p.map(o=>o.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/100"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[o.total_point,"/100"]})),p.map(o=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(o.total_point/100*100).toFixed(1)," %"]}))]})})]})]})})},Zt=()=>e.jsx("div",{children:e.jsx(Tt,{})}),$t=()=>{const a=O(t=>t.user),n=O(t=>t.token),[x,i]=r.useState([]),[w,S]=r.useState([]),[_,H]=r.useState(),[q,V]=r.useState([]),[m,F]=r.useState([]);r.useEffect(()=>{te(),ae(),p(),o(),f()},[]);const A=a.hcode,p=async()=>{await Ie(n).then(t=>{F(t.data)}).catch(t=>{console.log(t)})},o=async()=>{await Ds(n,A).then(t=>{V(t.data)}).catch(t=>{console.log(t)})},f=async()=>{await ft(n,A).then(t=>{S(t.data)}).catch(t=>{console.log(t)})},g=q.map(t=>({id:t.id,category_questId:t.category_questId,questId:t.questId,sub_questId:t.sub_questId,sub_quest_name:t.sub_quests.sub_quest_name,check:t.check.split(","),hcode:t.hcode,userId:t.userId,file_name:t.file_name,ssj_approve:t.ssj_approve,zone_approve:t.zone_approve,createdAt:t.createdAt,updatedAt:t.updatedAt}));m.map(t=>({id:t.id,sub_questId:t.sub_questId,choice:t.choice,sub_quest_listname:t.sub_quest_listname,sub_quest_total_point:t.sub_quest_total_point,sub_quest_require_point:t.sub_quest_require_point,description:t.description,necessary:t.necessary,createdAt:t.createdAt,updatedAt:t.updatedAt})).map(t=>g.map(y=>t.choice===y.check));const te=async()=>{await Rs(n,A).then(t=>{i(t.data)}).catch(t=>{console.log(t)})},ae=async()=>{await qs(n,a.hcode).then(t=>{H(t.data)}).catch(t=>{console.log(t)})},E=w.map(t=>({category_questId:Number(t.category_questId),sub_quest_require_point:Number(t.sub_quest_require_point),sub_quest_total_point:Number(t.sub_quest_total_point)})),D=E.filter(t=>t.category_questId===1),K=E.filter(t=>t.category_questId===2),N=E.filter(t=>t.category_questId===3),b=E.filter(t=>t.category_questId===4),z=g.filter(t=>t.category_questId===1),C=g.filter(t=>t.category_questId===2),M=g.filter(t=>t.category_questId===3),W=g.filter(t=>t.category_questId===4),re=[...new Map(z.map(t=>[t.zone_approve,t])).values()],Q=[...new Map(C.map(t=>[t.zone_approve,t])).values()],T=[...new Map(M.map(t=>[t.zone_approve,t])).values()],X=[...new Map(W.map(t=>[t.zone_approve,t])).values()],Y=w.reduce((t,y)=>t+Number(y.sub_quest_total_point),0),I=w.reduce((t,y)=>t+Number(y.sub_quest_require_point),0);return e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsx("div",{className:"flex justify-center items-center gap-2",children:e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"คะแนนที่ได้อยู่ในระดับ"})}),e.jsx("div",{className:"flex justify-center items-baseline gap-2 my-3",children:Y<600?e.jsx("div",{style:{textAlign:"center"},children:e.jsx("p",{className:"text-4xl font-bold text-red-500",children:"ไม่ผ่าน!"})}):Y>=600&&Y<700?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{className:"text-4xl font-bold text-slate-400",children:"เงิน"}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("img",{className:"w-32",src:Pe,alt:"Gem"})})]}):Y>=700&&I<510?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{className:"text-4xl font-bold text-slate-400",children:"เงิน"}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("img",{className:"w-32",src:Pe,alt:"Gem"})})]}):Y>=700&&Y<800&&I==510?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{className:"text-4xl font-bold text-yellow-600",children:"ทอง"}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("img",{className:"w-32",src:Ge,alt:"Gem"})})]}):Y>=800&&I<510?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{className:"text-4xl font-bold text-slate-400",children:"เงิน"}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("img",{className:"w-32",src:Pe,alt:"Gem"})})]}):Y>=800&&I==510&&(_==null?void 0:_.cyber_level)!="GREEN"?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{className:"text-4xl font-bold text-yellow-600",children:"ทอง"}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("img",{className:"w-32",src:Ge,alt:"Gem"})})]}):Y>=800&&I==510&&(_==null?void 0:_.cyber_level)=="GREEN"?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{className:"text-4xl font-bold text-orange-400",children:"เพชร"}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("img",{className:"w-32",src:os,alt:"Gem"})})]}):null})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(Ls,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านโครงสร้าง"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 my-3",children:[e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนที่ได้"}),D.map(t=>t.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/300"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[t.sub_quest_total_point,"/300"]})),D.map(t=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(t.sub_quest_total_point/300*100).toFixed(1)," %"]}))]}),e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนจำเป็น"}),D.map(t=>t.require_point===null?e.jsx("p",{className:"text-2xl text-green-700",children:"0/170"}):e.jsxs("p",{className:"text-2xl text-green-700",children:[t.sub_quest_require_point,"/170"]})),D.map(t=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(t.sub_quest_require_point/170*100).toFixed(1)," %"]}))]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.สสจ.) : "}),re==null?void 0:re.map(t=>t.ssj_approve==!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.เขตฯ.) : "}),re==null?void 0:re.map(t=>t.zone_approve===!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(Es,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านบริหารจัดการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 my-3",children:[e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนที่ได้"}),K.map(t=>t.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/300"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[t.sub_quest_total_point,"/300"]})),K.map(t=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(t.sub_quest_total_point/300*100).toFixed(1)," %"]}))]}),e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนจำเป็น"}),K.map(t=>t.require_point===null?e.jsx("p",{className:"text-2xl text-green-700",children:"0/170"}):e.jsxs("p",{className:"text-2xl text-green-700",children:[t.sub_quest_require_point,"/170"]})),K.map(t=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(t.sub_quest_require_point/170*100).toFixed(1)," %"]}))]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.สสจ.) : "}),Q==null?void 0:Q.map(t=>t.ssj_approve==!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.เขตฯ.) : "}),Q==null?void 0:Q.map(t=>t.zone_approve===!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsx("div",{className:"flex justify-center items-center gap-2",children:e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"คะแนนรวมทุกด้าน"})}),e.jsxs("div",{className:"p-2 mt-10 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"คะแนนที่ได้รวม"})}),e.jsx("div",{className:"flex text-green-700",children:Y<600?e.jsx("p",{className:"text-red-500",children:Y}):Y>=600&&Y<700?e.jsx("p",{className:"text-slate-400",children:Y}):Y>=700&&Y<800?e.jsx("p",{className:"text-yellow-600",children:Y}):Y>=800?e.jsx("p",{className:"text-green-700",children:Y}):null})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"คะแนนจำเป็นรวม"})}),e.jsx("div",{className:"flex text-green-700",children:I<510?e.jsx("p",{className:"text-red-500",children:I}):e.jsx("p",{className:"text-green-700",children:I})})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"ระดับ Cyber security"})}),e.jsx("div",{className:"flex text-green-700",children:(_==null?void 0:_.cyber_level)==="GREEN"?e.jsx("p",{className:"text-green-700",children:_==null?void 0:_.cyber_levelname}):(_==null?void 0:_.cyber_level)==="YELLOW"?e.jsx("p",{className:"text-yellow-400",children:_==null?void 0:_.cyber_levelname}):(_==null?void 0:_.cyber_level)==="RED"?e.jsx("p",{className:"text-red-500",children:_==null?void 0:_.cyber_levelname}):e.jsx("p",{className:"text-red-500",children:"-"})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(As,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านการบริการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 my-3",children:[e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนที่ได้"}),N.map(t=>t.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/300"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[t.sub_quest_total_point,"/300"]})),N.map(t=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(t.sub_quest_total_point/300*100).toFixed(1)," %"]}))]}),e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนจำเป็น"}),N.map(t=>t.require_point===null?e.jsx("p",{className:"text-2xl text-green-700",children:"0/170"}):e.jsxs("p",{className:"text-2xl text-green-700",children:[t.sub_quest_require_point,"/170"]})),N.map(t=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(t.sub_quest_require_point/170*100).toFixed(1)," %"]}))]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.สสจ.) : "}),T==null?void 0:T.map(t=>t.ssj_approve==!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.เขตฯ.) : "}),T==null?void 0:T.map(t=>t.zone_approve===!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(Qs,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านบุคลากร"})]}),e.jsx("div",{className:"flex justify-center items-baseline gap-1 my-3",children:e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนที่ได้"}),b.map(t=>t.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/100"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[t.sub_quest_total_point,"/100"]})),b.map(t=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(t.sub_quest_total_point/100*100).toFixed(1)," %"]}))]})}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.สสจ.) : "}),X==null?void 0:X.map(t=>t.ssj_approve==!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.เขตฯ.) : "}),X==null?void 0:X.map(t=>t.zone_approve===!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]})]})]})})},zs=()=>e.jsx("div",{children:e.jsx($t,{})}),{confirm:Vt}=he,Gt=()=>{const a=O(i=>i.logout),n=je(),x=()=>{Vt({title:"คุณต้องการออกจากระบบหรือไม่?",icon:e.jsx(ie,{}),content:"",onOk(){a(),n("/smarthosp-quest/")},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"bg-green-800 w-64 text-gray-100 flex flex-col h-screen",children:[e.jsx("div",{className:"h-24 bg-green-900 flex items-center justify-center gap-1",children:e.jsx("div",{children:e.jsx("img",{src:Ze})})}),e.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[e.jsxs(le,{to:"/smarthosp-quest/admin",end:!0,className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(De,{className:"mr-2"}),"Dashboard"]}),e.jsxs(le,{to:"manage-user",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Us,{className:"mr-2"}),"จัดการข้อมูลผู้ใช้งาน (เขตฯ)"]}),e.jsxs(le,{to:"manage-topic",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Xs,{className:"mr-2"}),"จัดการข้อมูลด้านการประเมิน"]}),e.jsxs(le,{to:"manage-quest",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ks,{className:"mr-2"}),"จัดการข้อมูลเกณฑ์หลัก"]}),e.jsxs(le,{to:"manage-sub-quest",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ks,{className:"mr-2"}),"จัดการข้อมูลเกณฑ์ย่อย"]}),e.jsxs(le,{to:"report-centre",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(et,{className:"mr-2"}),"รายงานผลการประเมิน"]}),e.jsxs(le,{to:"contact-us",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Re,{className:"mr-2"}),"ติดต่อเรา"]})]}),e.jsx("footer",{className:"px-4 py-4 space-y-2",children:e.jsxs(le,{onClick:x,className:"text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ke,{className:"mr-2"}),"Logout"]})})]})},Jt=()=>{const a=O(x=>x.token),n=O(x=>x.user);return e.jsx("header",{className:"relative bg-white h-16 flex items-center px-6",children:e.jsx("div",{className:"absolute right-5",children:e.jsx("div",{className:"flex items-center gap-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"bg-green-600",icon:e.jsx(Ye,{})}),e.jsxs("p",{children:[n.firstname_th+" "+n.lastname_th+" ["+n.hcode+"]"," [",n.objective,"]"]})]}):null})})})},Kt=()=>e.jsxs("div",{className:"flex h-screen",children:[e.jsx(Gt,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Jt,{}),e.jsx("main",{className:"flex-1 p-6 bg-gray-100 overflow-y-auto",children:e.jsx(He,{})})]})]}),Yt=async a=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getListUsersZoneApprove",{headers:{Authorization:"Bearer "+a}}),Wt=async(a,n)=>await $.get(`https://bdh-service.moph.go.th/api/smarthosp/getListUsersByProv?province=${n}`,{headers:{Authorization:"Bearer "+a}}),Xt=async(a,n)=>await $.get(`https://bdh-service.moph.go.th/api/smarthosp/getListUsersByZone?zone=${n}`,{headers:{Authorization:"Bearer "+a}}),ea=async(a,n)=>await $.put("https://bdh-service.moph.go.th/api/smarthosp/changeRole",n,{headers:{Authorization:"Bearer "+a}}),Is=async(a,n)=>await $.put("https://bdh-service.moph.go.th/api/smarthosp/changeStatus",n,{headers:{Authorization:"Bearer "+a}}),sa=async(a,n)=>await $.put("https://bdh-service.moph.go.th/api/smarthosp/changeObjective",n,{headers:{Authorization:"Bearer "+a}}),ta=async(a,n)=>await $.delete("https://bdh-service.moph.go.th/api/smarthosp/removeUser/"+n,{headers:{Authorization:"Bearer "+a}}),aa=async(a,n)=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/approveUserOnProv/"+n,{headers:{Authorization:"Bearer "+a}}),na=async(a,n)=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/notApproveUserOnProv/"+n,{headers:{Authorization:"Bearer "+a}}),la=async(a,n)=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/approveUserOnZone/"+n,{headers:{Authorization:"Bearer "+a}}),ra=async(a,n)=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/notApproveUserOnZone/"+n,{headers:{Authorization:"Bearer "+a}});ge.extend(Te);const{confirm:ca}=he,da=()=>{const a=O(b=>b.token),[n,x]=r.useState([]),[i,w]=r.useState([]),[S,_]=r.useState(!1),[H]=l.useForm();r.useState(!1),r.useEffect(()=>{F(a)},[]);const q=[{id:1,zone:"01",zone_name:"เขตสุขภาพที่ 1"},{id:2,zone:"02",zone_name:"เขตสุขภาพที่ 2"},{id:3,zone:"03",zone_name:"เขตสุขภาพที่ 3"},{id:4,zone:"04",zone_name:"เขตสุขภาพที่ 4"},{id:5,zone:"05",zone_name:"เขตสุขภาพที่ 5"},{id:6,zone:"06",zone_name:"เขตสุขภาพที่ 6"},{id:7,zone:"07",zone_name:"เขตสุขภาพที่ 7"},{id:8,zone:"08",zone_name:"เขตสุขภาพที่ 8"},{id:9,zone:"09",zone_name:"เขตสุขภาพที่ 9"},{id:10,zone:"10",zone_name:"เขตสุขภาพที่ 10"},{id:11,zone:"11",zone_name:"เขตสุขภาพที่ 11"},{id:12,zone:"12",zone_name:"เขตสุขภาพที่ 12"}];q.sort((b,z)=>b.id>z.id?1:-1).map(b=>({...b})).map(b=>({key:b.id,value:b.zone,label:b.zone_name}));const m=async b=>{console.log("Failed: ",b)},F=async b=>{_(!0),await Yt(b).then(z=>{console.log(z.data),x(z.data),w(z.data),_(!1)}).catch(z=>{console.log(z),_(!1)}).finally(()=>_(!1))},A=b=>{console.log(b),w(n.filter(z=>z.zone===b.zone))},p=b=>{w(n.filter(z=>z.hcode.toLowerCase().includes(b.target.value)||z.hname_th.toLowerCase().includes(b.target.value)||z.firstname_th.toLowerCase().includes(b.target.value)))},o=i.map((b,z)=>({...b,key:z})),g=[{role:"user",role_name:e.jsx(Me,{className:"w-full bg-orange-300 text-center text-white",children:"User"})},{role:"admin",role_name:e.jsx(Me,{className:"w-full bg-green-500 text-center text-white",children:"Admin"})}].map(b=>({value:b.role,label:b.role_name})),te=[{type:"Administrator",type_name:e.jsx(Me,{className:"w-full bg-green-500 text-center text-white",children:"ผู้ดูแลระบบ"})},{type:"zone_approve",type_name:e.jsx(Me,{className:"w-full bg-blue-500 text-center text-white",children:"คคก.เขตสุขภาพ"})},{type:"prov_approve",type_name:e.jsx(Me,{className:"w-full bg-orange-300 text-center text-white",children:"คคก.จังหวัด"})},{type:"responder",type_name:e.jsx(Me,{className:"w-full bg-yellow-400 text-center text-white",children:"ผู้ประเมิน รพ."})}].map(b=>({value:b.type,label:b.type_name})),ae=[{title:"ลำดับ",align:"center",render:({key:b})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:b+1})})},{title:"ชื่อ-นามสกุล",render:({title_th:b,firstname_th:z,lastname_th:C})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:[b," ",z," ",C]})})},{title:e.jsx("p",{className:"text-center",children:"หน่วยบริการ"}),render:({hname_th:b,hcode:z})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:[b," [",z,"]"]})})},{title:e.jsx("p",{className:"text-center",children:"เขตสุขภาพ"}),render:({zone:b})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:["เขตสุขภาพที่ ",Number(b)]})})},{title:e.jsx("p",{className:"text-center",children:"ตำแหน่ง"}),render:({position:b,position_id:z})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:[b," [",z,"]"]})})},{title:"ระดับ",dataIndex:"level",align:"center",render:(b,{id:z})=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:b==1?"ส่วนกลาง":b==2?"เขตสุขภาพ":b==3?"จังหวัด":b==4?"หน่วยบริการ":""})})},{title:"สิทธิ",dataIndex:"role",align:"center",render:(b,{id:z})=>e.jsx(e.Fragment,{children:e.jsx(J,{options:g,className:"w-28",defaultValue:b,onChange:C=>E(C,z)})})},{title:"ประเภท",dataIndex:"objective",align:"center",width:"10%",render:(b,{id:z})=>e.jsx(e.Fragment,{children:e.jsx(J,{options:te,className:"w-full",defaultValue:b,onChange:C=>D(C,z)})})},{title:"การอนุมัติ",align:"center",render:({enabled:b,id:z})=>e.jsx(e.Fragment,{children:e.jsx(Ns,{size:"small",checked:b,onChange:C=>K(C,z)})})},{title:"วันที่เพิ่ม",align:"center",render:({createdAt:b})=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:ge(b).locale("th").format("DD MMM BB")})})},{title:"จัดการ",align:"center",render:({id:b})=>e.jsx(e.Fragment,{children:e.jsx("button",{className:"px-4 border rounded-full py-1 bg-red-500 hover:bg-red-600 shadow-md text-white",onClick:()=>N(b),children:e.jsx(as,{size:16})})})}],E=(b,z)=>{ea(a,{id:z,role:b}).then(M=>{G.success(M.data.message),F(a)}).catch(M=>{console.log(M)})},D=(b,z)=>{sa(a,{id:z,objective:b}).then(M=>{G.success(M.data.message),F(a)}).catch(M=>{G.error(M.response.data.message)})},K=(b,z)=>{Is(a,{id:z,enabled:b}).then(M=>{G.success(M.data.message),F(a)}).catch(M=>{console.log(M)})},N=b=>{ca({title:"คุณต้องการลบข้อมูลหรือไม่?",icon:e.jsx(ie,{}),onOk(){ta(a,b).then(z=>{G.error(z.data.message),F(a)}).catch(z=>{console.log(z)})},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:[e.jsx(Us,{})," ",e.jsx("p",{className:"ml-1",children:" จัดการข้อมูลผู้ใช้งาน"})]}),e.jsxs("div",{className:"border rounded-md p-2 bg-white shadow-md",children:[e.jsx("div",{className:"flex justify-center items-center p-1",children:e.jsxs(l,{name:"formSearch",form:H,onFinish:A,onFinishFailed:m,layout:"inline",children:[e.jsx(l.Item,{name:"zone",label:"เลือกเขตสุขภาพ",rules:[{required:!0,message:"กรุณาเลือกเขตสุขภาพ"}],children:e.jsx(J,{showSearch:!0,optionFilterProp:"label",filterSort:(b,z)=>((b==null?void 0:b.label)??"").toLowerCase().localeCompare(((z==null?void 0:z.label)??"").toLowerCase()),placeholder:"กรุณาเลือกหน่วยบริการ...",style:{width:"250px"},children:q.map(b=>e.jsx(J.Option,{value:b.zone,children:b.zone_name},b.id))})}),e.jsx(l.Item,{children:e.jsx(R,{type:"primary",htmlType:"submit",children:"ค้นหา"})})]})}),e.jsxs("div",{className:"flex justify-between items-center p-3",children:[e.jsx("div",{children:e.jsxs("p",{style:{fontSize:"14px"},children:["จำนวนบัญชี คกก.เขตสุขภาพ ทั้งหมด ",i.length," รายการ"]})}),e.jsx("div",{children:e.jsx(j,{placeholder:"ค้นหาด้วย hcode, ชื่อ, ชื่อหน่วยบริการ...",className:"rounded-full",style:{width:250},prefix:e.jsx(Ue,{}),onChange:p})})]}),e.jsx(Oe,{columns:ae,dataSource:o,bordered:!0,size:"small",pagination:{pageSize:12}})]})]})},oa=()=>e.jsx("div",{children:e.jsx(da,{})}),ia=async(a,n)=>await $.post("https://bdh-service.moph.go.th/api/smarthosp/createCategory",n,{headers:{Authorization:"Bearer "+a}}),ps=async a=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getListCategory",{headers:{Authorization:"Bearer "+a}}),ha=async(a,n)=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getCategoryById/"+n,{headers:{Authorization:"Bearer "+a}}),xa=async(a,n)=>await $.put("https://bdh-service.moph.go.th/api/smarthosp/updateCategory",n,{headers:{Authorization:"Bearer "+a}}),ua=async(a,n)=>await $.delete("https://bdh-service.moph.go.th/api/smarthosp/removeCategory/"+n,{headers:{Authorization:"Bearer "+a}});ge.extend(Te);const{confirm:ma}=he,pa=()=>{const a=O(C=>C.token),[n,x]=r.useState([]),[i,w]=r.useState([]),[S,_]=r.useState([]),[H,q]=r.useState(!1),[V,m]=r.useState(!1),[F,A]=r.useState(!1),[p]=l.useForm(),[o]=l.useForm();r.useEffect(()=>{f(a)},[]);const f=async C=>{q(!0),await ps(C).then(M=>{x(M.data),_(M.data)}).catch(M=>{console.log(M)}).finally(()=>q(!1))},g=C=>{_(n.filter(M=>M.category_name_th.toLowerCase().includes(C.target.value)||M.category_name_eng.toLowerCase().includes(C.target.value)))},B=S.map((C,M)=>({...C,key:M})),te=[{title:"ลำดับ",align:"center",render:({key:C})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:C+1})})},{title:e.jsx("p",{className:"text-center",children:"ชื่อด้าน (ไทย)"}),render:({category_name_th:C})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:C})})},{title:e.jsx("p",{className:"text-center",children:"ชื่อด้าน (อังกฤษ)"}),render:({category_name_eng:C})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:C})})},{title:"ปีงบประมาณ",align:"center",render:({fiscal_year:C})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:C})})},{title:"วันที่เพิ่ม",align:"center",render:({createdAt:C})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:ge(C).locale("th").format("DD MMM BB")})})},{title:"วันที่แก้ไข",align:"center",render:({updatedAt:C})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:ge(C).locale("th").format("DD MMM BB")})})},{title:"จัดการ",align:"center",render:({id:C})=>e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("button",{className:"mr-1 px-4 border rounded-full py-1 bg-yellow-400 hover:bg-yellow-500 shadow-md text-white",onClick:()=>N(C),children:e.jsx(ys,{size:16})}),e.jsx("button",{className:"px-4 border rounded-full py-1 bg-red-500 hover:bg-red-600 shadow-md text-white",onClick:()=>z(C),children:e.jsx(as,{size:16})})]})})}],ae=()=>{m(!0)},E=()=>{m(!1),A(!1)};r.useEffect(()=>{p.setFieldsValue({category_name_th:"",category_name_eng:"",fiscal_year:"2568"})});const D=async C=>{console.log("FieldValues: ",C),ia(a,C).then(M=>{G.success(M.data.message),f(a),m(!1)}).catch(M=>{G.warning(M.response.data.message)})},K=C=>{console.log("Fialed: ",C)},N=async C=>{A(!0),await ha(a,C).then(M=>{w(M.data)}).catch(M=>{console.log(M)})};r.useEffect(()=>{o.setFieldsValue({category_name_th:i.category_name_th,category_name_eng:i.category_name_eng,fiscal_year:i.fiscal_year})});const b=async C=>{const M={...C,id:i.id};await xa(a,M).then(W=>{G.success(W.data.message),A(!1),f(a)}).catch(W=>{console.log(W)})},z=async C=>{ma({title:"คุณต้องการลบข้อมูลหรือไม่?",icon:e.jsx(ie,{}),onOk(){ua(a,C).then(M=>{G.error(M.data.message),f(a)}).catch(M=>{console.log(M)})},onCancel(){console.log("Cancel")}})};return e.jsx("div",{children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:[e.jsx(fs,{})," ",e.jsx("p",{className:"ml-2",children:"ข้อมูลด้านการประเมิน"})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md",children:[H?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(ns,{className:"w-16 h-16 text-blue-400 animate-spin"})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center p-2",children:[e.jsxs("div",{className:"flex p-2 items-center",style:{fontSize:"14px"},children:[e.jsx("button",{className:"bg-green-600 py-1 px-4 rounded-full shadow-md hover:bg-green-700",onClick:ae,children:e.jsxs("p",{className:"flex px-1 text-white items-center",children:[e.jsx(_s,{className:""})," เพิ่ม"]})}),e.jsxs("p",{style:{fontSize:"14px",marginLeft:"5px"},children:["จำนวนทั้งหมด ",S.length," รายการ"]})]}),e.jsx("div",{children:e.jsx(j,{placeholder:"ค้นหาด้วยชื่อภาษาไทย หรือ อังกฤษ...",prefix:e.jsx(Ue,{}),className:"rounded-full",style:{width:250},onChange:g})})]}),e.jsx("div",{children:e.jsx(Oe,{columns:te,dataSource:B,size:"small",bordered:!0,pagination:{pageSize:12}})})]}),e.jsx(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"เพิ่มด้านการประเมิน"})]}),open:V,onOk:p.submit,onCancel:E,width:450,style:{top:20},children:e.jsxs(l,{name:"formCreate",form:p,layout:"vertical",onFinish:D,onFinishFailed:K,className:"mt-2",children:[e.jsx(l.Item,{name:"category_name_th",label:e.jsx("b",{children:"ชื่อด้านการประเมิน (ไทย)"}),rules:[{required:!0,message:"กรุณาระบุชื่อด้านการประเมิน"}],hasFeedback:!0,className:"mb-3",children:e.jsx(j,{placeholder:"ระบุชื่อด้านการประเมินภาษาไทย"})}),e.jsx(l.Item,{name:"category_name_eng",label:e.jsx("b",{children:"ชื่อด้านการประเมิน (อังกฤษ)"}),rules:[{required:!0,message:"กรุณาระบุชื่อด้านการประเมิน"}],hasFeedback:!0,className:"mb-3",children:e.jsx(j,{placeholder:"ระบุชื่อด้านการประเมินภาษาอังกฤษ"})}),e.jsx(l.Item,{name:"fiscal_year",label:e.jsx("b",{children:"ปีงบประมาณ"}),rules:[{required:!0,message:"กรุณาระบุปีงบประมาณ"}],hasFeedback:!0,className:"mb-3",children:e.jsx(j,{placeholder:"ระบุปีงบประมาณ",readOnly:!0})})]})}),e.jsx(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-yellow-500"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แก้ไขด้านการประเมิน"})]}),open:F,onOk:o.submit,onCancel:E,width:450,style:{top:20},children:e.jsxs(l,{name:"formUpdate",form:o,layout:"vertical",onFinish:b,onFinishFailed:K,className:"mt-2",children:[e.jsx(l.Item,{name:"category_name_th",label:e.jsx("b",{children:"ชื่อด้านการประเมิน (ไทย)"}),rules:[{required:!0,message:"กรุณาระบุชื่อด้านการประเมิน"}],hasFeedback:!0,className:"mb-3",children:e.jsx(j,{placeholder:"ระบุชื่อด้านการประเมินภาษาไทย"})}),e.jsx(l.Item,{name:"category_name_eng",label:e.jsx("b",{children:"ชื่อด้านการประเมิน (อังกฤษ)"}),rules:[{required:!0,message:"กรุณาระบุชื่อด้านการประเมิน"}],hasFeedback:!0,className:"mb-3",children:e.jsx(j,{placeholder:"ระบุชื่อด้านการประเมินภาษาอังกฤษ"})}),e.jsx(l.Item,{name:"fiscal_year",label:e.jsx("b",{children:"ปีงบประมาณ"}),rules:[{required:!0,message:"กรุณาระบุปีงบประมาณ"}],hasFeedback:!0,className:"mb-3",children:e.jsx(j,{placeholder:"ระบุปีงบประมาณ",readOnly:!0})})]})})]})]})})},ja=()=>e.jsx("div",{children:e.jsx(pa,{})}),ga=async(a,n)=>await $.post("https://bdh-service.moph.go.th/api/smarthosp/createQuests",n,{headers:{Authorization:"Bearer "+a}}),fe=async a=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getListQuests",{headers:{Authorization:"Bearer "+a}}),ba=async(a,n)=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getQuestById/"+n,{headers:{Authorization:"Bearer "+a}}),va=async(a,n)=>await $.put("https://bdh-service.moph.go.th/api/smarthosp/updateQuests",n,{headers:{Authorization:"Bearer "+a}}),fa=async(a,n)=>await $.delete("https://bdh-service.moph.go.th/api/smarthosp/removeQuests/"+n,{headers:{Authorization:"Bearer "+a}});ge.extend(Te);const{confirm:_a}=he,ya=()=>{const a=O(Q=>Q.token),[n,x]=r.useState([]),[i,w]=r.useState([]),[S,_]=r.useState([]),[H,q]=r.useState([]),[V,m]=r.useState(!1),[F,A]=r.useState(!1),[p,o]=r.useState(!1),[f]=l.useForm(),[g]=l.useForm();r.useEffect(()=>{B(a)},[]);const B=async Q=>{await ps(Q).then(T=>{x(T.data)}).catch(T=>{console.log(T)})},te=n.map(Q=>({value:Q.id,label:Q.category_name_th}));r.useEffect(()=>{ae(a)},[]);const ae=async Q=>{m(!0),await fe(Q).then(T=>{w(T.data),_(T.data)}).catch(T=>{console.log(T)}).finally(()=>m(!1))},E=Q=>{_(i.filter(T=>T.category_quests.category_name_th.toLowerCase().includes(Q.target.value)))},D=S.map((Q,T)=>({...Q,key:T})),K=[{title:"ลำดับ",align:"center",render:({key:Q})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:Q+1})})},{title:e.jsx("p",{className:"text-center",children:"ด้าน"}),render:({category_quests:Q})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:Q.category_name_th})})},{title:e.jsx("p",{className:"text-center",children:"คำถามหลัก"}),width:"45%",render:({quest_name:Q})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:Q})})},{title:"ปีงบประมาณ",align:"center",render:({category_quests:Q})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:Q.fiscal_year})})},{title:"วันที่เพิ่ม",align:"center",render:({createdAt:Q})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:ge(Q).locale("th").format("DD MMM BB")})})},{title:"วันที่แก้ไข",align:"center",render:({updatedAt:Q})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:ge(Q).locale("th").format("DD MMM BB")})})},{title:"จัดการ",align:"center",render:({id:Q})=>e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("button",{className:"mr-1 px-4 border rounded-full py-1 bg-yellow-400 hover:bg-yellow-500 shadow-md text-white",onClick:()=>M(Q),children:e.jsx(ys,{size:16})}),e.jsx("button",{className:"px-4 border rounded-full py-1 bg-red-500 hover:bg-red-600 shadow-md text-white",onClick:()=>re(Q),children:e.jsx(as,{size:16})})]})})}],N=()=>{A(!0)},b=()=>{A(!1),o(!1)},z=async Q=>{const T=Q.items[0].list.map(X=>({quest_name:X.quest_name,category_questId:Q.items[0].category_questId}));console.log("Value: ",T),await ga(a,T).then(X=>{G.success(X.data.message),A(!1),ae(a)}).catch(X=>{console.log(X.response.data.message),G.warning(X.response.data.message)})},C=Q=>{console.log("Failed: ",Q)},M=async Q=>{o(!0),await ba(a,Q).then(T=>{q(T.data)}).catch(T=>{console.log(T)})};r.useEffect(()=>{g.setFieldsValue({category_questId:H.category_questId,quest_name:H.quest_name})});const W=async Q=>{const T={...Q,id:H.id};await va(a,T).then(X=>{G.success(X.data.message),ae(a),o(!1)}).catch(X=>{console.log(X.response.data.message),G.error(X.response.data.message)})},re=async Q=>{_a({title:"คุณต้องการลบข้อมูลหรือไม่?",icon:e.jsx(ie,{}),onOk(){fa(a,Q).then(T=>{G.success(T.data.message),ae(a)}).catch(T=>{console.log(T.response.data.message),G.error(T.response.data.message)})},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:[e.jsx(fs,{})," ",e.jsx("p",{className:"ml-2",children:"ข้อมูลเกณฑ์การประเมินหลัก"})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md",children:[V?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(ns,{className:"w-16 h-16 text-blue-400 animate-spin"})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center p-2",children:[e.jsxs("div",{className:"flex p-2 items-center",style:{fontSize:"14px"},children:[e.jsx("button",{className:"bg-green-600 py-1 px-4 rounded-full shadow-md hover:bg-green-700",onClick:N,children:e.jsxs("p",{className:"flex px-1 text-white items-center",children:[e.jsx(_s,{className:""})," เพิ่ม"]})}),e.jsxs("p",{style:{fontSize:"14px",marginLeft:"5px"},children:["จำนวนทั้งหมด ",S.length," รายการ"]})]}),e.jsx("div",{children:e.jsx(j,{placeholder:"ค้นหาด้วยชื่อ...",prefix:e.jsx(Ue,{}),className:"rounded-full",style:{width:250},onChange:E})})]}),e.jsx("div",{className:"p-2",children:e.jsx(Oe,{dataSource:D,columns:K,size:"small",bordered:!0})})]}),e.jsx(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"เพิ่มคำถามหลัก"})]}),open:F,onOk:f.submit,onCancel:b,width:450,style:{top:20},children:e.jsx(l,{name:"formCreate",form:f,layout:"vertical",onFinish:z,onFinishFailed:C,className:"mt-2",autoComplete:"off",initialValues:{items:[{}]},children:e.jsx(l.List,{name:"items",children:(Q,{add:T,remove:X})=>e.jsx("div",{children:Q.map(Y=>e.jsxs(nt,{size:"small",children:[e.jsx(l.Item,{label:"ด้านการประเมิน",name:[Y.name,"category_questId"],children:e.jsx(J,{options:te,placeholder:"กรุณาเลือกด้านการประเมิน..."})}),e.jsx(l.Item,{label:"คำถามหลัก",children:e.jsx(l.List,{name:[Y.name,"list"],children:(I,t)=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",rowGap:16},children:[I.map(y=>e.jsxs(ye,{children:[e.jsx(l.Item,{noStyle:!0,name:[y.name,"quest_name"],children:e.jsx(j.TextArea,{placeholder:"ระบุคำถาม....",style:{width:350}})}),e.jsx(rt,{onClick:()=>{t.remove(y.name)}})]},y.key)),e.jsx(R,{type:"dashed",onClick:()=>t.add(),block:!0,children:"+ เพิ่มคำถามหลัก"})]})})})]},Y.key))})})})}),e.jsx(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-yellow-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แก้ไขคำถามหลัก"})]}),open:p,onOk:g.submit,onCancel:b,width:450,style:{top:20},children:e.jsxs(l,{name:"formCreate",form:g,layout:"vertical",onFinish:W,onFinishFailed:C,className:"mt-2",children:[e.jsx(l.Item,{name:"category_questId",label:e.jsx("b",{children:"ชื่อด้านการประเมิน"}),rules:[{required:!0,message:"กรุณาระบุชื่อด้านการประเมิน"}],hasFeedback:!0,className:"mb-3",children:e.jsx(J,{options:te})}),e.jsx(l.Item,{name:"quest_name",label:e.jsx("b",{children:"คำถามหลัก"}),rules:[{required:!0,message:"กรุณาระบุคำถามหลัก"}],hasFeedback:!0,className:"mb-3",children:e.jsx(j,{})})]})})]})]})},Na=()=>e.jsx("div",{children:e.jsx(ya,{})}),wa=async(a,n)=>await $.post("https://bdh-service.moph.go.th/api/smarthosp/createSubQuest",n,{headers:{Authorization:"Bearer "+a}}),qa=async a=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getListSubQuests",{headers:{Authorization:"Bearer "+a}}),Ia=async(a,n)=>await $.get("https://bdh-service.moph.go.th/api/smarthosp/getSubQuestById/"+n,{headers:{Authorization:"Bearer "+a}}),Sa=async(a,n)=>await $.get(`https://bdh-service.moph.go.th/api/smarthosp/getSubQuestByCatId?category_questId=${n}`,{headers:{Authorization:"Bearer "+a}}),Fa=async(a,n)=>await $.put("https://bdh-service.moph.go.th/api/smarthosp/updateSubQuest",n,{headers:{Authorization:"Bearer "+a}}),Ca=async(a,n)=>await $.delete("https://bdh-service.moph.go.th/api/smarthosp/removeSubQuest/"+n,{headers:{Authorization:"Bearer "+a}});ge.extend(Te);const{confirm:ka}=he,{TextArea:bs}=j,za=()=>{const a=O(I=>I.token),[n,x]=r.useState([]),[i,w]=r.useState([]),[S,_]=r.useState(!1),[H,q]=r.useState(!1),[V,m]=r.useState(!1),[F,A]=r.useState([]),[p,o]=r.useState([]),[f,g]=r.useState([]),[B]=l.useForm(),[te]=l.useForm(),[ae,E]=r.useState({category_questId:""});r.useEffect(()=>{D(a),K(a),N(a)},[]);const D=async I=>{await ps(I).then(t=>{x(t.data)}).catch(t=>{console.log(t)})},K=async I=>{await fe(I).then(t=>{w(t.data)}).catch(t=>{console.log(t)})},N=async I=>{_(!0),await qa(I).then(t=>{A(t.data),o(t.data)}).catch(t=>{console.log(t)}).finally(()=>_(!1))},b=I=>{o(F.filter(t=>t.category_quests.category_name_th.toLowerCase().includes(I.target.value)||t.quests.quest_name.toLowerCase().includes(I.target.value)||t.sub_quest_name.toLowerCase().includes(I.target.value)))},z=p.map((I,t)=>({...I,key:t})),C=[{title:"ลำดับ",align:"center",render:({key:I})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:I+1})})},{title:e.jsx("p",{className:"text-center",children:"คำถามย่อย"}),width:"45%",render:({sub_quest_name:I})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:I})})},{title:"จำเป็น",align:"center",render:({necessary:I})=>e.jsx(e.Fragment,{children:e.jsx(_e,{checked:I})})},{title:"วันที่เพิ่ม",align:"center",render:({createdAt:I})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:ge(I).locale("th").format("DD MMM BB")})})},{title:"วันที่แก้ไข",align:"center",render:({updatedAt:I})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:ge(I).locale("th").format("DD MMM BB")})})},{title:"จัดการ",align:"center",render:({id:I})=>e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("button",{className:"mr-1 px-4 border rounded-full py-1 bg-yellow-400 hover:bg-yellow-500 shadow-md text-white",onClick:()=>T(I),children:e.jsx(ys,{size:16})}),e.jsx("button",{className:"px-4 border rounded-full py-1 bg-red-500 hover:bg-red-600 shadow-md text-white",onClick:()=>Y(I),children:e.jsx(as,{size:16})})]})})}],M=()=>{q(!0)},W=()=>{q(!1),m(!1)};r.useEffect(()=>{B.setFieldsValue({category_questId:null,questId:null,sub_quest_name:null,sub_quest_require_point:0,sub_quest_total_point:0,description:null,necessary:null})});const re=async I=>{console.log("fieldValue: ",I),await wa(a,I).then(t=>{G.success(t.data.message),q(!1),N(a)}).catch(t=>{console.log(t.response.data.message),G.warning(t.response.data.message)})},Q=I=>{console.log("Failed: ",I)},T=I=>{console.log("Update Modal: ",I),m(!0),Ia(a,I).then(t=>{g(t.data)}).catch(t=>{console.log(t)})};r.useEffect(()=>{te.setFieldsValue({category_questId:f.category_questId,questId:f.questId,sub_quest_name:f.sub_quest_name,sub_quest_total_point:f.sub_quest_total_point,sub_quest_require_point:f.sub_quest_require_point,description:f.description,necessary:f.necessary})});const X=I=>{const t={...I,id:f.id};console.log(t),Fa(a,t).then(y=>{G.success(y.data.message),m(!1),N(a)}).catch(y=>{console.log(y.response.data.message),G.error(y.response.data.message)})},Y=I=>{ka({title:"คุณต้องการลบข้อมูลหรือไม่?",icon:e.jsx(ie,{}),onOk(){Ca(a,I).then(t=>{G.success(t.data.message),N(a)}).catch(t=>{console.log(t.response.data.message),G.error(t.response.data.message)})},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:[e.jsx(fs,{})," ",e.jsx("p",{className:"ml-2",children:"ข้อมูลเกณฑ์การประเมินย่อย"})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md",children:[S?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(ns,{className:"w-16 h-16 text-blue-400 animate-spin"})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center p-2",children:[e.jsxs("div",{className:"flex items-center p-2",children:[e.jsx("button",{className:"bg-green-600 py-1 px-4 rounded-full shadow-md hover:bg-green-700",onClick:M,children:e.jsxs("p",{className:"flex px-1 text-white items-center",children:[e.jsx(_s,{className:""})," เพิ่ม"]})}),e.jsxs("p",{style:{fontSize:"14px",marginLeft:"5px"},children:["จำนวนทั้งหมด ",p.length," รายการ"]})]}),e.jsx("div",{children:e.jsx(j,{placeholder:"ค้นหาด้วยชื่อ...",prefix:e.jsx(Ue,{}),className:"rounded-full",style:{width:250},onChange:b})})]}),e.jsx("div",{children:e.jsx(Oe,{dataSource:z,columns:C,size:"dmall",bordered:!0})})]}),e.jsx(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"เพิ่มเกณฑ์ย่อย"})]}),open:H,onOk:B.submit,onCancel:W,width:450,style:{top:20},children:e.jsxs(l,{name:"formCreate",form:B,layout:"vertical",onFinish:re,onFinishFailed:Q,className:"mt-2",autoComplete:"off",initialValues:{items:[{}]},children:[e.jsx(l.Item,{name:"category_questId",label:e.jsx("b",{children:"ชื่อด้านการประเมิน"}),rules:[{required:!0,message:"กรุณาระบุชื่อด้านการประเมิน"}],className:"mb-3",children:e.jsx(J,{placeholder:"กรุณาเลือกชื่อด้านการประเมิน...",onChange:I=>E(I),children:n.sort((I,t)=>I-t).map((I,t)=>e.jsx(J.Option,{value:I.id,children:I.category_name_th},t))})}),e.jsx(l.Item,{name:"questId",label:e.jsx("b",{children:"คำถามหลัก"}),rules:[{required:!0,message:"กรุณาระบุคำถามหลัก"}],className:"mb-3",children:e.jsx(J,{placeholder:"กรุณาเลือกคำถามหลัก...",children:i.map((I,t)=>ae===I.category_questId?e.jsx(J.Option,{value:I.id,children:I.quest_name},t):null)})}),e.jsx(l.Item,{name:"sub_quest_name",label:e.jsx("b",{children:"คำถามย่อย"}),rules:[{required:!0,message:"กรุณาระบุคำถามย่อย"}],className:"mb-3",children:e.jsx(bs,{rows:5})})]})}),e.jsx(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-yellow-400"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แก้ไขเกณฑ์ย่อย"})]}),open:V,onOk:te.submit,onCancel:W,width:450,style:{top:20},children:e.jsxs(l,{name:"formUpdate",form:te,layout:"vertical",onFinish:X,onFinishFailed:Q,className:"mt-2",autoComplete:"off",initialValues:{items:[{}]},children:[e.jsx(l.Item,{name:"category_questId",label:e.jsx("b",{children:"ชื่อด้านการประเมิน"}),rules:[{required:!0,message:"กรุณาระบุชื่อด้านการประเมิน"}],className:"mb-3",children:e.jsx(J,{placeholder:"กรุณาเลือกชื่อด้านการประเมิน...",onChange:I=>E(I),children:n.sort((I,t)=>I-t).map((I,t)=>e.jsx(J.Option,{value:I.id,children:I.category_name_th},t))})}),e.jsx(l.Item,{name:"questId",label:e.jsx("b",{children:"คำถามหลัก"}),rules:[{required:!0,message:"กรุณาระบุคำถามหลัก"}],className:"mb-3",children:e.jsx(J,{placeholder:"กรุณาเลือกคำถามหลัก...",children:i.map((I,t)=>f.category_questId===I.category_questId?e.jsx(J.Option,{value:I.id,children:I.quest_name},t):null)})}),e.jsx(l.Item,{name:"sub_quest_name",label:e.jsx("b",{children:"คำถามย่อย"}),rules:[{required:!0,message:"กรุณาระบุคำถามย่อย"}],className:"mb-3",children:e.jsx(bs,{rows:5})}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-full px-1",children:e.jsx(l.Item,{name:"sub_quest_total_point",label:e.jsx("b",{children:"คะแนนเต็ม"}),rules:[{required:!0,message:"กรุณาระบุคะแนนเต็ม"}],className:"mb-3",children:e.jsx(Le,{className:"w-full"})})}),e.jsx("div",{className:"w-full px-1",children:e.jsx(l.Item,{name:"sub_quest_require_point",label:e.jsx("b",{children:"คะแนนจำเป็น"}),rules:[{required:!0,message:"กรุณาระบุคะแนนเต็ม"}],className:"mb-3",children:e.jsx(Le,{className:"w-full"})})})]}),e.jsx(l.Item,{name:"description",label:e.jsx("b",{children:"คำชี้แจง/คำอธิบายเพิ่มเติม"}),className:"mb-3",children:e.jsx(bs,{})}),e.jsx(l.Item,{name:"necessary",label:e.jsx("b",{children:"จำเป็นต้องดำเนินการ"}),rules:[{required:!0,message:"กรุณาระบุว่าจำเป็นต้องดำเนินการหรือไม่?"}],className:"mb-3",children:e.jsxs(de.Group,{children:[e.jsx(de,{value:!0,children:"จำเป็น"}),e.jsx(de,{value:!1,children:"ไม่จำเป็น"})]})})]})})]})]})},La=()=>e.jsx("div",{children:e.jsx(za,{})}),Ea=()=>e.jsx("div",{children:"ReportCentre"}),{confirm:Aa}=he,Qa=()=>{const a=O(i=>i.logout),n=je(),x=()=>{Aa({title:"คุณต้องการออกจากระบบหรือไม่?",icon:e.jsx(ie,{}),content:"",onOk(){a(),n("/smarthosp-quest/")},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"bg-green-800 w-64 text-gray-100 flex flex-col h-screen",children:[e.jsx("div",{className:"h-24 bg-green-900 flex items-center justify-center gap-1",children:e.jsx("div",{children:e.jsx("img",{src:Ze})})}),e.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[e.jsxs(le,{to:"/smarthosp-quest/user/responder",end:!0,className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(De,{className:"mr-2"}),"Dashboard"]}),e.jsxs(le,{to:"evaluate-infrastructure",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Fe,{className:"mr-2"}),"ประเมินด้านโครงสร้าง"]}),e.jsxs(le,{to:"evaluate-management",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Fe,{className:"mr-2"}),"ประเมินด้านบริหารจัดการ"]}),e.jsxs(le,{to:"evaluate-service",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Fe,{className:"mr-2"}),"ประเมินด้านการบริการ"]}),e.jsxs(le,{to:"evaluate-people",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Fe,{className:"mr-2"}),"ประเมินด้านบุคลากร"]}),e.jsxs(le,{to:"report-hosp",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ls,{className:"mr-2"}),"รายงานผลการประเมิน"]}),e.jsxs(le,{to:"contact-us",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Re,{className:"mr-2"}),"ติดต่อเรา"]})]}),e.jsx("footer",{className:"px-4 py-4 space-y-2",children:e.jsxs(le,{onClick:x,className:"text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ke,{className:"mr-2"}),"Logout"]})})]})},Ua=()=>{const a=O(x=>x.token),n=O(x=>x.user);return e.jsx("header",{className:"relative bg-white h-16 flex items-center px-6",children:e.jsx("div",{className:"absolute right-5",children:e.jsx("div",{className:"flex items-center gap-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"bg-green-600",icon:e.jsx(Ye,{})}),e.jsxs("p",{children:[n.firstname_th+" "+n.lastname_th+" ["+n.hcode+"]"," [",n.objective==="responder"?"ผู้ประเมินโรงพยาบาลตนเอง":null,"]"]})]}):null})})})},Ma=()=>e.jsxs("div",{className:"flex h-screen",children:[e.jsx(Qa,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Ua,{}),e.jsx("main",{className:"flex-1 p-6 bg-gray-100 overflow-y-auto",children:e.jsx(He,{})})]})]}),Ba=()=>{const a=O(x=>x.token),n=O(x=>x.user);return e.jsx("header",{className:"relative bg-white h-16 flex items-center px-6",children:e.jsx("div",{className:"absolute right-5",children:e.jsx("div",{className:"flex items-center gap-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"bg-green-600",icon:e.jsx(Ye,{})}),e.jsxs("p",{children:[n.firstname_th+" "+n.lastname_th+" ["+n.hcode+"]"," [",n.objective==="prov_approve"?"คกก.รพ.อัจฉริยะ สสจ. Approve":null,"]"]})]}):null})})})},{confirm:Pa}=he,Da=()=>{const a=O(i=>i.logout),n=je(),x=()=>{Pa({title:"คุณต้องการออกจากระบบหรือไม่?",icon:e.jsx(ie,{}),content:"",onOk(){a(),n("/smarthosp-quest/")},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"bg-green-800 w-64 text-gray-100 flex flex-col h-screen",children:[e.jsx("div",{className:"h-24 bg-green-900 flex items-center justify-center gap-1",children:e.jsx("div",{children:e.jsx("img",{src:Ze})})}),e.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[e.jsxs(le,{to:"/smarthosp-quest/user/prov-approve",end:!0,className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(De,{className:"mr-2"}),"Dashboard"]}),e.jsxs(le,{to:"ssj-usermanagement",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(rs,{className:"mr-2"}),"จัดการ user รพ.ในจังหวัด"]}),e.jsxs(le,{to:"ssj-approve-infrastructure",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"Approve ด้านโครงสร้าง"]}),e.jsxs(le,{to:"ssj-approve-management",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"Approve ด้านบริหารจัดการ"]}),e.jsxs(le,{to:"ssj-approve-service",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"Approve ด้านการบริการ"]}),e.jsxs(le,{to:"ssj-approve-people",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"Approve ด้านบุคลากร"]}),e.jsxs(le,{to:"report-prov",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ls,{className:"mr-2"}),"รายงานผลการประเมิน"]}),e.jsxs(le,{to:"contact-us",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Re,{className:"mr-2"}),"ติดต่อเรา"]})]}),e.jsx("footer",{className:"px-4 py-4 space-y-2",children:e.jsxs(le,{onClick:x,className:"text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ke,{className:"mr-2"}),"Logout"]})})]})},Ra=()=>e.jsxs("div",{className:"flex h-screen",children:[e.jsx(Da,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Ba,{}),e.jsx("main",{className:"flex-1 p-6 bg-gray-100 overflow-y-auto",children:e.jsx(He,{})})]})]}),Ha=()=>{const a=O(x=>x.token),n=O(x=>x.user);return e.jsx("header",{className:"relative bg-white h-16 flex items-center px-6",children:e.jsx("div",{className:"absolute right-5",children:e.jsx("div",{className:"flex items-center gap-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"bg-green-600",icon:e.jsx(Ye,{})}),e.jsxs("p",{children:[n.firstname_th+" "+n.lastname_th+" ["+n.hcode+"]"," [",n.objective==="zone_approve"?"คกก.รพ.อัจฉริยะเขตฯ Approve":null,"]"]})]}):null})})})},{confirm:Oa}=he,Ta=()=>{const a=O(i=>i.logout),n=je(),x=()=>{Oa({title:"คุณต้องการออกจากระบบหรือไม่?",icon:e.jsx(ie,{}),content:"",onOk(){a(),n("/smarthosp-quest/")},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"bg-green-800 w-64 text-gray-100 flex flex-col h-screen",children:[e.jsx("div",{className:"h-24 bg-green-900 flex items-center justify-center gap-1",children:e.jsx("div",{children:e.jsx("img",{src:Ze})})}),e.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[e.jsxs(le,{to:"/smarthosp-quest/user/zone-approve",end:!0,className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(De,{className:"mr-2"}),"Dashboard"]}),e.jsxs(le,{to:"zone-usermanagement",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(rs,{className:"mr-2"}),"จัดการผู้ใช้งาน (จังหวัด)"]}),e.jsxs(le,{to:"zone-approve-infrastructure",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"Approve ด้านโครงสร้าง"]}),e.jsxs(le,{to:"zone-approve-management",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"Approve ด้านบริหารจัดการ"]}),e.jsxs(le,{to:"zone-approve-service",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"Approve ด้านการบริการ"]}),e.jsxs(le,{to:"zone-approve-people",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"Approve ด้านบุคลากร"]}),e.jsxs(le,{to:"report-zone",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ls,{className:"mr-2"}),"รายงานผลการประเมิน"]}),e.jsxs(le,{to:"contact-us",className:({isActive:i})=>i?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Re,{className:"mr-2"}),"ติดต่อเรา"]})]}),e.jsx("footer",{className:"px-4 py-4 space-y-2",children:e.jsxs(le,{onClick:x,className:"text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ke,{className:"mr-2"}),"Logout"]})})]})},Za=()=>e.jsxs("div",{className:"flex h-screen",children:[e.jsx(Ta,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Ha,{}),e.jsx("main",{className:"flex-1 p-6 bg-gray-100 overflow-y-auto",children:e.jsx(He,{})})]})]}),$a={onChange({file:a,fileList:n}){a.status!=="uploading"&&console.log(a,n)},showUploadList:{extra:({size:a=0})=>e.jsxs("span",{className:"text-slate-400",children:[" (",(a/1024/1024).toFixed(2),"MB)"]}),showRemoveIcon:!0}},Va=()=>{const a=je(),n=O(c=>c.user),x=O(c=>c.token),[i,w]=r.useState(!1),[S,_]=r.useState([]),[H,q]=r.useState([]),[V,m]=r.useState(!1),[F,A]=r.useState([]),[p,o]=r.useState("");r.useState({});const[f]=l.useForm(),[g]=l.useForm();r.useState();const[B,te]=r.useState(!1),[ae,E]=r.useState(!1),[D,K]=r.useState(),[N]=l.useForm();r.useEffect(()=>{z()},[]);const b=n.hcode,z=async()=>{await fe(x).then(c=>{_(c.data)}).catch(c=>{console.log(c.response.data.message)})},M=S.filter(c=>c.category_questId===1).map((c,k)=>({value:c.id,label:c.quest_name})),W=async c=>{w(!1),o(c),m(!0),await is(x,c).then(k=>{console.log("Data: ",k.data),q(k.data)}).catch(k=>{console.log(k)}).finally(()=>m(!1)),await xs(x,c,b).then(k=>{console.log("Eva: ",k.data),A(k.data)}).catch(k=>{console.log(k)})},re=[...new Set(H.map(c=>c.quests.quest_name))],Q=H.map((c,k)=>({...c,key:k})),T=async c=>{w(!0);const k=[];Q.forEach(s=>{k.push({sub_questId:s.id,category_questId:c["category_questId"+s.id],questId:c["questId"+s.id],check:c["check"+s.id],hcode:c["hcode"+s.id],userId:c["userId"+s.id]})}),console.log("Success:",k),await hs(x,k).then(s=>{G.success(s.data.message),setTimeout(()=>a("/smarthosp-quest/user/responder/evaluate-infrastructure"),5e3)}).catch(s=>{console.log(s.response.data.message),G.error(s.response.data.message)})},X=()=>{te(!0)},Y=()=>{te(!1),E(!1)},I=async c=>{const k=new FormData;k.append("file_name",c.file_name.file.originFileObj),k.append("category_questId",c.category_questId),k.append("hcode",c.hcode),k.append("usersId",c.usersId),await $.post("https://bdh-service.moph.go.th/api/smarthosp/saveDocuments",k,{headers:{Authorization:"Bearer "+x,"Content-Type":"multipart/form-data"}}).then(s=>{G.success(s.data.message),te(!1)}).catch(s=>{console.log(s.response.data),G.error(s.response.data.message)})},t=async c=>{const k=new FormData;k.append("file_name",c.file_name.file.originFileObj),k.append("category_questId",c.category_questId),k.append("questId",c.questId),k.append("sub_questId",c.sub_questId),k.append("hcode",c.hcode),k.append("usersId",c.usersId),await $.post("https://bdh-service.moph.go.th/api/smarthosp/saveEvidenceAll",k,{headers:{Authorization:"Bearer "+x,"Content-Type":"multipart/form-data"}}).then(s=>{G.success(s.data.message),E(!1)}).catch(s=>{console.log(s),G.error("ต้องเป็นไฟล์นามสกุล .png หรือ .jpg หรือ .pdf เท่านั้น!!")})},y=c=>{console.log("Fialed: ",c)};return r.useEffect(()=>{g.setFieldsValue({category_questId:"1",hcode:n.hcode,usersId:n.id})}),r.useEffect(()=>{D&&N.setFieldsValue({category_questId:D.category_questId,questId:D.questId,sub_questId:D.id,sub_quest_name:D.sub_quest_name,hcode:n.hcode,usersId:n.id})}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"ประเมินผลด้านโครงสร้าง (Infrastructure)"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกเกณฑ์การประเมิน : "}),e.jsx(J,{onChange:c=>W(c),options:M,placeholder:"กรุณาเลือกหัวข้อเพื่อประเมิน...",style:{width:"40%"}}),e.jsx("div",{children:e.jsxs(R,{onClick:X,children:[e.jsx(ve,{})," แนบเอกสาร/หลักฐานแบบรวมไฟล์ (PDF)"]})})]}),e.jsx(pe,{}),F.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center",children:e.jsxs(R,{onClick:()=>a("/smarthosp-quest/user/responder/report-hosp"),children:[e.jsx(cs,{})," ประเมินหัวข้อนี้แล้ว คลิกเพื่อตรวจสอบ"]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("div",{className:"my-2",children:e.jsx("p",{className:"text-lg ml-4 font-bold text-yellow-900",children:e.jsx("u",{children:re})})}),e.jsxs(l,{name:"formEvaluate",form:f,onFinish:T,children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"grid grid-cols-6 ml-10 bg-slate-100 text-md text-slate-950",children:[e.jsx("div",{className:"col-span-4 text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"รายการ"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนเต็ม"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนจำเป็น"})})]}),Q.map((c,k)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 ml-10",children:[e.jsxs("div",{className:"col-span-4 border",children:[e.jsx("p",{className:"p-2 font-bold",children:c.sub_quest_name}),e.jsx(l.Item,{name:"category_questId"+c.id,hidden:!0,initialValue:c.category_questId,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"questId"+c.id,hidden:!0,initialValue:c.questId,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"description"+c.id,initialValue:c.description,hidden:!0,children:e.jsx(j,{className:"border-none"})}),e.jsx(l.Item,{name:"check"+c.id,className:"ml-16 mt-1",children:e.jsx(de.Group,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx(de,{value:"true",className:"text-green-700",children:"มีการดำเนินการ"}),e.jsx(de,{value:"false",className:"text-red-700",children:"ไม่มีการดำเนินการ"})]})})})]},k),e.jsxs("div",{className:"text-center border",children:[e.jsx(l.Item,{name:"sub_quest_total_point"+c.id,rules:[{required:!0,message:"กรุณาระบุ"}],initialValue:c.sub_quest_total_point,hidden:!0,className:"mt-1",children:e.jsx(Le,{readOnly:!0})}),e.jsx("p",{className:"mt-6 font-bold",children:c.sub_quest_total_point})]}),e.jsxs("div",{className:"text-center border",children:[e.jsx(l.Item,{name:"sub_quest_require_point"+c.id,rules:[{required:!0,message:"กรุณาระบุ"}],initialValue:c.sub_quest_require_point,hidden:!0,className:"mt-1",children:e.jsx(Le,{readOnly:!0})}),e.jsx(l.Item,{name:"hcode"+c.id,hidden:!0,initialValue:n.hcode,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"userId"+c.id,hidden:!0,initialValue:n.id,children:e.jsx(j,{})}),e.jsx("p",{className:"mt-6 font-bold",children:c.sub_quest_require_point})]})]})}))]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:H.length>0?e.jsx(l.Item,{children:e.jsxs(R,{type:"primary",htmlType:"submit",style:{width:500},disabled:i,children:[e.jsx(we,{})," บันทึกผลการประเมิน"]})}):null})})]})]})}),e.jsxs(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:B,onOk:g.submit,onCancel:Y,width:450,style:{top:20},children:[e.jsx(pe,{}),e.jsxs(l,{name:"formUpload",form:g,layout:"vertical",onFinish:I,onFinishFailed:y,children:[e.jsx(l.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(J,{options:[{value:"1",label:"ด้านโครงสร้าง"}]})}),e.jsx(l.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(J,{options:[{value:n.hcode,label:n.hname_th}]})}),e.jsx(l.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(J,{options:[{value:n.id,label:n.firstname_th+" "+n.lastname_th}]})}),e.jsx(l.Item,{name:"file_name",label:e.jsx("b",{children:"แนบเอกสาร/หลักฐาน"}),children:e.jsx(qe,{customRequest:({onSuccess:c})=>c("ok"),...$a,children:e.jsxs(R,{children:[e.jsx(ve,{})," แนบไฟล์ .pdf ขนาดไม่เกิน 15 MB"]})})})]})]}),e.jsxs(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:ae,onOk:N.submit,onCancel:Y,width:450,style:{top:20},children:[e.jsx(pe,{}),e.jsxs(l,{name:"formUploadAllType",form:N,layout:"vertical",onFinish:t,onFinishFailed:y,children:[e.jsx(l.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(J,{options:[{value:D?D.category_questId:null,label:D?D.category_quests.category_name_th:null}]})}),e.jsx(l.Item,{name:"questId",label:e.jsx("b",{children:"เกณฑ์การประเมินหลัก"}),children:e.jsx(J,{options:[{value:D?D.questId:null,label:D?D.quests.quest_name:null}]})}),e.jsx(l.Item,{name:"sub_questId",hidden:!0,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"sub_quest_name",label:e.jsx("b",{children:"เกณฑ์การประเมินย่อย"}),children:e.jsx(j.TextArea,{rows:3,readOnly:!0})}),e.jsx(l.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(J,{options:[{value:n.hcode,label:n.hname_th}]})}),e.jsx(l.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(J,{options:[{value:n.id,label:n.firstname_th+" "+n.lastname_th}]})}),e.jsx(l.Item,{name:"file_name",label:e.jsx("b",{children:"อัปโหลดไฟล์/เอกสาร หลักฐาน"}),children:e.jsx(qe,{customRequest:({onSuccess:c})=>c("ok"),children:e.jsxs(R,{children:[e.jsx(ve,{})," อัปโหลดไฟล์นามสกุล (.jpg หรือ .png หรือ .pdf)"]})})})]})]})]})]})},Ga=()=>(ue("ประเมินผลด้านโครงสร้าง"),e.jsx("div",{children:e.jsx(Va,{})})),Ja={onChange({file:a,fileList:n}){a.status!=="uploading"&&console.log(a,n)},showUploadList:{extra:({size:a=0})=>e.jsxs("span",{className:"text-slate-400",children:[" (",(a/1024/1024).toFixed(2),"MB)"]}),showRemoveIcon:!0}},Ka=()=>{const a=je(),n=O(t=>t.user),x=O(t=>t.token),[i,w]=r.useState(!1),[S,_]=r.useState(!1),[H,q]=r.useState(!1),[V,m]=r.useState(!1),[F,A]=r.useState([]),[p,o]=r.useState([]),[f,g]=r.useState([]),[B]=l.useForm(),[te]=l.useForm(),[ae]=l.useForm(),[E,D]=r.useState();r.useEffect(()=>{K()},[]);const K=async()=>{await fe(x).then(t=>{A(t.data)}).catch(t=>{console.log(t)})},b=F.filter(t=>t.category_questId===2).map((t,y)=>({value:t.id,label:t.quest_name})),z=n.hcode,C=async t=>{_(!1),w(!0),console.log(t),await is(x,t).then(y=>{o(y.data)}).catch(y=>{console.log(y)}).finally(()=>w(!1)),await xs(x,t,z).then(y=>{console.log("Eva: ",y.data),g(y.data)}).catch(y=>{console.log(y)})},M=[...new Set(p.map(t=>t.quests.quest_name))],W=p.map((t,y)=>({...t,key:y})),re=async t=>{_(!0);const y=[];W.forEach(c=>{y.push({sub_questId:c.id,category_questId:t["category_questId"+c.id],questId:t["questId"+c.id],check:t["check"+c.id],hcode:t["hcode"+c.id],userId:t["userId"+c.id]})}),console.log("Success:",y),await hs(x,y).then(c=>{G.success(c.data.message),setTimeout(()=>a("/smarthosp-quest/user/responder/evaluate-management"),5e3)}).catch(c=>{console.log(c.response.data.message),G.error(c.response.data.message)})},Q=()=>[q(!0)],T=()=>{q(!1),m(!1)},X=async t=>{const y=new FormData;y.append("file_name",t.file_name.file.originFileObj),y.append("category_questId",t.category_questId),y.append("hcode",t.hcode),y.append("usersId",t.usersId),await $.post("https://bdh-service.moph.go.th/api/smarthosp/saveDocuments",y,{headers:{Authorization:"Bearer "+x,"Content-Type":"multipart/form-data"}}).then(c=>{G.success(c.data.message),q(!1)}).catch(c=>{console.log(c.response.data),G.error(c.response.data.message)})},Y=t=>{console.log("Fialed: ",t)};r.useEffect(()=>{te.setFieldsValue({category_questId:"2",hcode:n.hcode,usersId:n.id})}),r.useEffect(()=>{E&&ae.setFieldsValue({category_questId:E.category_questId,questId:E.questId,sub_questId:E.id,sub_quest_name:E.sub_quest_name,hcode:n.hcode,usersId:n.id})});const I=async t=>{const y=new FormData;y.append("file_name",t.file_name.file.originFileObj),y.append("category_questId",t.category_questId),y.append("questId",t.questId),y.append("sub_questId",t.sub_questId),y.append("hcode",t.hcode),y.append("usersId",t.usersId),await $.post("https://bdh-service.moph.go.th/api/smarthosp/saveEvidenceAll",y,{headers:{Authorization:"Bearer "+x,"Content-Type":"multipart/form-data"}}).then(c=>{G.success(c.data.message),m(!1)}).catch(c=>{console.log(c),G.error("ต้องเป็นไฟล์นามสกุล .png หรือ .jpg หรือ .pdf เท่านั้น!!")})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"ประเมินผลด้านบริหารจัดการ (Management)"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกเกณฑ์การประเมิน : "}),e.jsx(J,{onChange:t=>C(t),options:b,placeholder:"กรุณาเลือกหัวข้อเพื่อประเมิน...",style:{width:"40%"}}),e.jsx("div",{children:e.jsxs(R,{onClick:Q,children:[e.jsx(ve,{})," แนบเอกสาร/หลักฐานแบบรวมไฟล์ (PDF)"]})})]}),e.jsx(pe,{}),f.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center",children:e.jsxs(R,{onClick:()=>a("/smarthosp-quest/user/responder/report-hosp"),children:[e.jsx(cs,{})," ประเมินหัวข้อนี้แล้ว คลิกเพื่อตรวจสอบ"]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("div",{className:"my-2",children:e.jsx("p",{className:"text-lg ml-4 font-bold text-yellow-900",children:e.jsx("u",{children:M})})}),e.jsxs(l,{name:"formEvaluate",form:B,onFinish:re,children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"grid grid-cols-6 ml-10 bg-slate-100 text-md text-slate-950",children:[e.jsx("div",{className:"col-span-4 text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"รายการ"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนเต็ม"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนจำเป็น"})})]}),W.map((t,y)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 ml-10",children:[e.jsxs("div",{className:"col-span-4 border",children:[e.jsx("p",{className:"p-2 font-bold",children:t.sub_quest_name}),e.jsx(l.Item,{name:"category_questId"+t.id,hidden:!0,initialValue:t.category_questId,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"questId"+t.id,hidden:!0,initialValue:t.questId,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"description"+t.id,initialValue:t.description,hidden:!0,children:e.jsx(j,{className:"border-none"})}),t.id===76?e.jsx(l.Item,{name:"check"+t.id,className:"ml-16 mt-1",children:e.jsx(_e.Group,{style:{display:"inline-block"},children:t.sub_quest_lists.map((c,k)=>c.sub_questId===t.id?e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(_e,{value:c.choice}),e.jsx("p",{className:"text-green-700",children:c.sub_quest_listname})]},k)})}):null)})}):t.id===70||t.id===73||t.id===81||t.id===85||t.id===94||t.id===98||t.id===125||t.id===130?e.jsx(l.Item,{name:"check"+t.id,className:"ml-16 mt-1",children:e.jsx(de.Group,{children:e.jsx(ye,{direction:"vertical",children:t.sub_quest_lists.map((c,k)=>c.sub_questId===t.id?e.jsx(de,{className:"text-green-700",value:c.choice,children:c.sub_quest_listname}):null)})})}):e.jsx(l.Item,{name:"check"+t.id,className:"ml-16 mt-1",children:e.jsx(de.Group,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx(de,{value:"true",className:"text-green-700",children:"มีการดำเนินการ"}),e.jsx(de,{value:"false",className:"text-red-700",children:"ไม่มีการดำเนินการ"})]})})})]}),e.jsxs("div",{className:"text-center border",children:[e.jsx("p",{className:"font-bold mt-2",children:t.sub_quest_total_point}),e.jsx("div",{className:"mt-2",children:t.id===70||t.id===73||t.id===76||t.id===81||t.id===85||t.id===94||t.id===98||t.id===125||t.id===130?e.jsx(e.Fragment,{children:t.sub_quest_lists.map(c=>c.sub_questId===t.id?e.jsx("p",{className:"text-green-700",children:c.sub_quest_total_point}):e.jsx(e.Fragment,{}))}):e.jsx(e.Fragment,{})})]}),e.jsxs("div",{className:"text-center border",children:[e.jsx(l.Item,{name:"hcode"+t.id,hidden:!0,initialValue:n.hcode,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"userId"+t.id,hidden:!0,initialValue:n.id,children:e.jsx(j,{})}),e.jsx("p",{className:"font-bold mt-2",children:t.sub_quest_require_point}),e.jsx("div",{className:"mt-2",children:t.id===70||t.id===73||t.id===76||t.id===81||t.id===85||t.id===94||t.id===98||t.id===125||t.id===130?e.jsx(e.Fragment,{children:t.sub_quest_lists.map(c=>c.sub_questId===t.id?e.jsx("p",{className:"text-green-700",children:c.sub_quest_require_point}):e.jsx(e.Fragment,{}))}):e.jsx(e.Fragment,{})})]})]})}))]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:p.length>0?e.jsx(l.Item,{children:e.jsxs(R,{type:"primary",htmlType:"submit",style:{width:500},disabled:S,children:[e.jsx(we,{})," บันทึกผลการประเมิน"]})}):null})})]})]})}),e.jsxs(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:H,onOk:te.submit,onCancel:T,width:450,style:{top:20},children:[e.jsx(pe,{}),e.jsxs(l,{name:"formUpload",form:te,layout:"vertical",onFinish:X,onFinishFailed:Y,children:[e.jsx(l.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(J,{options:[{value:"2",label:"ด้านบริหารจัดการ"}]})}),e.jsx(l.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(J,{options:[{value:n.hcode,label:n.hname_th}]})}),e.jsx(l.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(J,{options:[{value:n.id,label:n.firstname_th+" "+n.lastname_th}]})}),e.jsx(l.Item,{name:"file_name",label:e.jsx("b",{children:"แนบเอกสาร/หลักฐาน"}),children:e.jsx(qe,{customRequest:({onSuccess:t})=>t("ok"),...Ja,children:e.jsxs(R,{children:[e.jsx(ve,{})," แนบไฟล์ .pdf ขนาดไม่เกิน 15 MB"]})})})]})]}),e.jsxs(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:V,onOk:ae.submit,onCancel:T,width:450,style:{top:20},children:[e.jsx(pe,{}),e.jsxs(l,{name:"formUploadItem",form:ae,layout:"vertical",onFinish:I,onFinishFailed:Y,children:[e.jsx(l.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(J,{options:[{value:E?E.category_questId:null,label:E?E.category_quests.category_name_th:null}]})}),e.jsx(l.Item,{name:"questId",label:e.jsx("b",{children:"เกณฑ์การประเมินหลัก"}),children:e.jsx(J,{options:[{value:E?E.questId:null,label:E?E.quests.quest_name:null}]})}),e.jsx(l.Item,{name:"sub_questId",hidden:!0,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"sub_quest_name",label:e.jsx("b",{children:"เกณฑ์การประเมินย่อย"}),children:e.jsx(j.TextArea,{rows:3,readOnly:!0})}),e.jsx(l.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(J,{options:[{value:n.hcode,label:n.hname_th}]})}),e.jsx(l.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(J,{options:[{value:n.id,label:n.firstname_th+" "+n.lastname_th}]})}),e.jsx(l.Item,{name:"file_name",label:e.jsx("b",{children:"อัปโหลดไฟล์/เอกสาร หลักฐาน"}),children:e.jsx(qe,{customRequest:({onSuccess:t})=>t("ok"),children:e.jsxs(R,{children:[e.jsx(ve,{})," อัปโหลดไฟล์นามสกุล (.jpg หรือ .png หรือ .pdf)"]})})})]})]})]})]})},Ya=()=>(ue("ประเมินด้านบริหารจัดการ"),e.jsx("div",{children:e.jsx(Ka,{})})),Wa={onChange({file:a,fileList:n}){a.status!=="uploading"&&console.log(a,n)},showUploadList:{extra:({size:a=0})=>e.jsxs("span",{className:"text-slate-400",children:[" (",(a/1024/1024).toFixed(2),"MB)"]}),showRemoveIcon:!0}},Xa=()=>{const a=je(),n=O(c=>c.user),x=O(c=>c.token),[i,w]=r.useState(!1),[S,_]=r.useState(!1),[H,q]=r.useState(!1),[V,m]=r.useState(!1),[F,A]=r.useState([]),[p,o]=r.useState([]),[f,g]=r.useState([]),[B,te]=r.useState(),[ae]=l.useForm(),[E]=l.useForm(),[D]=l.useForm(),[K,N]=r.useState("");console.log("Val : ",Number(K.substring(1,5)));const b=n.hcode;r.useEffect(()=>{z()},[]);const z=async()=>{await fe(x).then(c=>{A(c.data)}).catch(c=>{console.log(c)})},M=F.filter(c=>c.category_questId===3).map((c,k)=>({value:c.id,label:c.quest_name.substring(0,90)})),W=async c=>{_(!1),w(!0),console.log(c),await is(x,c).then(k=>{console.log("Data: ",k.data),o(k.data)}).catch(k=>{console.log(k)}).finally(()=>w(!1)),await xs(x,c,b).then(k=>{console.log("Eva: ",k.data),g(k.data)}).catch(k=>{console.log(k)})},re=[...new Set(p.map(c=>c.quests.quest_name))],Q=p.map((c,k)=>({...c,key:k})),T=async c=>{_(!0);const k=[];Q.forEach(s=>{k.push({sub_questId:s.id,category_questId:c["category_questId"+s.id],questId:c["questId"+s.id],check:c["check"+s.id],hcode:c["hcode"+s.id],userId:c["userId"+s.id]})}),console.log("Success:",k),await hs(x,k).then(s=>{G.success(s.data.message),setTimeout(()=>a("/smarthosp-quest/user/responder/evaluate-service"),5e3)}).catch(s=>{console.log(s.response.data.message),G.error(s.response.data.message)})},X=()=>[q(!0)],Y=()=>{q(!1),m(!1)},I=async c=>{const k=new FormData;k.append("file_name",c.file_name.file.originFileObj),k.append("category_questId",c.category_questId),k.append("hcode",c.hcode),k.append("usersId",c.usersId),await $.post("https://bdh-service.moph.go.th/api/smarthosp/saveDocuments",k,{headers:{Authorization:"Bearer "+x,"Content-Type":"multipart/form-data"}}).then(s=>{G.success(s.data.message),q(!1)}).catch(s=>{console.log(s.response.data),G.error(s.response.data.message)})},t=c=>{console.log("Fialed: ",c)};r.useEffect(()=>{E.setFieldsValue({category_questId:"3",hcode:n.hcode,usersId:n.id})}),r.useEffect(()=>{B&&D.setFieldsValue({category_questId:B.category_questId,questId:B.questId,sub_questId:B.id,sub_quest_name:B.sub_quest_name,hcode:n.hcode,usersId:n.id})});const y=async c=>{const k=new FormData;k.append("file_name",c.file_name.file.originFileObj),k.append("category_questId",c.category_questId),k.append("questId",c.questId),k.append("sub_questId",c.sub_questId),k.append("hcode",c.hcode),k.append("usersId",c.usersId),await $.post("https://bdh-service.moph.go.th/api/smarthosp/saveEvidenceAll",k,{headers:{Authorization:"Bearer "+x,"Content-Type":"multipart/form-data"}}).then(s=>{G.success(s.data.message),m(!1)}).catch(s=>{console.log(s),G.error("ต้องเป็นไฟล์นามสกุล .png หรือ .jpg หรือ .pdf เท่านั้น!!")})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"ประเมินผลด้านการบริการ (Service)"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกเกณฑ์การประเมิน : "}),e.jsx(J,{onChange:c=>W(c),options:M,placeholder:"กรุณาเลือกหัวข้อเพื่อประเมิน...",style:{width:"40%"}}),e.jsx("div",{children:e.jsxs(R,{onClick:X,children:[e.jsx(ve,{})," แนบเอกสาร/หลักฐานแบบรวมไฟล์ (PDF)"]})})]}),e.jsx(pe,{}),f.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center",children:e.jsxs(R,{onClick:()=>a("/smarthosp-quest/user/responder/report-hosp"),children:[e.jsx(cs,{})," ประเมินหัวข้อนี้แล้ว คลิกเพื่อตรวจสอบ"]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("div",{className:"my-2 max-w-screen-xl",children:e.jsx("p",{className:"text-lg ml-4 font-bold text-yellow-900",children:e.jsx("u",{children:re})})}),e.jsxs(l,{name:"formEvaluate",form:ae,onFinish:T,children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"grid grid-cols-6 ml-10 bg-slate-100 text-md text-slate-950",children:[e.jsx("div",{className:"col-span-4 text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"รายการ"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนเต็ม"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนจำเป็น"})})]}),Q.map((c,k)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 ml-10",children:[e.jsxs("div",{className:"col-span-4 border",children:[e.jsx("p",{className:"p-2 font-bold",children:c.sub_quest_name}),e.jsx(l.Item,{name:"category_questId"+c.id,hidden:!0,initialValue:c.category_questId,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"questId"+c.id,hidden:!0,initialValue:c.questId,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"description"+c.id,initialValue:c.description,hidden:!0,children:e.jsx(j,{className:"border-none"})}),c.id===145||c.id===150||c.id===157||c.id===179||c.id===189||c.id===192||c.id===195?e.jsxs(e.Fragment,{children:[e.jsx(l.Item,{name:"sub_quest_listId"+c.id,initialValue:1,hidden:!0,children:e.jsx(j,{className:"border-none"})}),e.jsx(l.Item,{name:"check"+c.id,className:"ml-16 mt-1",children:e.jsx(de.Group,{onChange:s=>N(s.target.value),children:e.jsx(ye,{direction:"vertical",children:c.sub_quest_lists.map((s,U)=>s.sub_questId===c.id?e.jsx(de,{className:"text-green-700",value:"C"+s.id,children:s.sub_quest_listname}):null)})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(l.Item,{name:"sub_quest_listId"+c.id,hidden:!0,children:e.jsx(j,{className:"border-none"})}),e.jsx(l.Item,{name:"check"+c.id,className:"ml-16 mt-1",children:e.jsx(de.Group,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx(de,{value:"true",className:"text-green-700",children:"มีการดำเนินการ"}),e.jsx(de,{value:"false",className:"text-red-700",children:"ไม่มีการดำเนินการ"})]})})})]})]}),e.jsxs("div",{className:"text-center border",children:[e.jsx(l.Item,{name:"sub_quest_total_point"+c.id,rules:[{required:!0,message:"กรุณาระบุ"}],initialValue:c.sub_quest_total_point,hidden:!0,className:"mt-1",children:e.jsx(Le,{readOnly:!0})}),e.jsx("p",{className:"mt-6 font-bold",children:c.sub_quest_total_point}),e.jsx("div",{className:"mt-2",children:c.id===145||c.id===150||c.id===157||c.id===179||c.id===189||c.id===192||c.id===195?e.jsx(e.Fragment,{children:c.sub_quest_lists.map(s=>s.sub_questId===c.id?e.jsx("p",{className:"text-green-700",children:s.sub_quest_total_point}):e.jsx(e.Fragment,{}))}):e.jsx(e.Fragment,{})})]}),e.jsxs("div",{className:"text-center border",children:[e.jsx(l.Item,{name:"sub_quest_require_point"+c.id,rules:[{required:!0,message:"กรุณาระบุ"}],initialValue:c.sub_quest_require_point,hidden:!0,className:"mt-1",children:e.jsx(Le,{readOnly:!0})}),e.jsx(l.Item,{name:"hcode"+c.id,hidden:!0,initialValue:n.hcode,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"userId"+c.id,hidden:!0,initialValue:n.id,children:e.jsx(j,{})}),e.jsx("p",{className:"mt-6 font-bold",children:c.sub_quest_require_point}),e.jsx("div",{className:"mt-2",children:c.id===145||c.id===150||c.id===157||c.id===179||c.id===189||c.id===192||c.id===195?e.jsx(e.Fragment,{children:c.sub_quest_lists.map(s=>s.sub_questId===c.id?e.jsx("p",{className:"text-green-700",children:s.sub_quest_require_point}):e.jsx(e.Fragment,{}))}):e.jsx(e.Fragment,{})})]})]})}))]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:p.length>0?e.jsx(l.Item,{children:e.jsxs(R,{type:"primary",htmlType:"submit",style:{width:500},disabled:S,children:[e.jsx(we,{})," บันทึกผลการประเมิน"]})}):null})})]})]})}),e.jsxs(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:H,onOk:E.submit,onCancel:Y,width:450,style:{top:20},children:[e.jsx(pe,{}),e.jsxs(l,{name:"formUpload",form:E,layout:"vertical",onFinish:I,onFinishFailed:t,children:[e.jsx(l.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(J,{options:[{value:"3",label:"ด้านการบริการ"}]})}),e.jsx(l.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(J,{options:[{value:n.hcode,label:n.hname_th}]})}),e.jsx(l.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(J,{options:[{value:n.id,label:n.firstname_th+" "+n.lastname_th}]})}),e.jsx(l.Item,{name:"file_name",label:e.jsx("b",{children:"แนบเอกสาร/หลักฐาน"}),children:e.jsx(qe,{customRequest:({onSuccess:c})=>c("ok"),...Wa,children:e.jsxs(R,{children:[e.jsx(ve,{})," แนบไฟล์ .pdf ขนาดไม่เกิน 15 MB"]})})})]})]}),e.jsxs(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:V,onOk:D.submit,onCancel:Y,width:450,style:{top:20},children:[e.jsx(pe,{}),e.jsxs(l,{name:"formUploadItem",form:D,layout:"vertical",onFinish:y,onFinishFailed:t,children:[e.jsx(l.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(J,{options:[{value:B?B.category_questId:null,label:B?B.category_quests.category_name_th:null}]})}),e.jsx(l.Item,{name:"questId",label:e.jsx("b",{children:"เกณฑ์การประเมินหลัก"}),children:e.jsx(J,{options:[{value:B?B.questId:null,label:B?B.quests.quest_name:null}]})}),e.jsx(l.Item,{name:"sub_questId",hidden:!0,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"sub_quest_name",label:e.jsx("b",{children:"เกณฑ์การประเมินย่อย"}),children:e.jsx(j.TextArea,{rows:3,readOnly:!0})}),e.jsx(l.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(J,{options:[{value:n.hcode,label:n.hname_th}]})}),e.jsx(l.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(J,{options:[{value:n.id,label:n.firstname_th+" "+n.lastname_th}]})}),e.jsx(l.Item,{name:"file_name",label:e.jsx("b",{children:"อัปโหลดไฟล์/เอกสาร หลักฐาน"}),children:e.jsx(qe,{customRequest:({onSuccess:c})=>c("ok"),children:e.jsxs(R,{children:[e.jsx(ve,{})," อัปโหลดไฟล์นามสกุล (.jpg หรือ .png หรือ .pdf)"]})})})]})]})]})]})},en=()=>e.jsx("div",{children:e.jsx(Xa,{})}),sn={onChange({file:a,fileList:n}){a.status!=="uploading"&&console.log(a,n)},showUploadList:{extra:({size:a=0})=>e.jsxs("span",{className:"text-slate-400",children:[" (",(a/1024/1024).toFixed(2),"MB)"]}),showRemoveIcon:!0}},tn=()=>{const a=je(),n=O(t=>t.user),x=O(t=>t.token),[i,w]=r.useState(!1),[S,_]=r.useState(!1),[H,q]=r.useState(!1),[V,m]=r.useState(!1),[F,A]=r.useState([]),[p,o]=r.useState([]),[f,g]=r.useState([]),[B,te]=r.useState(),[ae]=l.useForm(),[E]=l.useForm(),[D]=l.useForm(),K=n.hcode;r.useEffect(()=>{N()},[]);const N=async()=>{await fe(x).then(t=>{A(t.data)}).catch(t=>{console.log(t)})},z=F.filter(t=>t.category_questId===4).map((t,y)=>({value:t.id,label:t.quest_name})),C=async t=>{_(!1),w(!0),console.log(t),await is(x,t).then(y=>{o(y.data)}).catch(y=>{console.log(y)}).finally(()=>w(!1)),await xs(x,t,K).then(y=>{console.log("Eva: ",y.data),g(y.data)}).catch(y=>{console.log(y)})},M=[...new Set(p.map(t=>t.quests.quest_name))],W=p.map((t,y)=>({...t,key:y})),re=async t=>{_(!0);const y=[];W.forEach(c=>{y.push({sub_questId:c.id,category_questId:t["category_questId"+c.id],questId:t["questId"+c.id],check:t["check"+c.id],hcode:t["hcode"+c.id],userId:t["userId"+c.id]})}),console.log("Success:",y),await hs(x,y).then(c=>{G.success(c.data.message),setTimeout(()=>a("/smarthosp-quest/user/responder/evaluate-people"),5e3)}).catch(c=>{console.log(c.response.data.message),G.error(c.response.data.message)})},Q=()=>[q(!0)],T=()=>{q(!1),m(!1)},X=async t=>{const y=new FormData;y.append("file_name",t.file_name.file.originFileObj),y.append("category_questId",t.category_questId),y.append("hcode",t.hcode),y.append("usersId",t.usersId),await $.post("https://bdh-service.moph.go.th/api/smarthosp/saveDocuments",y,{headers:{Authorization:"Bearer "+x,"Content-Type":"multipart/form-data"}}).then(c=>{G.success(c.data.message),q(!1)}).catch(c=>{console.log(c.response.data),G.error(c.response.data.message)})},Y=t=>{console.log("Fialed: ",t)};r.useEffect(()=>{E.setFieldsValue({category_questId:"4",hcode:n.hcode,usersId:n.id})}),r.useEffect(()=>{B&&D.setFieldsValue({category_questId:B.category_questId,questId:B.questId,sub_questId:B.id,sub_quest_name:B.sub_quest_name,hcode:n.hcode,usersId:n.id})});const I=async t=>{const y=new FormData;y.append("file_name",t.file_name.file.originFileObj),y.append("category_questId",t.category_questId),y.append("questId",t.questId),y.append("sub_questId",t.sub_questId),y.append("hcode",t.hcode),y.append("usersId",t.usersId),await $.post("https://bdh-service.moph.go.th/api/smarthosp/saveEvidenceAll",y,{headers:{Authorization:"Bearer "+x,"Content-Type":"multipart/form-data"}}).then(c=>{G.success(c.data.message),m(!1)}).catch(c=>{console.log(c),G.error("ต้องเป็นไฟล์นามสกุล .png หรือ .jpg หรือ .pdf เท่านั้น!!")})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"ประเมินผลด้านบุคลากร (People)"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกเกณฑ์การประเมิน : "}),e.jsx(J,{onChange:t=>C(t),options:z,placeholder:"กรุณาเลือกหัวข้อเพื่อประเมิน...",style:{width:"40%"}}),e.jsx("div",{children:e.jsxs(R,{onClick:Q,children:[e.jsx(ve,{})," แนบเอกสาร/หลักฐานแบบรวมไฟล์ (PDF)"]})})]}),e.jsx(pe,{}),f.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center",children:e.jsxs(R,{onClick:()=>a("/smarthosp-quest/user/responder/report-hosp"),children:[e.jsx(cs,{})," ประเมินหัวข้อนี้แล้ว คลิกเพื่อตรวจสอบ"]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("div",{className:"my-2",children:e.jsx("p",{className:"text-lg ml-4 font-bold text-yellow-900",children:e.jsx("u",{children:M})})}),e.jsxs(l,{name:"formEvaluate",form:ae,onFinish:re,children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"grid grid-cols-6 ml-10 bg-slate-100 text-md text-slate-950",children:[e.jsx("div",{className:"col-span-4 text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"รายการ"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนเต็ม"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนจำเป็น"})})]}),W.map((t,y)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 ml-10",children:[e.jsxs("div",{className:"col-span-4 border",children:[e.jsx("p",{className:"p-2 font-bold",children:t.sub_quest_name}),e.jsx(l.Item,{name:"category_questId"+t.id,hidden:!0,initialValue:t.category_questId,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"questId"+t.id,hidden:!0,initialValue:t.questId,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"description"+t.id,initialValue:t.description,hidden:!0,children:e.jsx(j,{className:"border-none"})}),e.jsx(l.Item,{name:"check"+t.id,className:"ml-16 mt-1",children:e.jsx(de.Group,{children:e.jsxs(ye,{direction:"vertical",children:[e.jsx(de,{value:"true",className:"text-green-700",children:"มีการดำเนินการ"}),e.jsx(de,{value:"false",className:"text-red-700",children:"ไม่มีการดำเนินการ"})]})})})]}),e.jsxs("div",{className:"text-center border",children:[e.jsx(l.Item,{name:"sub_quest_total_point"+t.id,rules:[{required:!0,message:"กรุณาระบุ"}],initialValue:t.sub_quest_total_point,hidden:!0,className:"mt-1",children:e.jsx(Le,{readOnly:!0})}),e.jsx("p",{className:"mt-6 font-bold",children:t.sub_quest_total_point})]}),e.jsxs("div",{className:"text-center border",children:[e.jsx(l.Item,{name:"sub_quest_require_point"+t.id,rules:[{required:!0,message:"กรุณาระบุ"}],initialValue:t.sub_quest_require_point,hidden:!0,className:"mt-1",children:e.jsx(Le,{readOnly:!0})}),e.jsx(l.Item,{name:"hcode"+t.id,hidden:!0,initialValue:n.hcode,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"userId"+t.id,hidden:!0,initialValue:n.id,children:e.jsx(j,{})}),e.jsx("p",{className:"mt-6 font-bold",children:t.sub_quest_require_point})]})]})}))]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:p.length>0?e.jsx(l.Item,{children:e.jsxs(R,{type:"primary",htmlType:"submit",style:{width:500},disabled:S,children:[e.jsx(we,{})," บันทึกผลการประเมิน"]})}):null})})]})]})}),e.jsxs(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:H,onOk:E.submit,onCancel:T,width:450,style:{top:20},children:[e.jsx(pe,{}),e.jsxs(l,{name:"formUpload",form:E,layout:"vertical",onFinish:X,onFinishFailed:Y,children:[e.jsx(l.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(J,{options:[{value:"4",label:"ด้านบุคลากร"}]})}),e.jsx(l.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(J,{options:[{value:n.hcode,label:n.hname_th}]})}),e.jsx(l.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(J,{options:[{value:n.id,label:n.firstname_th+" "+n.lastname_th}]})}),e.jsx(l.Item,{name:"file_name",label:e.jsx("b",{children:"แนบเอกสาร/หลักฐาน"}),children:e.jsx(qe,{customRequest:({onSuccess:t})=>t("ok"),...sn,children:e.jsxs(R,{children:[e.jsx(ve,{})," แนบไฟล์ .pdf ขนาดไม่เกิน 15 MB"]})})})]})]}),e.jsxs(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:V,onOk:D.submit,onCancel:T,width:450,style:{top:20},children:[e.jsx(pe,{}),e.jsxs(l,{name:"formUploadItem",form:D,layout:"vertical",onFinish:I,onFinishFailed:Y,children:[e.jsx(l.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(J,{options:[{value:B?B.category_questId:null,label:B?B.category_quests.category_name_th:null}]})}),e.jsx(l.Item,{name:"questId",label:e.jsx("b",{children:"เกณฑ์การประเมินหลัก"}),children:e.jsx(J,{options:[{value:B?B.questId:null,label:B?B.quests.quest_name:null}]})}),e.jsx(l.Item,{name:"sub_questId",hidden:!0,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"sub_quest_name",label:e.jsx("b",{children:"เกณฑ์การประเมินย่อย"}),children:e.jsx(j.TextArea,{rows:3,readOnly:!0})}),e.jsx(l.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(J,{options:[{value:n.hcode,label:n.hname_th}]})}),e.jsx(l.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(J,{options:[{value:n.id,label:n.firstname_th+" "+n.lastname_th}]})}),e.jsx(l.Item,{name:"file_name",label:e.jsx("b",{children:"อัปโหลดไฟล์/เอกสาร หลักฐาน"}),children:e.jsx(qe,{customRequest:({onSuccess:t})=>t("ok"),children:e.jsxs(R,{children:[e.jsx(ve,{})," อัปโหลดไฟล์นามสกุล (.jpg หรือ .png หรือ .pdf)"]})})})]})]})]})]})},an=()=>e.jsx("div",{children:e.jsx(tn,{})}),nn=a=>{const[n,x]=r.useState(),[i,w]=r.useState(1);function S({numPages:_}){x(_)}return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center bg-slate-200 p-5 mt-5 items-center",children:e.jsx(xt,{file:a.pdfFile,onLoadSuccess:S,children:Array.apply(null,Array(n)).map((_,H)=>H+1).map(_=>e.jsx(ut,{pageNumber:_,renderTextLayer:!1,renderAnnotationLayer:!1}))})}),e.jsxs("p",{children:["Page ",i," of ",n]})]})},{confirm:ln}=he;mt.workerSrc=`//unpkg.com/pdfjs-dist@${pt}/build/pdf.worker.min.mjs`;const rn={onChange({file:a,fileList:n}){a.status!=="uploading"&&console.log(a,n)},showUploadList:{extra:({size:a=0})=>e.jsxs("span",{className:"text-slate-400",children:[" (",(a/1024/1024).toFixed(2),"MB)"]}),showRemoveIcon:!0}},cn=()=>{var Z,ne,me,Se,be;const a=O(L=>L.user),n=O(L=>L.token),[x,i]=r.useState([]),[w,S]=r.useState([]),[_,H]=r.useState([]),[q,V]=r.useState({}),[m,F]=r.useState([]),[A,p]=r.useState([]),[o,f]=r.useState(!1),[g,B]=r.useState(!1),[te,ae]=r.useState(!1),[E,D]=r.useState(!1),[K]=l.useForm(),[N]=l.useForm(),[b,z]=r.useState("");r.useState(),r.useState();const[C,M]=r.useState([]),[W,re]=r.useState(null);r.useState(),r.useState(1),r.useEffect(()=>{T(),Y(),Q(),t()},[]),r.useEffect(()=>{let L=setTimeout(()=>{k()},2e3);return()=>{clearTimeout(L)}},[]);const Q=async()=>{await Ie(n).then(L=>{M(L.data)}).catch(L=>{console.log(L)})},T=async()=>{await ps(n).then(L=>{i(L.data)}).catch(L=>{console.log(L)})},X=x.map(L=>({value:L.id,label:L.category_name_th,key:L.id})),Y=async()=>{await fe(n).then(L=>{S(L.data)}).catch(L=>{console.log(L)})},I=a.hcode,t=async()=>{f(!0),await Ds(n,I).then(L=>{H(L.data)}).catch(L=>{console.log(L)}).finally(()=>f(!1))},y=L=>{z(L),F(_.filter(oe=>oe.category_questId===L)),p(w.filter(oe=>oe.category_questId===L))},c=async L=>{console.log("Value: ",L),ae(!0),await gs(n,L.id).then(oe=>{V(oe.data)}).catch(oe=>{console.log(oe)})},k=()=>{F(_.filter(L=>L.category_questId===b))};r.useEffect(()=>{N.setFieldsValue({evaluateId:q.id,file_name:[]})});const s=async L=>{console.log(L),B(!0),await gs(n,L).then(oe=>{console.log("GetById: ",oe.data),V(oe.data)}).catch(oe=>{console.log(oe)})};r.useEffect(()=>{K.setFieldsValue({id:q.id,category_questId:q.category_questId,questId:q.questId,sub_questId:q.sub_questId,check:q.check,hcode:q.hcode,userId:q.userId})});const U=async L=>{const oe={...L,id:q.id};console.log("Values: ",oe),await Nt(n,oe).then(xe=>{G.success(xe.data.message),B(!1),t()}).catch(xe=>{console.log(xe.response.data.message),G.error(xe.response.data.message)})},v=async L=>{const oe=new FormData;oe.append("file_name",L.file_name.file.originFileObj),await wt(n,q.id,oe).then(xe=>{G.success(xe.data.message),ae(!1),t(),N.resetFields()}).catch(xe=>{console.log(xe.response.data),G.error(xe.response.data.message)})},ee=L=>{console.log("Failed: ",L)},ce=()=>{B(!1),ae(!1),D(!1)},d=L=>{console.log(L),Ae(n,L,I).then(oe=>{oe.data?window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${oe.data.file_name}`,"_blank","noreferrer"):G.warning("ไม่พบข้อมูล!")}).catch(oe=>{console.log(oe)})},P=async L=>{D(!0),await gs(n,L).then(oe=>{console.log("GetById: ",oe.data),V(oe.data),re(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${oe.data.file_name}`)}).catch(oe=>{console.log(oe)})},h=m.map(L=>({id:L.id,category_questId:L.category_questId,questId:L.questId,sub_questId:L.sub_questId,sub_quest_name:L.sub_quests.sub_quest_name,check:L.check.split(","),hcode:L.hcode,userId:L.userId,file_name:L.file_name,ssj_approve:L.ssj_approve,zone_approve:L.zone_approve,createdAt:L.createdAt,updatedAt:L.updatedAt})),se=C.map(L=>({id:L.id,sub_questId:L.sub_questId,choice:L.choice,sub_quest_listname:L.sub_quest_listname,sub_quest_total_point:L.sub_quest_total_point,sub_quest_require_point:L.sub_quest_require_point,description:L.description,necessary:L.necessary,createdAt:L.createdAt,updatedAt:L.updatedAt})),u=L=>{console.log(L),ln({title:"ต้องการลบไฟล์หลักฐานนี้หรือไม่?",icon:e.jsx(ie,{}),okText:"ใช่",okType:"danger",cancelText:"ไม่",onOk(){It(n,L).then(oe=>{G.error(oe.data.message),D(!1),t()}).catch(oe=>{console.log(oe)})},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:[e.jsx(ls,{})," ",e.jsx("p",{className:"ml-2",children:" รายงานผลการประเมินโรงพยาบาลอัจฉริยะ ประจำปีงบประมาณ 2568"})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-1",children:[e.jsx("p",{className:"font-bold",children:"ด้านการประเมิน : "}),e.jsx(J,{onChange:L=>y(L),options:X,placeholder:"กรุณาเลือกด้านการประเมินที่ต้องการ...",style:{width:"20%"}}),m.length>0?e.jsx(e.Fragment,{children:e.jsxs(R,{onClick:()=>d(b),children:[e.jsx(Qe,{})," ดูหลักฐานไฟล์รวม"]})}):null,e.jsxs(R,{onClick:k,children:[e.jsx(st,{size:13})," รีเฟรช"]})]}),e.jsx(pe,{}),e.jsxs("div",{children:[o?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(ns,{className:"w-16 h-16 text-blue-400 animate-spin"})})}):e.jsx(e.Fragment,{children:e.jsxs("table",{className:"text-left table-fixed w-full min-w-screen text-slate-800",children:[e.jsx("thead",{className:"",children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",style:{fontSize:"15px"},children:[e.jsx("th",{className:"text-center p-4 border-r",style:{width:500},children:"เกณฑ์การประเมิน"}),e.jsx("th",{className:"text-center p-4 border-r",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-center p-4 border-r",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r",children:"ภาพหลักฐาน"}),e.jsx("th",{className:"text-center p-4 border-r",children:"แก้ไข"})]})}),e.jsx("tbody",{children:A.map((L,oe)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border",children:e.jsx("td",{className:"p-1 text-amber-950 font-bold",colSpan:5,children:L.quest_name})},oe),h.map((xe,Gs)=>{var Ss,Fs,Cs;return L.id===xe.questId?e.jsxs("tr",{className:"border",children:[e.jsxs("td",{className:"pl-5 pr-1 py-1 border-r w-screen",style:{fontSize:"15px"},children:[e.jsx("p",{className:"font-bold",children:xe.sub_quest_name}),(Ss=xe.check)==null?void 0:Ss.map(Ve=>se.map(Ne=>Ne.sub_questId===xe.sub_questId&&Ne.choice===Ve?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(_e,{checked:!0}),e.jsx("p",{className:Ne.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:Ne.sub_quest_listname})]}):null))]}),e.jsx("td",{className:"text-center border-r",children:(Fs=xe.check)==null?void 0:Fs.map(Ve=>se.map(Ne=>Ne.sub_questId===xe.sub_questId&&Ne.choice===Ve?e.jsx("div",{children:e.jsx("p",{className:"font-bold",children:Ne.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-r",style:{fontSize:"15px"},children:(Cs=xe.check)==null?void 0:Cs.map(Ve=>se.map(Ne=>Ne.sub_questId===xe.sub_questId&&Ne.choice===Ve?e.jsx("div",{children:e.jsx("p",{className:"font-bold",children:Ne.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-r",style:{fontSize:"15px"},children:xe.file_name?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs(R,{size:"small",onClick:()=>P(xe.id),children:[e.jsx(Qe,{})," ดูไฟล์หลักฐาน"]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsxs(R,{size:"small",onClick:()=>c(xe),children:[e.jsx(ve,{})," เพิ่มไฟล์ pdf"]})})})}),e.jsx("td",{className:"text-center",children:e.jsx("div",{className:"",children:e.jsxs(R,{size:"small",className:"bg-yellow-400 text-white",onClick:()=>s(xe.id),children:[e.jsx(ct,{})," แก้ไข"]})})})]},Gs):null})]}))})]})}),e.jsxs(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-yellow-500"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"Upload ไฟล์หลักฐาน"})]}),open:te,onOk:N.submit,onCancel:ce,width:480,style:{top:20},children:[e.jsx(pe,{}),e.jsxs(l,{name:"formUpload",form:N,layout:"vertical",onFinish:v,onFinishFailed:ee,className:"mt-2",children:[e.jsx("div",{className:"m-2",children:q.length>0?e.jsx("p",{className:"text-md text-blue-700 font-bold",children:q.sub_quests.sub_quest_name}):null}),e.jsx(l.Item,{name:"file_name",label:e.jsx("b",{children:"อัปโหลดไฟล์/เอกสาร หลักฐาน"}),rules:[{required:!0,message:"กรุณาเลือกไฟล์!"}],children:e.jsx(qe,{customRequest:({onSuccess:L})=>L("ok"),...rn,children:e.jsxs(R,{children:[e.jsx(ve,{})," อัปโหลดไฟล์นามสกุล (.pdf) และขนาดไฟล์ต้องไม่เกิน 2 MB เท่านั้น!"]})})})]})]}),e.jsx(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-yellow-500"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แก้ไขคำตอบการประเมิน"})]}),open:g,onOk:K.submit,onCancel:ce,width:450,style:{top:20},children:e.jsxs(l,{name:"formUpdate",form:K,layout:"vertical",onFinish:U,onFinishFailed:ee,className:"mt-2",children:[e.jsx(l.Item,{name:"hcode",label:e.jsx("b",{children:"หน่วยบริการ"}),children:e.jsx("div",{className:"p-1 border rounded-md",children:q.hcode?a.hname_th+" ["+q.hcode+"]":null})}),e.jsx(l.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx("div",{className:"p-1 border rounded-md",children:q.category_questId?q.category_quests.category_name_th:null})}),e.jsx(l.Item,{name:"questId",label:e.jsx("b",{children:"เกณฑ์หลัก"}),children:e.jsx("div",{className:"p-1 border rounded-md",children:q.questId?q.quests.quest_name:null})}),e.jsx(l.Item,{name:"sub_questId",label:e.jsx("b",{children:"เกณฑ์ย่อย"}),children:e.jsx("div",{className:"p-1 border rounded-md",children:q.sub_questId?q.sub_quests.sub_quest_name:null})}),e.jsx("div",{className:"flex justify-between",children:e.jsx("div",{children:e.jsx(l.Item,{name:"check",label:e.jsx("b",{children:"ตัวเลือกประเมิน"}),rules:[{required:!0,message:"ระบุคะแนนจำเป็น"}],children:q.sub_questId===76?e.jsx(e.Fragment,{children:e.jsx(_e.Group,{style:{display:"inline-block"},children:(ne=(Z=q==null?void 0:q.sub_quests)==null?void 0:Z.sub_quest_lists)==null?void 0:ne.map((L,oe)=>e.jsxs("div",{className:"flex gap-1",children:[e.jsx(_e,{value:L.choice},oe),e.jsx("p",{className:"text-green-700",children:L.sub_quest_listname})]}))})}):e.jsx(e.Fragment,{children:e.jsx(de.Group,{children:e.jsx(ye,{direction:"vertical",children:(Se=(me=q==null?void 0:q.sub_quests)==null?void 0:me.sub_quest_lists)==null?void 0:Se.map(L=>e.jsx(de,{value:L.choice,className:L.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700 pl-7":"text-green-700 pl-7",children:L.sub_quest_listname}))})})})})})}),e.jsx(l.Item,{name:"userId",label:e.jsx("b",{children:"ผู้ประเมิน"}),children:e.jsx("div",{className:"p-1 border rounded-md",children:q.userId?a.firstname_th+" "+a.lastname_th:null})})]})}),e.jsxs(he,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(ie,{className:"text-yellow-500"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"ดูข้อมูลหลักฐาน"})]}),open:E,onCancel:ce,width:700,style:{top:20},footer:e.jsx(R,{size:"small",color:"danger",onClick:ce,variant:"dashed",children:"ปิด"}),children:[e.jsx(pe,{}),e.jsx("div",{children:e.jsx("p",{className:"text-slate-600 font-bold",children:(be=q==null?void 0:q.sub_quests)==null?void 0:be.sub_quest_name})}),e.jsx("div",{className:"flex gap-4 mt-2",children:e.jsxs(R,{size:"small",color:"danger",variant:"outlined",onClick:()=>u(q==null?void 0:q.id),children:[e.jsx(tt,{size:16})," ลบไฟล์หลักฐานนี้"]})}),e.jsx("div",{children:e.jsx(nn,{pdfFile:W})})]})]})]})]})},dn=()=>(ue("รายงานผลการประเมิน"),e.jsx("div",{children:e.jsx(cn,{})}));ge.extend(Te);const on=()=>{const a=O(p=>p.user),n=O(p=>p.token),[x,i]=r.useState([]),[w,S]=r.useState([]),[_,H]=r.useState(!1);r.useEffect(()=>{q(n,a.province)},[]);const q=async()=>{H(!0),await Wt(n,a.province).then(p=>{i(p.data),S(p.data)}).catch(p=>{console.log(p)}).finally(()=>H(!1))},V=p=>{S(x.filter(o=>o.hcode.toLowerCase().includes(p.target.value)||o.hname_th.toLowerCase().includes(p.target.value)||o.firstname_th.toLowerCase().includes(p.target.value)))},m=w.map((p,o)=>({...p,key:o})),F=[{title:"ลำดับ",align:"center",render:({key:p})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:p+1})})},{title:"ชื่อ-นามสกุล",render:({title_th:p,firstname_th:o,lastname_th:f})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px",marginLeft:"5px"},children:[p," ",o," ",f]})})},{title:e.jsx("p",{className:"text-center",children:"หน่วยบริการ"}),render:({hname_th:p,hcode:o})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:[p," [",o,"]"]})})},{title:e.jsx("p",{className:"text-center",children:"ตำแหน่ง"}),render:({position:p,position_id:o})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:[p," [",o,"]"]})})},{title:"ระดับ",dataIndex:"level",align:"center",render:p=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:p==1?"ส่วนกลาง":p==2?"เขตสุขภาพ":p==3?"จังหวัด":p==4?"หน่วยบริการ":""})})},{title:"สิทธิ",dataIndex:"role",align:"center",render:p=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:p})})},{title:"ประเภท",dataIndex:"objective",align:"center",width:"10%",render:p=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:p==="responder"?"ผู้ประเมิน รพ.":p==="prov_approve"?"คกก.สสจ.":p==="zone_approve"?"คกก.เขตฯ":null})})},{title:"การอนุมัติ",align:"center",render:({enabled:p,id:o})=>e.jsx(e.Fragment,{children:e.jsx(Ns,{size:"small",checked:p,onChange:f=>A(f,o)})})},{title:"วันที่เพิ่ม",align:"center",render:({createdAt:p})=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:ge(p).locale("th").format("DD MMM BB")})})},{title:"วันที่แก้ไข",align:"center",render:({updatedAt:p})=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:ge(p).locale("th").format("DD MMM BB")})})}],A=(p,o)=>{Is(n,{id:o,enabled:p}).then(g=>{G.success(g.data.message),q(n,a.province)}).catch(g=>{console.log(g)})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:[e.jsx(rs,{})," ",e.jsx("p",{className:"ml-2",children:"จัดการ user รพ.ในจังหวัด"})]}),e.jsxs("div",{className:"border rounded-md p-2 bg-white shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-3",children:[e.jsx("div",{children:e.jsxs("p",{style:{fontSize:"14px"},children:["จำนวนบัญชีทั้งหมด ",w.length," รายการ"]})}),e.jsx("div",{children:e.jsx(j,{placeholder:"ค้นหาด้วย hcode, ชื่อ, ชื่อหน่วยบริการ...",className:"rounded-full",style:{width:250},prefix:e.jsx(Ue,{}),onChange:V})})]}),e.jsx(Oe,{columns:F,dataSource:m,bordered:!0,size:"small",pagination:{pageSize:12}})]})]})},hn=()=>(ue("จัดการผู้ใช้งาน (รพ.จังหวัด)"),e.jsx("div",{children:e.jsx(on,{})})),xn=async(a,n,x)=>await $.get(`https://bdh-service.moph.go.th/api/smarthosp/getDocumentsByEvaluateByHosp?category_questId=${n}&hcode=${x}`,{headers:{Authorization:"Bearer "+a}}),un=()=>{var P;je();const a=O(h=>h.user),n=O(h=>h.token),[x,i]=r.useState(!1),[w,S]=r.useState(!1),[_,H]=r.useState(!1),[q,V]=r.useState([]),[m,F]=r.useState([]),[A,p]=r.useState([]),[o,f]=r.useState(),[g,B]=r.useState(""),[te,ae]=r.useState([]),[E,D]=r.useState([]),[K]=l.useForm(),[N]=l.useForm(),b=a.province;r.useEffect(()=>{re(),C(),z()},[]);const z=async()=>{await $e(n,b).then(h=>{console.log(h.data),D(h.data)}).catch(h=>{console.log(h)})},C=async()=>{await Ie(n).then(h=>{ae(h.data)}).catch(h=>{console.log(h)})},M=te.map(h=>({id:h.id,sub_questId:h.sub_questId,choice:h.choice,sub_quest_listname:h.sub_quest_listname,sub_quest_total_point:h.sub_quest_total_point,sub_quest_require_point:h.sub_quest_require_point,description:h.description,necessary:h.necessary,createdAt:h.createdAt,updatedAt:h.updatedAt})),W=async()=>{await fe(n).then(h=>{V(h.data)}).catch(h=>{console.log(h)})},re=()=>{i(!0),Xe(n,b).then(h=>{F(h.data)}).catch(h=>{console.log(h)}).finally(()=>i(!1))},Q=m.filter(h=>h.category_quests.id===1),X=[...new Map(Q.map(h=>[h.hospitals.hname_th,h])).values()].map(h=>({value:h.hcode,label:h.hospitals.hname_th+" ["+h.hcode+"]"})),Y=1,I=h=>{S(!1),B(h),W(),p(Q.filter(se=>se.hcode===h)),xn(n,Y,h).then(se=>{f(se.data)}).catch(se=>{console.log(se)})},t=q.filter(h=>h.category_questId===1),y=h=>{re(),C(),z(),p(Q.filter(se=>se.hcode===h))},c=async h=>{S(!0);const se=[];A.forEach(u=>{se.push({evaluateId:h["evaluateId"+u.id],ssj_approve:h["ssj_approve"+u.id],usersId:h["usersId"+u.id],hcode:h["hcode"+u.id],province:h["province"+u.id],zone:h["zone"+u.id]})}),console.log("Result: ",se),await us(n,se).then(u=>{G.success(u.data.message),re(),C(),z(),p(Q.filter(Z=>Z.hcode===g))}).catch(u=>{console.log(u)})},k=h=>{console.log("Failed: ",h)},s=h=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${h}`,"_blank","noreferer")};r.useEffect(()=>{K.setFieldsValue({evaluateId:A.id,usersId:a.id,province:a.province,zone:a.zone})});const U=A.map(h=>t.map(se=>h.quests.quest_name===se.quest_name?{quest_name:h.quest_name,sub_quest_name:se.sub_quest_name}:null));r.useEffect(()=>{N.setFieldsValue({evaluateId:A.id,usersId:a.id,province:a.province,zone:a.zone})});const v=E.filter(h=>h.hcode===g);console.log("Hosp: ",g);const ee=()=>{H(!0)},ce=()=>{H(!1)},d=async h=>{const se=[];A.forEach(u=>{se.push({evaluateId:h["evaluateId"+u.id],ssj_approve:h["ssj_approve"+u.id],usersId:h["usersId"+u.id],hcode:h["hcode"+u.id],province:h["province"+u.id],zone:h["zone"+u.id]})}),console.log("Result2: ",se),await ms(n,se).then(u=>{G.error(u.data.message),H(!1),re(),C(),z(),p(Q.filter(Z=>Z.hcode===g))}).catch(u=>{console.log(u)})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านโครงสร้าง"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกหน่วยบริการ : "}),e.jsx(J,{showSearch:!0,onChange:h=>I(h),optionFilterProp:"label",filterSort:(h,se)=>((h==null?void 0:h.label)??"").toLowerCase().localeCompare(((se==null?void 0:se.label)??"").toLowerCase()),options:X,placeholder:"กรุณาเลือกหน่วยบริการ...",style:{width:"40%"}}),o?e.jsx(e.Fragment,{children:e.jsxs(R,{onClick:()=>s(o.file_name),type:"primary",children:[e.jsx(Ee,{})," ดูเอกสาร/หลักฐาน"]})}):null,e.jsxs(R,{style:{width:180},variant:"solid",onClick:()=>y(g),children:[e.jsx(ze,{})," Refresh (รีเฟรช!)"]})]}),e.jsx("p",{className:"text-sm text-orange-400 p-4",children:'หมายเหตุ: หากโรงพยาบาลประเมินมาไม่ครบทุกหัวข้อ หรือ มีข้อมูลซ้ำ ระบบจะไม่แสดงปุ่ม "Approve (อนุมัติ)"'}),e.jsx("div",{children:e.jsxs(l,{name:"formSsjApprove",form:K,onFinish:c,onFinishFailed:k,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ไฟล์หลักฐาน"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"การอนุมัติ"})]})}),e.jsx("tbody",{children:t.map((h,se)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:5,children:e.jsx("p",{className:"ml-1 p-1 font-bold",style:{fontSize:"18px"},children:e.jsx("u",{children:h.quest_name})})})},se),A.map((u,Z)=>u.quests.quest_name===h.quest_name?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(l.Item,{name:"evaluateId"+u.id,hidden:!0,initialValue:u.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hcode"+u.id,hidden:!0,initialValue:a.hcode,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"usersId"+u.id,hidden:!0,initialValue:a.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"province"+u.id,hidden:!0,initialValue:a.province,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone"+u.id,hidden:!0,initialValue:a.zone,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"ssj_approve"+u.id,hidden:!0,initialValue:!0,children:e.jsx(j,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("div",{className:"flex gap-1",children:e.jsx("p",{className:"font-bold text-slate-600",children:u.sub_quests.sub_quest_name})}),e.jsx("div",{className:"pl-10 flex gap-2",children:u.check.split(",").map(ne=>M.map(me=>me.sub_questId===u.sub_quests.id&&me.choice===ne?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(_e,{checked:!0}),e.jsx("p",{className:me.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:me.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:u.check.split(",").map(ne=>M.map(me=>me.sub_questId===u.sub_quests.id&&me.choice===ne?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:me.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:u.check.split(",").map(ne=>M.map(me=>me.sub_questId===u.sub_quests.id&&me.choice===ne?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:me.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:u.file_name?e.jsx(e.Fragment,{children:e.jsxs(R,{onClick:()=>s(u.file_name),children:[e.jsx(Qe,{})," ดูไฟล์"]})}):e.jsx(e.Fragment,{children:"-"})})}),e.jsx("td",{className:"text-center border-l px-1",children:u.ssj_approve===!0?e.jsx("p",{className:"font-bold text-green-700",children:"อนุมัติแล้ว!"}):e.jsx("p",{className:"font-bold text-red-500",children:"ยังไม่อนุมัติ!"})})]},Z)}):null),e.jsx("div",{})]}))})]}),U.length===67?e.jsxs("div",{className:"flex justify-center space-x-1 mt-3 gap-3",children:[e.jsx("div",{className:"mt-3",children:e.jsx(l.Item,{children:e.jsxs(R,{type:"primary",htmlType:"submit",style:{width:180},disabled:U.length!==67,children:[e.jsx(we,{})," Approve (อนุมัติ!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(R,{color:"danger",style:{width:180},variant:"solid",onClick:ee,children:[e.jsx(Je,{})," Cancel (ยกเลิก!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(R,{style:{width:180},variant:"solid",onClick:()=>y(g),children:[e.jsx(ze,{})," Refresh (รีเฟรช!)"]})})})]}):null]})})]}),e.jsx(he,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"text-yellow-500"}),e.jsxs("span",{className:"font-bold",children:["คุณต้องการยกเลิกการอนุมัติด้านโครงสร้าง ของ",(P=v[0])==null?void 0:P.hname_th," หรือไม่?"]})]}),open:_,onOk:N.submit,onCancel:ce,width:500,style:{top:20},children:e.jsx("div",{className:"h-4",children:e.jsx(l,{name:"formUnApprove",form:N,onFinish:d,onFinishFailed:k,children:t.map(h=>A.map(se=>se.quests.quest_name===h.quest_name?e.jsxs(e.Fragment,{children:[e.jsx(l.Item,{name:"evaluateId"+se.id,hidden:!0,initialValue:se.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hcode"+se.id,hidden:!0,initialValue:g,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"usersId"+se.id,hidden:!0,initialValue:a.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"province"+se.id,hidden:!0,initialValue:a.province,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone"+se.id,hidden:!0,initialValue:a.zone,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"ssj_approve"+se.id,hidden:!0,initialValue:!1,children:e.jsx(j,{})})]}):null))})})})]})},mn=()=>(ue("อนุมัติด้านโครงสร้าง"),e.jsx("div",{children:e.jsx(un,{})})),pn=()=>{var ce;je();const a=O(d=>d.user),n=O(d=>d.token),[x,i]=r.useState(!1);r.useState(!1);const[w,S]=r.useState(!1),[_,H]=r.useState([]),[q,V]=r.useState([]),[m,F]=r.useState([]),[A,p]=r.useState(),[o,f]=r.useState(null),[g,B]=r.useState([]),[te,ae]=r.useState([]),[E]=l.useForm(),[D]=l.useForm(),K=a.province;r.useEffect(()=>{M(),b(),N()},[]);const N=async()=>{await $e(n,K).then(d=>{console.log(d.data),ae(d.data)}).catch(d=>{console.log(d)})},b=async()=>{await Ie(n).then(d=>{B(d.data)}).catch(d=>{console.log(d)})},z=g.map(d=>({id:d.id,sub_questId:d.sub_questId,choice:d.choice,sub_quest_listname:d.sub_quest_listname,sub_quest_total_point:d.sub_quest_total_point,sub_quest_require_point:d.sub_quest_require_point,description:d.description,necessary:d.necessary,createdAt:d.createdAt,updatedAt:d.updatedAt})),C=async()=>{await fe(n).then(d=>{V(d.data)}).catch(d=>{console.log(d)})},M=async()=>{await Xe(n,K).then(d=>{H(d.data)}).catch(d=>{console.log(d)})},W=_.filter(d=>d.category_quests.id===2),Q=[...new Map(W.map(d=>[d.hospitals.hname_th,d])).values()].map(d=>({value:d.hcode,label:d.hospitals.hname_th+" ["+d.hcode+"]"})),T=2,X=d=>{i(!1),f(d),C(),F(W.filter(P=>P.hcode===d)),Ae(n,T,d).then(P=>{p(P.data)}).catch(P=>{console.log(P)})},Y=q.filter(d=>d.category_questId===2),I=d=>{M(),b(),N(),F(W.filter(P=>P.hcode===d))};r.useEffect(()=>{E.setFieldsValue({evaluateId:m.id,usersId:a.id,province:a.province,zone:a.zone})});const t=async d=>{i(!0);const P=[];m.forEach(h=>{P.push({evaluateId:d["evaluateId"+h.id],ssj_approve:d["ssj_approve"+h.id],hcode:d["hcode"+h.id],usersId:d["usersId"+h.id],province:d["province"+h.id],zone:d["zone"+h.id]})}),console.log("Result: ",P),await us(n,P).then(h=>{G.success(h.data.message),M(),b(),N(),F(W.filter(se=>se.hcode===o))}).catch(h=>{console.log(h)})},y=d=>{console.log("Failed: ",d)},c=m.map(d=>Y.map(P=>d.quests.quest_name===P.quest_name?{quest_name:d.quest_name,sub_quest_name:P.sub_quest_name}:null)),k=d=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${d}`,"_blank","noreferer")};r.useEffect(()=>{D.setFieldsValue({evaluateId:m.id,usersId:a.id,province:a.province,zone:a.zone})});const s=te.filter(d=>d.hcode===o);console.log("Hosp: ",o);const U=()=>{S(!0)},v=()=>{S(!1)},ee=async d=>{const P=[];m.forEach(h=>{P.push({evaluateId:d["evaluateId"+h.id],ssj_approve:d["ssj_approve"+h.id],usersId:d["usersId"+h.id],hcode:d["hcode"+h.id],province:d["province"+h.id],zone:d["zone"+h.id]})}),console.log("Result2: ",P),await ms(n,P).then(h=>{G.error(h.data.message),S(!1),M(),b(),N(),F(W.filter(se=>se.hcode===o))}).catch(h=>{console.log(h)})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านบริหารจัดการ"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกหน่วยบริการ : "}),e.jsx(J,{showSearch:!0,onChange:d=>X(d),optionFilterProp:"label",filterSort:(d,P)=>((d==null?void 0:d.label)??"").toLowerCase().localeCompare(((P==null?void 0:P.label)??"").toLowerCase()),options:Q,placeholder:"กรุณาเลือกหน่วยบริการ...",style:{width:"40%"}}),A?e.jsx(e.Fragment,{children:e.jsxs(R,{onClick:()=>k(A.file_name),type:"primary",children:[e.jsx(Ee,{})," ดูเอกสาร/หลักฐาน"]})}):null,e.jsxs(R,{style:{width:180},variant:"solid",onClick:()=>I(o),children:[e.jsx(ze,{})," Refresh (รีเฟรช!)"]})]}),e.jsx("p",{className:"text-sm text-orange-400 p-4",children:'หมายเหตุ: หากโรงพยาบาลประเมินมาไม่ครบทุกหัวข้อ หรือ มีข้อมูลซ้ำ ระบบจะไม่แสดงปุ่ม "Approve (อนุมัติ)"'}),e.jsx("div",{children:e.jsxs(l,{name:"formSsjApprove",form:E,onFinish:t,onFinishFailed:y,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ไฟล์หลักฐาน"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"การอนุมัติ"})]})}),e.jsx("tbody",{children:Y.map((d,P)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:5,children:e.jsx("p",{className:"ml-1 p-1 font-bold",style:{fontSize:"18px"},children:e.jsx("u",{children:d.quest_name})})})},P),m.map((h,se)=>h.quests.quest_name===d.quest_name?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(l.Item,{name:"evaluateId"+h.id,hidden:!0,initialValue:h.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"ssj_approve"+h.id,hidden:!0,initialValue:!0,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"usersId"+h.id,hidden:!0,initialValue:a.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hcode"+h.id,hidden:!0,initialValue:a.hcode,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"province"+h.id,hidden:!0,initialValue:a.province,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone"+h.id,hidden:!0,initialValue:a.zone,children:e.jsx(j,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"font-bold text-slate-600",children:h.sub_quests.sub_quest_name}),e.jsx("div",{className:"pl-10 gap-2",children:h.check.split(",").map(u=>z.map(Z=>Z.sub_questId===h.sub_quests.id&&Z.choice===u?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(_e,{checked:!0}),e.jsx("p",{className:Z.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:Z.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:h.check.split(",").map(u=>z.map(Z=>Z.sub_questId===h.sub_quests.id&&Z.choice===u?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:Z.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:h.check.split(",").map(u=>z.map(Z=>Z.sub_questId===h.sub_quests.id&&Z.choice===u?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:Z.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:h.file_name?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs(R,{onClick:()=>k(h.file_name),children:[e.jsx(Qe,{})," ดูไฟล์"]})})}):e.jsx(e.Fragment,{children:"-"})})}),e.jsx("td",{className:"text-center border-l px-1",children:h.ssj_approve===!0?e.jsx("p",{className:"font-bold text-green-700",children:"อนุมัติแล้ว!"}):e.jsx("p",{className:"font-bold text-red-500",children:"ยังไม่อนุมัติ!"})})]},se)}):null)]}))})]}),c.length===42?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-center space-x-1 mt-3",children:[e.jsx("div",{className:"m-3",children:e.jsx(l.Item,{children:e.jsxs(R,{type:"primary",htmlType:"submit",style:{width:180},children:[e.jsx(we,{})," Approve (อนุมัติ!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(R,{color:"danger",style:{width:180},variant:"solid",onClick:U,children:[e.jsx(Je,{})," Cancel (ยกเลิก!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(R,{style:{width:180},variant:"solid",onClick:()=>I(o),children:[e.jsx(ze,{})," Refresh (รีเฟรช!)"]})})})]})}):null]})})]}),e.jsx(he,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"text-yellow-500"}),e.jsxs("span",{className:"font-bold",children:["คุณต้องการยกเลิกการอนุมัติด้านบริหารจัดการ ของ",(ce=s[0])==null?void 0:ce.hname_th," หรือไม่?"]})]}),open:w,onOk:D.submit,onCancel:v,width:500,style:{top:20},children:e.jsx("div",{className:"h-4",children:e.jsx(l,{name:"formUnApprove",form:D,onFinish:ee,onFinishFailed:y,children:Y.map(d=>m.map(P=>P.quests.quest_name===d.quest_name?e.jsxs(e.Fragment,{children:[e.jsx(l.Item,{name:"evaluateId"+P.id,hidden:!0,initialValue:P.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hcode"+P.id,hidden:!0,initialValue:o,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"usersId"+P.id,hidden:!0,initialValue:a.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"province"+P.id,hidden:!0,initialValue:a.province,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone"+P.id,hidden:!0,initialValue:a.zone,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"ssj_approve"+P.id,hidden:!0,initialValue:!1,children:e.jsx(j,{})})]}):null))})})})]})},jn=()=>(ue("อนุมัติด้านบริหารจัดการ"),e.jsx("div",{children:e.jsx(pn,{})})),gn=()=>{var ce;je();const a=O(d=>d.user),n=O(d=>d.token),[x,i]=r.useState(!1);r.useState(!1);const[w,S]=r.useState(!1),[_,H]=r.useState([]),[q,V]=r.useState([]),[m,F]=r.useState([]),[A,p]=r.useState(),[o,f]=r.useState(null),[g,B]=r.useState([]),[te,ae]=r.useState([]),[E]=l.useForm(),[D]=l.useForm(),K=a.province;r.useEffect(()=>{M(),b(),N()},[]);const N=async()=>{await $e(n,K).then(d=>{console.log(d.data),ae(d.data)}).catch(d=>{console.log(d)})},b=async()=>{await Ie(n).then(d=>{B(d.data)}).catch(d=>{console.log(d)})},z=g.map(d=>({id:d.id,sub_questId:d.sub_questId,choice:d.choice,sub_quest_listname:d.sub_quest_listname,sub_quest_total_point:d.sub_quest_total_point,sub_quest_require_point:d.sub_quest_require_point,description:d.description,necessary:d.necessary,createdAt:d.createdAt,updatedAt:d.updatedAt})),C=async()=>{await fe(n).then(d=>{V(d.data)}).catch(d=>{console.log(d)})},M=async()=>{await Xe(n,K).then(d=>{H(d.data)}).catch(d=>{console.log(d)})},W=_.filter(d=>d.category_quests.id===3),Q=[...new Map(W.map(d=>[d.hospitals.hname_th,d])).values()].map(d=>({value:d.hcode,label:d.hospitals.hname_th+" ["+d.hcode+"]"})),T=3,X=d=>{i(!1),f(d),C(),F(W.filter(P=>P.hcode===d)),Ae(n,T,d).then(P=>{p(P.data)}).catch(P=>{console.log(P)})},Y=q.filter(d=>d.category_questId===3),I=d=>{M(),b(),N(),F(W.filter(P=>P.hcode===d))};r.useEffect(()=>{E.setFieldsValue({evaluateId:m.id,usersId:a.id,province:a.province,zone:a.zone})});const t=async d=>{i(!0);const P=[];m.forEach(h=>{P.push({evaluateId:d["evaluateId"+h.id],ssj_approve:d["ssj_approve"+h.id],usersId:d["usersId"+h.id],hcode:d["hcode"+h.id],province:d["province"+h.id],zone:d["zone"+h.id]})}),console.log("Result: ",P),await us(n,P).then(h=>{G.success(h.data.message),M(),b(),N(),F(W.filter(se=>se.hcode===o))}).catch(h=>{console.log(h)})},y=d=>{console.log("Failed: ",d)},c=m.map(d=>Y.map(P=>d.quests.quest_name===P.quest_name?{quest_name:d.quest_name,sub_quest_name:P.sub_quest_name}:null)),k=d=>{console.log(d),window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${d}`,"_blank","noreferer")};r.useEffect(()=>{D.setFieldsValue({evaluateId:m.id,usersId:a.id,province:a.province,zone:a.zone})});const s=te.filter(d=>d.hcode===o);console.log("Hosp: ",o);const U=()=>{S(!0)},v=()=>{S(!1)},ee=async d=>{const P=[];m.forEach(h=>{P.push({evaluateId:d["evaluateId"+h.id],ssj_approve:d["ssj_approve"+h.id],usersId:d["usersId"+h.id],hcode:d["hcode"+h.id],province:d["province"+h.id],zone:d["zone"+h.id]})}),console.log("Result2: ",P),await ms(n,P).then(h=>{G.error(h.data.message),S(!1),M(),b(),N(),F(W.filter(se=>se.hcode===o))}).catch(h=>{console.log(h)})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านการบริการ"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกหน่วยบริการ : "}),e.jsx(J,{showSearch:!0,onChange:d=>X(d),optionFilterProp:"label",filterSort:(d,P)=>((d==null?void 0:d.label)??"").toLowerCase().localeCompare(((P==null?void 0:P.label)??"").toLowerCase()),options:Q,placeholder:"กรุณาเลือกหน่วยบริการ...",style:{width:"40%"}}),A?e.jsx(e.Fragment,{children:e.jsxs(R,{onClick:()=>k(A.file_name),type:"primary",children:[e.jsx(Ee,{})," ดูเอกสาร/หลักฐาน"]})}):null,e.jsxs(R,{style:{width:180},variant:"solid",onClick:()=>I(o),children:[e.jsx(ze,{})," Refresh (รีเฟรช!)"]})]}),e.jsx("p",{className:"text-sm text-orange-400 p-4",children:'หมายเหตุ: หากโรงพยาบาลประเมินมาไม่ครบทุกหัวข้อ หรือ มีข้อมูลซ้ำ ระบบจะไม่แสดงปุ่ม "Approve (อนุมัติ)"'}),e.jsx("div",{children:e.jsxs(l,{name:"formSsjApprove",form:E,onFinish:t,onFinishFailed:y,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ไฟล์หลักฐาน"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"การอนุมัติ"})]})}),e.jsx("tbody",{children:Y.map((d,P)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:5,children:e.jsx("p",{className:"ml-1 p-1 font-bold",style:{fontSize:"18px"},children:e.jsx("u",{children:d.quest_name})})})},P),m.map((h,se)=>h.quests.quest_name===d.quest_name?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(l.Item,{name:"evaluateId"+h.id,hidden:!0,initialValue:h.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"ssj_approve"+h.id,hidden:!0,initialValue:!0,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"usersId"+h.id,hidden:!0,initialValue:a.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hcode"+h.id,hidden:!0,initialValue:a.hcode,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"province"+h.id,hidden:!0,initialValue:a.province,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone"+h.id,hidden:!0,initialValue:a.zone,children:e.jsx(j,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"font-bold text-slate-600",children:h.sub_quests.sub_quest_name}),e.jsx("div",{className:"pl-10 flex gap-2",children:h.check.split(",").map(u=>z.map(Z=>Z.sub_questId===h.sub_quests.id&&Z.choice===u?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(_e,{checked:!0}),e.jsx("p",{className:Z.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:Z.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:h.check.split(",").map(u=>z.map(Z=>Z.sub_questId===h.sub_quests.id&&Z.choice===u?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:Z.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:h.check.split(",").map(u=>z.map(Z=>Z.sub_questId===h.sub_quests.id&&Z.choice===u?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:Z.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:h.file_name?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs(R,{onClick:()=>k(h.file_name),children:[e.jsx(Qe,{})," ดูไฟล์"]})})}):e.jsx(e.Fragment,{children:"-"})})}),e.jsx("td",{className:"text-center border-l px-1",children:h.ssj_approve===!0?e.jsx("p",{className:"font-bold text-green-700",children:"อนุมัติแล้ว!"}):e.jsx("p",{className:"font-bold text-red-500",children:"ยังไม่อนุมัติ!"})})]},se)}):null)]}))})]}),c.length===44?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-center space-x-1 mt-3",children:[e.jsx("div",{className:"m-3",children:e.jsx(l.Item,{children:e.jsxs(R,{type:"primary",htmlType:"submit",style:{width:180},disabled:c.length!==44,children:[e.jsx(we,{})," Approve (อนุมัติ!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(R,{color:"danger",style:{width:180},variant:"solid",onClick:U,children:[e.jsx(Je,{})," Cancel (ยกเลิก!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(R,{style:{width:180},variant:"solid",onClick:()=>I(o),children:[e.jsx(ze,{})," Refresh (รีเฟรช!)"]})})})]})}):null]})})]}),e.jsx(he,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"text-yellow-500"}),e.jsxs("span",{className:"font-bold",children:["คุณต้องการยกเลิกการอนุมัติด้านการบริการ ของ",(ce=s[0])==null?void 0:ce.hname_th," หรือไม่?"]})]}),open:w,onOk:D.submit,onCancel:v,width:500,style:{top:20},children:e.jsx("div",{className:"h-4",children:e.jsx(l,{name:"formUnApprove",form:D,onFinish:ee,onFinishFailed:y,children:Y.map(d=>m.map(P=>P.quests.quest_name===d.quest_name?e.jsxs(e.Fragment,{children:[e.jsx(l.Item,{name:"evaluateId"+P.id,hidden:!0,initialValue:P.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hcode"+P.id,hidden:!0,initialValue:o,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"usersId"+P.id,hidden:!0,initialValue:a.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"province"+P.id,hidden:!0,initialValue:a.province,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone"+P.id,hidden:!0,initialValue:a.zone,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"ssj_approve"+P.id,hidden:!0,initialValue:!1,children:e.jsx(j,{})})]}):null))})})})]})},bn=()=>e.jsx("div",{children:e.jsx(gn,{})}),vn=()=>{var se;je();const a=O(u=>u.user),n=O(u=>u.token),[x,i]=r.useState(!1);r.useState(!1);const[w,S]=r.useState(!1),[_,H]=r.useState([]),[q,V]=r.useState([]),[m,F]=r.useState([]),[A,p]=r.useState(),[o,f]=r.useState(null),[g,B]=r.useState([]),[te,ae]=r.useState([]),[E,D]=r.useState([]),[K]=l.useForm(),[N]=l.useForm(),b=a.province;r.useEffect(()=>{T(),M(),W(),z()},[]);const z=async()=>{await $e(n,b).then(u=>{console.log(u.data),D(u.data)}).catch(u=>{console.log(u)})},C=4,M=async()=>{await Sa(n,C).then(u=>{B(u.data)}).catch(u=>{console.log(u)})},W=async()=>{await Ie(n).then(u=>{ae(u.data)}).catch(u=>{console.log(u)})},re=te.map(u=>({id:u.id,sub_questId:u.sub_questId,choice:u.choice,sub_quest_listname:u.sub_quest_listname,sub_quest_total_point:u.sub_quest_total_point,sub_quest_require_point:u.sub_quest_require_point,description:u.description,necessary:u.necessary,createdAt:u.createdAt,updatedAt:u.updatedAt})),Q=async()=>{await fe(n).then(u=>{V(u.data)}).catch(u=>{console.log(u)})},T=async()=>{await Xe(n,b).then(u=>{H(u.data)}).catch(u=>{console.log(u)})},X=_.filter(u=>u.category_quests.id===4),I=[...new Map(X.map(u=>[u.hospitals.hname_th,u])).values()].map(u=>({value:u.hcode,label:u.hospitals.hname_th+" ["+u.hcode+"]"})),t=u=>{i(!1),f(u),Q(),F(X.filter(Z=>Z.hcode===u)),Ae(n,C,u).then(Z=>{p(Z.data)}).catch(Z=>{console.log(Z)})},y=q.filter(u=>u.category_questId===4),c=u=>{T(),W(),z(),F(X.filter(Z=>Z.hcode===u))};r.useEffect(()=>{K.setFieldsValue({evaluateId:m.id,usersId:a.id,province:a.province,zone:a.zone})});const k=async u=>{i(!0);const Z=[];m.forEach(ne=>{Z.push({evaluateId:u["evaluateId"+ne.id],ssj_approve:u["ssj_approve"+ne.id],usersId:u["usersId"+ne.id],hcode:u["hcode"+ne.id],province:u["province"+ne.id],zone:u["zone"+ne.id]})}),console.log("Result: ",Z),await us(n,Z).then(ne=>{G.success(ne.data.message),T(),W(),z(),F(X.filter(me=>me.hcode===o))}).catch(ne=>{console.log(ne)})},s=u=>{console.log("Failed: ",u)},U=u=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${u}`,"_blank","noreferer")},v=m.map(u=>y.map(Z=>u.quests.quest_name===Z.quest_name?{quest_name:u.quest_name,sub_quest_name:Z.sub_quest_name}:null)),ee=u=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${u}`,"_blank","noreferer")};r.useEffect(()=>{N.setFieldsValue({evaluateId:m.id,usersId:a.id,province:a.province,zone:a.zone})});const ce=E.filter(u=>u.hcode===o);console.log("Hosp: ",o);const d=()=>{S(!0)},P=()=>{S(!1)},h=async u=>{const Z=[];m.forEach(ne=>{Z.push({evaluateId:u["evaluateId"+ne.id],ssj_approve:u["ssj_approve"+ne.id],usersId:u["usersId"+ne.id],hcode:u["hcode"+ne.id],province:u["province"+ne.id],zone:u["zone"+ne.id]})}),console.log("Result2: ",Z),await ms(n,Z).then(ne=>{G.error(ne.data.message),S(!1),T(),W(),z(),F(X.filter(me=>me.hcode===o))}).catch(ne=>{console.log(ne)})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านบุคลากร"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกหน่วยบริการ : "}),e.jsx(J,{showSearch:!0,onChange:u=>t(u),optionFilterProp:"label",filterSort:(u,Z)=>((u==null?void 0:u.label)??"").toLowerCase().localeCompare(((Z==null?void 0:Z.label)??"").toLowerCase()),options:I,placeholder:"กรุณาเลือกหน่วยบริการ...",style:{width:"40%"}}),A?e.jsx(e.Fragment,{children:e.jsxs(R,{onClick:()=>U(A.file_name),type:"primary",children:[e.jsx(Ee,{})," ดูเอกสาร/หลักฐาน"]})}):null,e.jsxs(R,{style:{width:180},variant:"solid",onClick:()=>c(o),children:[e.jsx(ze,{})," Refresh (รีเฟรช!)"]})]}),e.jsx("p",{className:"text-sm text-orange-400 p-4",children:'หมายเหตุ: หากโรงพยาบาลประเมินมาไม่ครบทุกหัวข้อ หรือ มีข้อมูลซ้ำ ระบบจะไม่แสดงปุ่ม "Approve (อนุมัติ)"'}),e.jsx("div",{children:e.jsxs(l,{name:"formSsjApprove",form:K,onFinish:k,onFinishFailed:s,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ไฟล์หลักฐาน"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"การอนุมัติ"})]})}),e.jsx("tbody",{children:y.map((u,Z)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:5,children:e.jsx("p",{className:"ml-1 p-1 font-bold",style:{fontSize:"18px"},children:e.jsx("u",{children:u.quest_name})})})},Z),m.map((ne,me)=>ne.quests.quest_name===u.quest_name?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(l.Item,{name:"evaluateId"+ne.id,hidden:!0,initialValue:ne.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"usersId"+ne.id,hidden:!0,initialValue:a.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"province"+ne.id,hidden:!0,initialValue:a.province,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone"+ne.id,hidden:!0,initialValue:a.zone,children:e.jsx(j,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"font-bold text-slate-600",children:ne.sub_quests.sub_quest_name}),e.jsx("div",{className:"pl-10 flex gap-2",children:ne.check.split(",").map(Se=>re.map(be=>be.sub_questId===ne.sub_quests.id&&be.choice===Se?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(_e,{checked:!0}),e.jsx("p",{className:be.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:be.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:ne.check.split(",").map(Se=>re.map(be=>be.sub_questId===ne.sub_quests.id&&be.choice===Se?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:be.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:ne.check.split(",").map(Se=>re.map(be=>be.sub_questId===ne.sub_quests.id&&be.choice===Se?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:be.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:ne.file_name?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs(R,{onClick:()=>ee(ne.file_name),children:[e.jsx(Qe,{})," ดูไฟล์"]})})}):e.jsx(e.Fragment,{children:"-"})})}),e.jsx("td",{className:"text-center border-l px-1",children:ne.ssj_approve===!0?e.jsx("p",{className:"font-bold text-green-700",children:"อนุมัติแล้ว!"}):e.jsx("p",{className:"font-bold text-red-500",children:"ยังไม่อนุมัติ!"})})]},me)}):null)]}))})]}),v.length===14?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-center space-x-1 mt-3",children:[e.jsx("div",{className:"m-3",children:e.jsx(l.Item,{children:e.jsxs(R,{type:"primary",htmlType:"submit",style:{width:180},children:[e.jsx(we,{})," Approve (อนุมัติ!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(R,{color:"danger",style:{width:180},variant:"solid",onClick:d,children:[e.jsx(Je,{})," Cancel (ยกเลิก!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(R,{style:{width:180},variant:"solid",onClick:()=>c(o),children:[e.jsx(ze,{})," Refresh (รีเฟรช!)"]})})})]})}):null]})})]}),e.jsx(he,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"text-yellow-500"}),e.jsxs("span",{className:"font-bold",children:["คุณต้องการยกเลิกการอนุมัติด้านบุคลากร ของ",(se=ce[0])==null?void 0:se.hname_th," หรือไม่?"]})]}),open:w,onOk:N.submit,onCancel:P,width:500,style:{top:20},children:e.jsx("div",{className:"h-4",children:e.jsx(l,{name:"formUnApprove",form:N,onFinish:h,onFinishFailed:s,children:y.map(u=>m.map(Z=>Z.quests.quest_name===u.quest_name?e.jsxs(e.Fragment,{children:[e.jsx(l.Item,{name:"evaluateId"+Z.id,hidden:!0,initialValue:Z.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hcode"+Z.id,hidden:!0,initialValue:o,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"usersId"+Z.id,hidden:!0,initialValue:a.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"province"+Z.id,hidden:!0,initialValue:a.province,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone"+Z.id,hidden:!0,initialValue:a.zone,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"ssj_approve"+Z.id,hidden:!0,initialValue:!1,children:e.jsx(j,{})})]}):null))})})})]})},fn=()=>(ue("อนุมัติด้านบุคลากร"),e.jsx("div",{children:e.jsx(vn,{})})),_n=()=>{je();const a=O(p=>p.user),n=O(p=>p.token);r.useState(!1);const[x,i]=r.useState([]),[w,S]=r.useState([]),[_,H]=r.useState(null),q=a.province,V=a.zone;r.useEffect(()=>{m(),F()},[]);const m=async()=>{await $e(n,q).then(p=>{console.log(p.data),i(p.data)}).catch(p=>{console.log(p)})},F=async()=>{await St(n,V).then(p=>{console.log("List: ",p.data),S(p.data)}).catch(p=>{console.log(p)})},A=p=>{console.log("Value: ",p);var o=null;const g=(o===p?p:null)?null:o=p;H(_!==p?g:null)};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"รายงานผลการประเมิน"})}),e.jsx("div",{className:"bg-white rounded-md shadow-md p-3",children:e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-200",children:[e.jsxs("th",{className:"text-center p-2 border-r",children:["หน่วยบริการที่อยู่ในจังหวัด",q," (คะแนนที่แสดงเป็นคะแนนที่หน่วยบริการประเมินเข้ามา ยังไม่ได้รับการอนุมัติ จาก คกก.จังหวัด)"]}),e.jsx("th",{className:"text-center p-2 border-r w-40",children:"ประเภท"})]})}),x.map((p,o)=>e.jsxs("tbody",{children:[e.jsxs("tr",{className:"cursor-pointer bg-slate-100 hover:bg-slate-50",onClick:()=>A(o),children:[e.jsx("td",{className:"border p-1 text-stone-800",children:e.jsxs("div",{className:"flex gap-1 pl-4",children:[e.jsx("p",{className:"text-sm",children:p.hname_th}),e.jsxs("p",{className:"text-sm",children:["[",p.hcode,"]"]})]})}),e.jsx("td",{className:"border text-center p-1 text-stone-800",children:e.jsx("p",{className:"text-sm",children:p.typename})})]},o),_===o?e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"text-center border",children:e.jsxs("table",{className:"w-full table-fixed text-slate-700",children:[e.jsxs("thead",{className:"",children:[e.jsxs("tr",{children:[e.jsx("th",{colSpan:2,className:"text-xs text-center border w-28 p-1",children:"ด้านโครงสร้าง"}),e.jsx("th",{colSpan:2,className:"text-xs text-center border w-28",children:"ด้านบริหารจัดการ"}),e.jsx("th",{colSpan:2,className:"text-xs text-center border w-28",children:"ด้านการบริการ"}),e.jsx("th",{className:"text-xs text-center border w-28",children:"ด้านบุคลากร"}),e.jsx("th",{rowSpan:2,className:"text-xs text-center border w-28",children:"ระดับ Cyber Security"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"text-xs text-center border p-1",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-xs text-center border",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-xs text-center border",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-xs text-center border",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-xs text-center border",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-xs text-center border",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-xs text-center border",children:"คะแนนที่ได้"})]})]}),e.jsx("tbody",{className:"",children:w.map(f=>p.hcode===f.hcode?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"text-xs font-bold",children:[e.jsx("td",{className:"border text-center p-1",children:f.point_total_cat1===null?e.jsx("p",{className:"text-red-500",children:"0"}):e.jsx("p",{className:"text-blue-600",children:f.point_total_cat1})}),e.jsx("td",{className:"border text-center",children:f.point_require_cat1===null?e.jsx("p",{className:"text-red-500",children:"0"}):e.jsx("p",{className:"text-blue-600",children:f.point_require_cat1})}),e.jsx("td",{className:"border text-center",children:f.point_total_cat2===null?e.jsx("p",{className:"text-red-500",children:"0"}):e.jsx("p",{className:"text-blue-600",children:f.point_total_cat2})}),e.jsx("td",{className:"border text-center",children:f.point_require_cat2===null?e.jsx("p",{className:"text-red-500",children:"0"}):e.jsx("p",{className:"text-blue-600",children:f.point_require_cat2})}),e.jsx("td",{className:"border text-center",children:f.point_total_cat3===null?e.jsx("p",{className:"text-red-500",children:"0"}):e.jsx("p",{className:"text-blue-600",children:f.point_total_cat3})}),e.jsx("td",{className:"border text-center",children:f.point_require_cat3===null?e.jsx("p",{className:"text-red-500",children:"0"}):e.jsx("p",{className:"text-blue-600",children:f.point_require_cat3})}),e.jsx("td",{className:"border text-center",children:f.point_total_cat4===null?e.jsx("p",{className:"text-red-500",children:"0"}):e.jsx("p",{className:"text-blue-600",children:f.point_total_cat4})}),e.jsx("td",{className:"border text-center",children:f.cyber_level==="GREEN"?e.jsx("p",{className:"text-green-700",children:f.cyber_levelname}):f.cyber_level==="YELLOW"?e.jsx("p",{className:"text-yellow-600",children:f.cyber_levelname}):f.cyber_level==="RED"?e.jsx("p",{className:"text-red-500",children:f.cyber_levelname}):null})]})}):e.jsx(e.Fragment,{}))})]})})}):null]}))]})})]})},yn=()=>(ue("รายงานผลระดับจังหวัด"),e.jsx("div",{children:e.jsx(_n,{})}));ge.extend(Te);const Nn=()=>{const a=O(o=>o.user),n=O(o=>o.token),[x,i]=r.useState([]),[w,S]=r.useState([]),[_,H]=r.useState(!1),q=a.zone;r.useEffect(()=>{V()},[]);const V=async()=>{H(!0),await Xt(n,q).then(o=>{i(o.data),S(o.data)}).catch(o=>{console.log(o)}).finally(()=>H(!1))},m=o=>{S(x.filter(f=>f.hcode.toLowerCase().includes(o.target.value)||f.hname_th.toLowerCase().includes(o.target.value)||f.firstname_th.toLowerCase().includes(o.target.value)))},F=w.map((o,f)=>({...o,key:f})),A=[{title:"ลำดับ",align:"center",render:({key:o})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:o+1})})},{title:"ชื่อ-นามสกุล",render:({title_th:o,firstname_th:f,lastname_th:g})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px",marginLeft:"5px"},children:[o," ",f," ",g]})})},{title:e.jsx("p",{className:"text-center",children:"หน่วยบริการ"}),render:({hname_th:o,hcode:f})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:[o," [",f,"]"]})})},{title:e.jsx("p",{className:"text-center",children:"ตำแหน่ง"}),render:({position:o,position_id:f})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:[o," [",f,"]"]})})},{title:"ระดับ",dataIndex:"level",align:"center",render:o=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:o==1?"ส่วนกลาง":o==2?"เขตสุขภาพ":o==3?"จังหวัด":o==4?"หน่วยบริการ":""})})},{title:"สิทธิ",dataIndex:"role",align:"center",render:o=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:o})})},{title:"ประเภท",dataIndex:"objective",align:"center",width:"10%",render:o=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:o==="responder"?"ผู้ประเมิน รพ.":o==="prov_approve"?"คกก.สสจ.":o==="zone_approve"?"คกก.เขตฯ":null})})},{title:"การอนุมัติ",align:"center",render:({enabled:o,id:f})=>e.jsx(e.Fragment,{children:e.jsx(Ns,{size:"small",checked:o,onChange:g=>p(g,f)})})},{title:"วันที่เพิ่ม",align:"center",render:({createdAt:o})=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:ge(o).locale("th").format("DD MMM BB")})})},{title:"วันที่แก้ไข",align:"center",render:({updatedAt:o})=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:ge(o).locale("th").format("DD MMM BB")})})}],p=(o,f)=>{Is(n,{id:f,enabled:o}).then(B=>{G.success(B.data.message),V()}).catch(B=>{console.log(B)})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:[e.jsx(rs,{})," ",e.jsx("p",{className:"ml-2",children:"จัดการ user คกก.รพ.อัจฉริยะ ระดับจังหวัด"})]}),e.jsxs("div",{className:"border rounded-md p-2 bg-white shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-3",children:[e.jsx("div",{children:e.jsxs("p",{style:{fontSize:"14px"},children:["จำนวนบัญชีทั้งหมด ",w.length," รายการ"]})}),e.jsx("div",{children:e.jsx(j,{placeholder:"ค้นหาด้วย hcode, ชื่อ, ชื่อหน่วยบริการ...",className:"rounded-full",style:{width:250},prefix:e.jsx(Ue,{}),onChange:m})})]}),e.jsx(Oe,{columns:A,dataSource:F,bordered:!0,size:"small",pagination:{pageSize:12}})]})]})},wn=()=>(ue("จัดการผู้ใช้งาน (จังหวัด)"),e.jsx("div",{children:e.jsx(Nn,{})})),qn=()=>{const a=O(s=>s.user),n=O(s=>s.token),x=a.zone,[i]=l.useForm(),[w,S]=r.useState(!1),[_,H]=r.useState([]),[q,V]=r.useState([]),[m,F]=r.useState([]),[A,p]=r.useState([]),[o,f]=r.useState({provcode:""}),[g,B]=r.useState(null),[te,ae]=r.useState(!1),[E]=l.useForm();r.useEffect(()=>{b(),ae(!0),D()},[]);const D=async()=>{await Ie(n).then(s=>{F(s.data)}).catch(s=>{console.log(s)})},K=m.map(s=>({id:s.id,sub_questId:s.sub_questId,choice:s.choice,sub_quest_listname:s.sub_quest_listname,sub_quest_total_point:s.sub_quest_total_point,sub_quest_require_point:s.sub_quest_require_point,description:s.description,necessary:s.necessary,createdAt:s.createdAt,updatedAt:s.updatedAt})),N=async()=>{await fe(n).then(s=>{H(s.data)}).catch(s=>{console.log(s)})},b=async()=>{S(!0),await es(n,x).then(s=>{V(s.data)}).catch(s=>{console.log(s)}).finally(()=>S(!1))},C=q.filter(s=>s.category_questId===1).map(s=>({id:s.id,category_questId:s.category_questId,questId:s.questId,sub_questId:s.sub_questId,quest_name:s.quests.quest_name,sub_quest_name:s.sub_quests.sub_quest_name,sub_quest_list:s.sub_quests.sub_quest_lists,check:s.check,file_name:s.file_name,ssj_approve:s.ssj_approve,zone_approve:s.zone_approve,hcode:s.hcode,hname_th:s.hospitals.hname_th,provcode:s.hospitals.provcode,provname:s.hospitals.provname,users_id:s.userId,users_firstname_th:s.users.firstname_th,users_lastname_th:s.users.lastname_th})),M=[...new Map(C.map(s=>[s.provname,s])).values()],re=[...new Map(C.map(s=>[s.hname_th,s])).values()].filter(s=>s.provcode===o.provcode),Q=M.sort((s,U)=>s-U).map(s=>({value:s.provcode,label:s.provname})),T=re.map(s=>({value:s.hcode,label:s.hname_th+" ["+s.hcode+"]"})),X=s=>{f({provcode:s})},Y=1,I=async s=>{const U=s.provcode,v=s.hcode;N(),p(C.filter(ee=>ee.provcode===U&&ee.hcode===v)),await Ae(n,Y,v).then(ee=>{B(ee.data)}).catch(ee=>{console.log(ee)})};r.useEffect(()=>{E.setFieldsValue({evaluateId:A.id,usersId:a.id,hcode:A.hcode,hname_th:A.hname_th,province:A.provname,zone:a.zone,zone_approve:!0})});const t=async s=>{console.log(s)},y=s=>{console.log("Fialed: ",s)},c=_.filter(s=>s.category_questId===1),k=s=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${s}`,"_blank","noreferer")};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านโครงสร้าง"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("p",{className:"text-slate-700 font-bold",children:"เลือกจังหวัดและหน่วยบริการ :"}),e.jsxs(l,{name:"formSearch",form:i,layout:"inline",onFinish:I,onFinishFailed:y,children:[e.jsx(l.Item,{name:"provcode",rules:[{required:!0,message:"กรุณาเลือกจักหวัด"}],children:e.jsx(J,{showSearch:!0,optionFilterProp:"label",filterSort:(s,U)=>((s==null?void 0:s.label)??"").toLowerCase().localeCompare(((U==null?void 0:U.label)??"").toLowerCase()),placeholder:"กรุณาเลือกจังหวัด...",options:Q,onSelect:s=>X(s),style:{width:"200px"}})}),e.jsx(l.Item,{name:"hcode",rules:[{required:!0,message:"กรุณาเลือกหน่วยบริการ"}],children:e.jsx(J,{showSearch:!0,optionFilterProp:"label",filterSort:(s,U)=>((s==null?void 0:s.label)??"").toLowerCase().localeCompare(((U==null?void 0:U.label)??"").toLowerCase()),placeholder:"กรุณาเลือกหน่วยบริการ...",options:T,style:{width:"250px"}})}),e.jsx(l.Item,{shouldUpdate:!0,children:()=>e.jsx(R,{type:"primary",htmlType:"submit",disabled:!te||!i.isFieldsTouched(!0)||!!i.getFieldsError().filter(({errors:s})=>s.length).length,children:"ค้นหา"})})]}),g?e.jsx(e.Fragment,{children:e.jsxs(R,{onClick:()=>k(g.file_name),type:"dashed",children:[e.jsx(Ee,{})," ดูเอกสาร/หลักฐาน"]})}):null]}),e.jsx(pe,{}),e.jsx("div",{children:e.jsxs(l,{name:"formZoneApprove",form:E,onFinish:t,onFinishFailed:y,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ไฟล์หลักฐาน"})]})}),e.jsx("tbody",{children:c.map((s,U)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:4,children:e.jsx("p",{className:"ml-1 p-1 font-bold",children:e.jsx("u",{children:s.quest_name})})})},U),A.map((v,ee)=>v.questId===s.id?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(l.Item,{name:"evaluateId"+v.id,hidden:!0,initialValue:v.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"usersId"+v.id,hidden:!0,initialValue:a.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hcode"+v.id,hidden:!0,initialValue:v.hcode,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hname_th"+v.id,hidden:!0,initialValue:v.hname_th,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"province"+v.id,hidden:!0,initialValue:v.provname,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone"+v.id,hidden:!0,initialValue:a.zone,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone_approve"+v.id,hidden:!0,initialValue:!0,children:e.jsx(j,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"text-slate-600",children:v.sub_quest_name}),e.jsx("div",{className:"pl-10 gap-2",children:v.check.split(",").map(ce=>K.map(d=>d.sub_questId===v.sub_questId&&d.choice===ce?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(_e,{checked:!0}),e.jsx("p",{className:d.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:d.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:v.check.split(",").map(ce=>K.map(d=>d.sub_questId===v.sub_questId&&d.choice===ce?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:d.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:v.check.split(",").map(ce=>K.map(d=>d.sub_questId===v.sub_questId&&d.choice===ce?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:d.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:v.file_name?e.jsx(e.Fragment,{children:e.jsxs(R,{onClick:()=>k(s.file_name),children:[e.jsx(Qe,{})," ดูไฟล์"]})}):e.jsx(e.Fragment,{children:"-"})})})]},ee)}):null)]}))})]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{className:"m-3",children:e.jsx(l.Item,{children:e.jsxs(R,{type:"primary",htmlType:"submit",style:{width:500},children:[e.jsx(we,{})," Approve ผลการประเมินด้านโครงสร้าง"]})})})})]})})]})]})},In=()=>(ue("อนุมัติด้านโครงสร้าง"),e.jsx("div",{children:e.jsx(qn,{})})),Sn=()=>{const a=O(s=>s.user),n=O(s=>s.token),x=a.zone,[i]=l.useForm(),[w,S]=r.useState(!1),[_,H]=r.useState([]),[q,V]=r.useState([]),[m,F]=r.useState([]),[A,p]=r.useState([]),[o,f]=r.useState({provcode:""}),[g,B]=r.useState(null),[te,ae]=r.useState(!1),[E]=l.useForm();r.useEffect(()=>{b(),ae(!0),D()},[]);const D=async()=>{await Ie(n).then(s=>{p(s.data)}).catch(s=>{console.log(s)})},K=A.map(s=>({id:s.id,sub_questId:s.sub_questId,choice:s.choice,sub_quest_listname:s.sub_quest_listname,sub_quest_total_point:s.sub_quest_total_point,sub_quest_require_point:s.sub_quest_require_point,description:s.description,necessary:s.necessary,createdAt:s.createdAt,updatedAt:s.updatedAt})),N=async()=>{await fe(n).then(s=>{H(s.data)}).catch(s=>{console.log(s)})},b=async()=>{S(!0),await es(n,x).then(s=>{V(s.data)}).catch(s=>{console.log(s)}).finally(()=>S(!1))},C=q.filter(s=>s.category_questId===2).map(s=>({id:s.id,category_questId:s.category_questId,questId:s.questId,sub_questId:s.sub_questId,quest_name:s.quests.quest_name,sub_quest_name:s.sub_quests.sub_quest_name,sub_quest_list:s.sub_quests.sub_quest_lists,check:s.check,file_name:s.file_name,ssj_approve:s.ssj_approve,zone_approve:s.zone_approve,hcode:s.hcode,hname_th:s.hospitals.hname_th,provcode:s.hospitals.provcode,provname:s.hospitals.provname,users_id:s.userId,users_firstname_th:s.users.firstname_th,users_lastname_th:s.users.lastname_th})),M=[...new Map(C.map(s=>[s.provname,s])).values()],W=[...new Map(C.map(s=>[s.hname_th,s])).values()],re=M.sort((s,U)=>s-U).map(s=>({value:s.provcode,label:s.provname})),T=W.filter(s=>s.provcode===o.provcode).map(s=>({value:s.hcode,label:s.hname_th+" ["+s.hcode+"]"})),X=s=>{f({provcode:s})},Y=2,I=async s=>{const U=s.provcode,v=s.hcode;N(),F(C.filter(ee=>ee.provcode===U&&ee.hcode===v)),await Ae(n,Y,v).then(ee=>{B(ee.data)}).catch(ee=>{console.log(ee)})};r.useEffect(()=>{E.setFieldsValue({evaluateId:m.id,usersId:a.id,hcode:m.hcode,hname_th:m.hname_th,province:m.provname,zone:a.zone,zone_approve:!0})});const t=async s=>{console.log(s)},y=s=>{console.log("Fialed: ",s)},c=_.filter(s=>s.category_questId===2),k=s=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${s}`,"_blank","noreferer")};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านบริหารจัดการ"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("p",{className:"text-slate-700 font-bold",children:"เลือกจังหวัดและหน่วยบริการ :"}),e.jsxs(l,{name:"formSearch",form:i,layout:"inline",onFinish:I,onFinishFailed:y,children:[e.jsx(l.Item,{name:"provcode",rules:[{required:!0,message:"กรุณาเลือกจักหวัด"}],children:e.jsx(J,{showSearch:!0,optionFilterProp:"label",filterSort:(s,U)=>((s==null?void 0:s.label)??"").toLowerCase().localeCompare(((U==null?void 0:U.label)??"").toLowerCase()),placeholder:"กรุณาเลือกจังหวัด...",options:re,onSelect:s=>X(s),style:{width:"200px"}})}),e.jsx(l.Item,{name:"hcode",rules:[{required:!0,message:"กรุณาเลือกหน่วยบริการ"}],children:e.jsx(J,{showSearch:!0,optionFilterProp:"label",filterSort:(s,U)=>((s==null?void 0:s.label)??"").toLowerCase().localeCompare(((U==null?void 0:U.label)??"").toLowerCase()),placeholder:"กรุณาเลือกหน่วยบริการ...",options:T,style:{width:"250px"}})}),e.jsx(l.Item,{shouldUpdate:!0,children:()=>e.jsx(R,{type:"primary",htmlType:"submit",disabled:!te||!i.isFieldsTouched(!0)||!!i.getFieldsError().filter(({errors:s})=>s.length).length,children:"ค้นหา"})})]}),g?e.jsx(e.Fragment,{children:e.jsxs(R,{onClick:()=>k(g.file_name),type:"dashed",children:[e.jsx(Ee,{})," ดูเอกสาร/หลักฐาน"]})}):null]}),e.jsx(pe,{}),e.jsx("div",{children:e.jsxs(l,{name:"formZoneApprove",form:E,onFinish:t,onFinishFailed:y,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ภาพหลักฐาน"})]})}),e.jsx("tbody",{children:c.map((s,U)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:4,children:e.jsx("p",{className:"ml-1 p-1 font-bold",children:e.jsx("u",{children:s.quest_name})})})},U),m.map((v,ee)=>v.questId===s.id?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(l.Item,{name:"evaluateId"+v.id,hidden:!0,initialValue:v.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"usersId"+v.id,hidden:!0,initialValue:a.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hcode"+v.id,hidden:!0,initialValue:v.hcode,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hname_th"+v.id,hidden:!0,initialValue:v.hname_th,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"province"+v.id,hidden:!0,initialValue:v.provname,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone"+v.id,hidden:!0,initialValue:a.zone,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone_approve"+v.id,hidden:!0,initialValue:!0,children:e.jsx(j,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"text-slate-600",children:v.sub_quest_name}),e.jsx("div",{className:"pl-10 gap-2",children:v.check.split(",").map(ce=>K.map(d=>d.sub_questId===v.sub_questId&&d.choice===ce?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(_e,{checked:!0}),e.jsx("p",{className:d.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:d.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:v.check.split(",").map(ce=>K.map(d=>d.sub_questId===v.sub_questId&&d.choice===ce?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:d.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:v.check.split(",").map(ce=>K.map(d=>d.sub_questId===v.sub_questId&&d.choice===ce?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:d.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:v.file_name?e.jsx(e.Fragment,{children:e.jsx(ds,{className:"px-1 py-1",width:100,src:`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${v.file_name}`})}):e.jsx(e.Fragment,{children:"-"})})})]},ee)}):null)]}))})]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{className:"m-3",children:e.jsx(l.Item,{children:e.jsxs(R,{type:"primary",htmlType:"submit",style:{width:500},children:[e.jsx(we,{})," Approve ผลการประเมินด้านโครงสร้าง"]})})})})]})})]})]})},Fn=()=>(ue("อนุมัติด้านบริหารจัดการ"),e.jsx("div",{children:e.jsx(Sn,{})})),Cn=()=>{const a=O(s=>s.user),n=O(s=>s.token),x=a.zone,[i]=l.useForm(),[w]=l.useForm(),[S,_]=r.useState(!1),[H,q]=r.useState([]),[V,m]=r.useState([]),[F,A]=r.useState([]),[p,o]=r.useState({provcode:""}),[f,g]=r.useState(null),[B,te]=r.useState(!1),[ae,E]=r.useState([]);r.useEffect(()=>{b(),te(!0),D()},[]);const D=async()=>{await Ie(n).then(s=>{E(s.data)}).catch(s=>{console.log(s)})},K=ae.map(s=>({id:s.id,sub_questId:s.sub_questId,choice:s.choice,sub_quest_listname:s.sub_quest_listname,sub_quest_total_point:s.sub_quest_total_point,sub_quest_require_point:s.sub_quest_require_point,description:s.description,necessary:s.necessary,createdAt:s.createdAt,updatedAt:s.updatedAt})),N=async()=>{await fe(n).then(s=>{q(s.data)}).catch(s=>{console.log(s)})},b=async()=>{_(!0),await es(n,x).then(s=>{m(s.data)}).catch(s=>{console.log(s)}).finally(()=>_(!1))},C=V.filter(s=>s.category_questId===4).map(s=>({id:s.id,category_questId:s.category_questId,questId:s.questId,sub_questId:s.sub_questId,quest_name:s.quests.quest_name,sub_quest_name:s.sub_quests.sub_quest_name,sub_quest_list:s.sub_quests.sub_quest_lists,check:s.check,file_name:s.file_name,ssj_approve:s.ssj_approve,zone_approve:s.zone_approve,hcode:s.hcode,hname_th:s.hospitals.hname_th,provcode:s.hospitals.provcode,provname:s.hospitals.provname,users_id:s.userId,users_firstname_th:s.users.firstname_th,users_lastname_th:s.users.lastname_th})),M=[...new Map(C.map(s=>[s.provname,s])).values()],W=[...new Map(C.map(s=>[s.hname_th,s])).values()],re=M.sort((s,U)=>s-U).map(s=>({value:s.provcode,label:s.provname})),T=W.filter(s=>s.provcode===p.provcode).map(s=>({value:s.hcode,label:s.hname_th+" ["+s.hcode+"]"})),X=s=>{o({provcode:s})},Y=4,I=async s=>{const U=s.provcode,v=s.hcode;N(),A(C.filter(ee=>ee.provcode===U&&ee.hcode===v)),await Ae(n,Y,v).then(ee=>{g(ee.data)}).catch(ee=>{console.log(ee)})};r.useEffect(()=>{w.setFieldsValue({evaluateId:F.id,usersId:a.id,hcode:F.hcode,hname_th:F.hname_th,province:F.provname,zone:a.zone,zone_approve:!0})});const t=async s=>{console.log(s)},y=s=>{console.log("Fialed: ",s)},c=H.filter(s=>s.category_questId===4),k=s=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${s}`,"_blank","noreferer")};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านบุคลากร"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("p",{className:"text-slate-700 font-bold",children:"เลือกจังหวัดและหน่วยบริการ :"}),e.jsxs(l,{name:"formSearch",form:i,layout:"inline",onFinish:I,onFinishFailed:y,children:[e.jsx(l.Item,{name:"provcode",rules:[{required:!0,message:"กรุณาเลือกจักหวัด"}],children:e.jsx(J,{showSearch:!0,optionFilterProp:"label",filterSort:(s,U)=>((s==null?void 0:s.label)??"").toLowerCase().localeCompare(((U==null?void 0:U.label)??"").toLowerCase()),placeholder:"กรุณาเลือกจังหวัด...",options:re,onSelect:s=>X(s),style:{width:"200px"}})}),e.jsx(l.Item,{name:"hcode",rules:[{required:!0,message:"กรุณาเลือกหน่วยบริการ"}],children:e.jsx(J,{showSearch:!0,optionFilterProp:"label",filterSort:(s,U)=>((s==null?void 0:s.label)??"").toLowerCase().localeCompare(((U==null?void 0:U.label)??"").toLowerCase()),placeholder:"กรุณาเลือกหน่วยบริการ...",options:T,style:{width:"250px"}})}),e.jsx(l.Item,{shouldUpdate:!0,children:()=>e.jsx(R,{type:"primary",htmlType:"submit",disabled:!B||!i.isFieldsTouched(!0)||!!i.getFieldsError().filter(({errors:s})=>s.length).length,children:"ค้นหา"})})]}),f?e.jsx(e.Fragment,{children:e.jsxs(R,{onClick:()=>k(f.file_name),type:"dashed",children:[e.jsx(Ee,{})," ดูเอกสาร/หลักฐาน"]})}):null]}),e.jsx(pe,{}),e.jsx("div",{children:e.jsxs(l,{name:"formZoneApprove",form:w,onFinish:t,onFinishFailed:y,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ภาพหลักฐาน"})]})}),e.jsx("tbody",{children:c.map((s,U)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:4,children:e.jsx("p",{className:"ml-1 p-1 font-bold",children:e.jsx("u",{children:s.quest_name})})})},U),F.map((v,ee)=>v.questId===s.id?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(l.Item,{name:"evaluateId"+v.id,hidden:!0,initialValue:v.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"usersId"+v.id,hidden:!0,initialValue:a.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hcode"+v.id,hidden:!0,initialValue:v.hcode,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hname_th"+v.id,hidden:!0,initialValue:v.hname_th,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"province"+v.id,hidden:!0,initialValue:v.provname,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone"+v.id,hidden:!0,initialValue:a.zone,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone_approve"+v.id,hidden:!0,initialValue:!0,children:e.jsx(j,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"text-slate-600",children:v.sub_quest_name}),e.jsx("div",{className:"pl-10 gap-2",children:v.check.split(",").map(ce=>K.map(d=>d.sub_questId===v.sub_questId&&d.choice===ce?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(_e,{checked:!0}),e.jsx("p",{className:d.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:d.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:v.check.split(",").map(ce=>K.map(d=>d.sub_questId===v.sub_questId&&d.choice===ce?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:d.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:v.check.split(",").map(ce=>K.map(d=>d.sub_questId===v.sub_questId&&d.choice===ce?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:d.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:v.file_name?e.jsx(e.Fragment,{children:e.jsx(ds,{className:"px-1 py-1",width:100,src:`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${v.file_name}`})}):e.jsx(e.Fragment,{children:"-"})})})]},ee)}):null)]}))})]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{className:"m-3",children:e.jsx(l.Item,{children:e.jsxs(R,{type:"primary",htmlType:"submit",style:{width:500},children:[e.jsx(we,{})," Approve ผลการประเมินด้านโครงสร้าง"]})})})})]})})]})]})},kn=()=>(ue("อนุมัติด้านบุคลากร"),e.jsx("div",{children:e.jsx(Cn,{})})),zn=()=>{const a=O(s=>s.user),n=O(s=>s.token),x=a.zone,[i]=l.useForm(),[w]=l.useForm(),[S,_]=r.useState(!1),[H,q]=r.useState([]),[V,m]=r.useState([]),[F,A]=r.useState([]),[p,o]=r.useState({provcode:""}),[f,g]=r.useState(null),[B,te]=r.useState(!1),[ae,E]=r.useState([]);r.useEffect(()=>{b(),te(!0),D()},[]);const D=async()=>{await Ie(n).then(s=>{E(s.data)}).catch(s=>{console.log(s)})},K=ae.map(s=>({id:s.id,sub_questId:s.sub_questId,choice:s.choice,sub_quest_listname:s.sub_quest_listname,sub_quest_total_point:s.sub_quest_total_point,sub_quest_require_point:s.sub_quest_require_point,description:s.description,necessary:s.necessary,createdAt:s.createdAt,updatedAt:s.updatedAt})),N=async()=>{await fe(n).then(s=>{q(s.data)}).catch(s=>{console.log(s)})},b=async()=>{_(!0),await es(n,x).then(s=>{m(s.data)}).catch(s=>{console.log(s)}).finally(()=>_(!1))},C=V.filter(s=>s.category_questId===3).map(s=>({id:s.id,category_questId:s.category_questId,questId:s.questId,sub_questId:s.sub_questId,quest_name:s.quests.quest_name,sub_quest_name:s.sub_quests.sub_quest_name,sub_quest_list:s.sub_quests.sub_quest_lists,check:s.check,file_name:s.file_name,ssj_approve:s.ssj_approve,zone_approve:s.zone_approve,hcode:s.hcode,hname_th:s.hospitals.hname_th,provcode:s.hospitals.provcode,provname:s.hospitals.provname,users_id:s.userId,users_firstname_th:s.users.firstname_th,users_lastname_th:s.users.lastname_th})),M=[...new Map(C.map(s=>[s.provname,s])).values()],W=[...new Map(C.map(s=>[s.hname_th,s])).values()],re=M.sort((s,U)=>s-U).map(s=>({value:s.provcode,label:s.provname})),T=W.filter(s=>s.provcode===p.provcode).map(s=>({value:s.hcode,label:s.hname_th+" ["+s.hcode+"]"})),X=s=>{o({provcode:s})},Y=3,I=async s=>{const U=s.provcode,v=s.hcode;N(),A(C.filter(ee=>ee.provcode===U&&ee.hcode===v)),await Ae(n,Y,v).then(ee=>{g(ee.data)}).catch(ee=>{console.log(ee)})},t=s=>{console.log("Fialed: ",s)},y=H.filter(s=>s.category_questId===3);r.useEffect(()=>{w.setFieldsValue({evaluateId:F.id,usersId:a.id,hcode:F.hcode,hname_th:F.hname_th,province:F.provname,zone:a.zone,zone_approve:!0})});const c=async s=>{console.log(s)},k=s=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${s}`,"_blank","noreferer")};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านการบริการ"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("p",{className:"text-slate-700 font-bold",children:"เลือกจังหวัดและหน่วยบริการ :"}),e.jsxs(l,{name:"formSearch",form:i,layout:"inline",onFinish:I,onFinishFailed:t,children:[e.jsx(l.Item,{name:"provcode",rules:[{required:!0,message:"กรุณาเลือกจักหวัด"}],children:e.jsx(J,{showSearch:!0,optionFilterProp:"label",filterSort:(s,U)=>((s==null?void 0:s.label)??"").toLowerCase().localeCompare(((U==null?void 0:U.label)??"").toLowerCase()),placeholder:"กรุณาเลือกจังหวัด...",options:re,onSelect:s=>X(s),style:{width:"200px"}})}),e.jsx(l.Item,{name:"hcode",rules:[{required:!0,message:"กรุณาเลือกหน่วยบริการ"}],children:e.jsx(J,{showSearch:!0,optionFilterProp:"label",filterSort:(s,U)=>((s==null?void 0:s.label)??"").toLowerCase().localeCompare(((U==null?void 0:U.label)??"").toLowerCase()),placeholder:"กรุณาเลือกหน่วยบริการ...",options:T,style:{width:"250px"}})}),e.jsx(l.Item,{shouldUpdate:!0,children:()=>e.jsx(R,{type:"primary",htmlType:"submit",disabled:!B||!i.isFieldsTouched(!0)||!!i.getFieldsError().filter(({errors:s})=>s.length).length,children:"ค้นหา"})})]}),f?e.jsx(e.Fragment,{children:e.jsxs(R,{onClick:()=>k(f.file_name),type:"dashed",children:[e.jsx(Ee,{})," ดูเอกสาร/หลักฐาน"]})}):null]}),e.jsx(pe,{}),e.jsx("div",{children:e.jsxs(l,{name:"formZoneApprove",form:w,onFinish:c,onFinishFailed:t,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ภาพหลักฐาน"})]})}),e.jsx("tbody",{children:y.map((s,U)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:4,children:e.jsx("p",{className:"ml-1 p-1 font-bold",children:e.jsx("u",{children:s.quest_name})})})},U),F.map((v,ee)=>v.questId===s.id?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(l.Item,{name:"evaluateId"+v.id,hidden:!0,initialValue:v.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"usersId"+v.id,hidden:!0,initialValue:a.id,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hcode"+v.id,hidden:!0,initialValue:v.hcode,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hname_th"+v.id,hidden:!0,initialValue:v.hname_th,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"province"+v.id,hidden:!0,initialValue:v.provname,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone"+v.id,hidden:!0,initialValue:a.zone,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"zone_approve"+v.id,hidden:!0,initialValue:!0,children:e.jsx(j,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"text-slate-600",children:v.sub_quest_name}),e.jsx("div",{className:"pl-10 gap-2",children:v.check.split(",").map(ce=>K.map(d=>d.sub_questId===v.sub_questId&&d.choice===ce?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(_e,{checked:!0}),e.jsx("p",{className:d.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:d.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:v.check.split(",").map(ce=>K.map(d=>d.sub_questId===v.sub_questId&&d.choice===ce?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:d.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:v.check.split(",").map(ce=>K.map(d=>d.sub_questId===v.sub_questId&&d.choice===ce?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:d.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:v.file_name?e.jsx(e.Fragment,{children:e.jsx(ds,{className:"px-1 py-1",width:100,src:`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${v.file_name}`})}):e.jsx(e.Fragment,{children:"-"})})})]},ee)}):null)]}))})]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{className:"m-3",children:e.jsx(l.Item,{children:e.jsxs(R,{type:"primary",htmlType:"submit",style:{width:500},children:[e.jsx(we,{})," Approve ผลการประเมินด้านโครงสร้าง"]})})})})]})})]})]})},Ln=()=>(ue("อนุมัติด้านบริการ"),e.jsx("div",{children:e.jsx(zn,{})})),En=()=>{je();const a=O(m=>m.user),n=O(m=>m.token);r.useState(!1);const[x,i]=r.useState([]);r.useState([]);const[w,S]=r.useState(null);r.useState(null);const _=a.zone;r.useEffect(()=>{H()},[]);const H=async()=>{await Ps(n,_).then(m=>{i(m.data)}).catch(m=>{console.log(m)})},q=[...new Map(x.map(m=>[m.provname,m])).values()];[...new Map(x.map(m=>[m.hname_th,m])).values()];const V=m=>{console.log("Value: ",m);var F=null;const p=(F===m?m:null)?null:F=m;S(w!==m?p:null)};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsxs("p",{className:"ml-2",children:["รายงานผลการประเมินของเขตสุขภาพที่ ",Number(_)," "]})}),e.jsx("div",{className:"bg-white rounded-md shadow-md p-3",children:e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsx("tr",{className:"text-slate-800 border border-l border-r border-slate-300 bg-slate-50",children:e.jsxs("th",{className:"text-center p-2 border-r",children:["รายชื่อจังหวัดในเขตสุขภาพที่ ",Number(_)]})})}),q.map((m,F)=>e.jsxs("tbody",{children:[e.jsx("tr",{className:"cursor-pointer hover:bg-slate-50",onClick:()=>V(F),children:e.jsx("td",{className:"border p-1 text-center font-bold text-yellow-700",children:e.jsx("p",{children:m.provname})})},F),w===F?e.jsx("tr",{children:e.jsx("td",{className:"border",children:e.jsxs("table",{className:"w-full table-fixed text-slate-700",children:[e.jsxs("thead",{className:"bg-slate-50",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:2,className:"text-sm text-center border",children:"หน่วยบริการ"}),e.jsx("th",{colSpan:2,className:"text-sm text-center border w-52",children:"ด้านโครงสร้าง"}),e.jsx("th",{colSpan:2,className:"text-sm text-center border w-52",children:"ด้านบริหารจัดการ"}),e.jsx("th",{colSpan:2,className:"text-sm text-center border w-52",children:"ด้านการบริการ"}),e.jsx("th",{colSpan:2,className:"text-sm text-center border w-52",children:"ด้านบุคลากร"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm text-center border",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-sm text-center border",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-sm text-center border",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-sm text-center border",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-sm text-center border",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-sm text-center border",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-sm text-center border",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-sm text-center border",children:"คะแนนจำเป็น"})]})]}),x.map((A,p)=>A.provcode===m.provcode?e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border",children:e.jsxs("p",{className:"pl-2 text-sm",children:[A.hname_th," [",A.hcode,"]"]})}),e.jsx("td",{className:"border"}),e.jsx("td",{className:"border"}),e.jsx("td",{className:"border"}),e.jsx("td",{className:"border"}),e.jsx("td",{className:"border"}),e.jsx("td",{className:"border"}),e.jsx("td",{className:"border"}),e.jsx("td",{className:"border"})]},p)}):null)]})})}):null]}))]})})]})},An=()=>(ue("รายงานผลระดับเขตฯ"),e.jsx("div",{children:e.jsx(En,{})})),Qn=()=>{const a=O(N=>N.user),n=O(N=>N.token);je(),r.useState(!1);const[x,i]=r.useState([]),[w,S]=r.useState([]),[_,H]=r.useState([]),[q,V]=r.useState([]),m=a.province;r.useEffect(()=>{F(),A(),D(),K()},[]);const F=async()=>{await $e(n,m).then(N=>{console.log("Hosp: ",N.data),i(N.data)}).catch(N=>{console.log(N)})},A=async()=>{await Xe(n,m).then(N=>{console.log("List: ",N.data),S(N.data)}).catch(N=>{console.log(N)})},p=w.filter(N=>N.category_quests.id===1),o=w.filter(N=>N.category_quests.id===2),f=w.filter(N=>N.category_quests.id===3),g=w.filter(N=>N.category_quests.id===4),B=[...new Map(p.map(N=>[N.hcode,N])).values()],te=[...new Map(o.map(N=>[N.hcode,N])).values()],ae=[...new Map(f.map(N=>[N.hcode,N])).values()],E=[...new Map(g.map(N=>[N.hcode,N])).values()],D=async()=>{await aa(n,m).then(N=>{H(N.data)}).catch(N=>{console.log(N)})},K=async()=>{await na(n,m).then(N=>{V(N.data)}).catch(N=>{console.log(N)})};return e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:os,alt:"Gem"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ระดับเพชร"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsx("p",{className:"text-4xl",children:"0"}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsx("div",{className:"flex text-green-700",children:e.jsx("p",{children:"0.0 % "})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:Ge,alt:"Gold"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ระดับทอง"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsx("p",{className:"text-4xl",children:"0"}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsx("div",{className:"flex text-green-700",children:e.jsx("p",{children:"0.0 % "})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:Pe,alt:"Silver"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ระดับเงิน"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsx("p",{className:"text-4xl",children:"0"}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsx("div",{className:"flex text-green-700",children:e.jsx("p",{children:"0.0 % "})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:ws,alt:"HospitalIcon"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"รพ.ทั้งหมด"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsxs("p",{className:"text-4xl",children:["0/",x.length]}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsx("div",{className:"flex text-green-700",children:e.jsx("p",{children:"0.0 % "})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(ke,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านโครงสร้าง"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsxs("p",{className:"text-4xl",children:[B.length," /"]}),e.jsx("p",{className:"text-4xl",children:x.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(ke,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านบริหารจัดการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsxs("p",{className:"text-4xl",children:[te.length," /"]}),e.jsx("p",{className:"text-4xl",children:x.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(ke,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านการบริการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsxs("p",{className:"text-4xl",children:[ae.length," /"]}),e.jsx("p",{className:"text-4xl",children:x.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(ke,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านบุคลากร"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsxs("p",{className:"text-4xl",children:[E.length," /"]}),e.jsx("p",{className:"text-4xl",children:x.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(vs,{}),e.jsx("p",{className:"text-green-800",children:"ผู้ประเมินรายใหม่ที่ยังไม่อนุมัติ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:q.length}),e.jsx("p",{className:"text-xs",children:"ราย"})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(Ms,{}),e.jsx("p",{className:"text-green-800",children:"ผู้ประเมินรายใหม่ที่อนุมัติแล้ว"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:_.length}),e.jsx("p",{className:"text-xs",children:"ราย"})]})]})]})})},Un=()=>(ue("Dashboard"),e.jsx("div",{children:e.jsx(Qn,{})})),Mn=()=>{je();const a=O(g=>g.user),n=O(g=>g.token);r.useState(!1);const[x,i]=r.useState([]),[w,S]=r.useState([]),[_,H]=r.useState([]),[q,V]=r.useState([]),m=a.zone;r.useEffect(()=>{F(),A(),o(),f()},[]);const F=async()=>{await Ps(n,m).then(g=>{i(g.data)}).catch(g=>{console.log(g)})},A=async()=>{await es(n,m).then(g=>{S(g.data)}).catch(g=>{console.log(g)})},p=w.map(g=>({id:g.id,category_questId:g.category_questId,questId:g.questId,sub_questId:g.sub_questId,quest_name:g.quests.quest_name,sub_quest_name:g.sub_quests.sub_quest_name,sub_quest_list:g.sub_quests.sub_quest_lists,check:g.check,file_name:g.file_name,ssj_approve:g.ssj_approve,zone_approve:g.zone_approve,hcode:g.hcode,hname_th:g.hospitals.hname_th,provcode:g.hospitals.provcode,provname:g.hospitals.provname,users_id:g.userId,users_firstname_th:g.users.firstname_th,users_lastname_th:g.users.lastname_th}));console.log("Data: ",p);const o=async()=>{await la(n,m).then(g=>{H(g.data)}).catch(g=>{console.log(g)})},f=async()=>{await ra(n,m).then(g=>{V(g.data)}).catch(g=>{console.log(g)})};return e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:os,alt:"Gem"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ระดับเพชร"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsx("p",{className:"text-4xl",children:"0"}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsxs("div",{className:"flex text-green-700",children:[e.jsx("p",{children:"0.0 % "}),e.jsx(ss,{})]})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:Ge,alt:"Gold"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ระดับทอง"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsx("p",{className:"text-4xl",children:"0"}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsxs("div",{className:"flex text-green-700",children:[e.jsx("p",{children:"0.0 % "}),e.jsx(ss,{})]})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:Pe,alt:"Silver"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ระดับเงิน"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsx("p",{className:"text-4xl",children:"0"}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsxs("div",{className:"flex text-green-700",children:[e.jsx("p",{children:"0.0 % "}),e.jsx(ss,{})]})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:ws,alt:"HospitalIcon"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"รพ.ทั้งหมด"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsxs("p",{className:"text-4xl",children:["0/",x.length]}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsxs("div",{className:"flex text-green-700",children:[e.jsx("p",{children:"0.0 % "}),e.jsx(ss,{})]})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(ke,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านโครงสร้าง"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:"0 /"}),e.jsx("p",{className:"text-4xl",children:x.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(ke,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านบริหารจัดการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:"0 /"}),e.jsx("p",{className:"text-4xl",children:x.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(ke,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านการบริการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:"0 /"}),e.jsx("p",{className:"text-4xl",children:x.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(ke,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านบุคลากร"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:"0 /"}),e.jsx("p",{className:"text-4xl",children:x.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(vs,{}),e.jsx("p",{className:"text-green-800",children:"คกก.สสจ.ที่ยังไม่อนุมัติ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:q.length}),e.jsx("p",{className:"text-xs",children:"ราย"})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(Ms,{}),e.jsx("p",{className:"text-green-800",children:"คกก.สสจ.ที่อนุมัติแล้ว"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:_.length}),e.jsx("p",{className:"text-xs",children:"ราย"})]})]})]})})},Bn=()=>(ue("Dashboard-zone"),e.jsx("div",{children:e.jsx(Mn,{})})),Pn=()=>{const a=O(m=>m.user),n=O(m=>m.token),[x,i]=r.useState(!1),[w,S]=r.useState({cyber_level:"",cyber_image:"",usersId:"",hcode:""});r.useEffect(()=>{i(!0),V()},[]);const[_]=l.useForm(),H=[{value:"Green",label:e.jsxs("div",{className:"flex gap-2 pl-3 text-green-800",children:[e.jsx("p",{children:"เขียว"}),e.jsx(js,{})]})},{value:"Yellow",label:e.jsxs("div",{className:"flex gap-2 pl-3 text-yellow-400",children:[e.jsx("p",{className:"",children:"เหลือง"}),e.jsx(js,{})]})},{value:"Red",label:e.jsxs("div",{className:"flex gap-2 pl-3 text-red-500",children:[e.jsx("p",{className:"",children:"แดง"}),e.jsx(js,{})]})}],q=async m=>{console.log(m);const F=new FormData;F.append("cyber_image",m.cyber_image.file.originFileObj),F.append("cyber_level",m.cyber_level),F.append("usersId",m.usersId),F.append("hcode",m.hcode),await qt(n,F).then(A=>{G.success(A.data.message)}).catch(A=>{console.log(A)})};r.useEffect(()=>{_.setFieldsValue({usersId:a.id,hcode:a.hcode})},[]);const V=async()=>{await qs(n,a.hcode).then(m=>{S(m.data)}).catch(m=>{console.log(m)})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"ระดับ Cyber Scurity ของศูนย์เทคโนโลยีสารสนเทศและการสื่อสาร"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs(l,{form:_,name:"formCyberCheck",layout:"inline",onFinish:q,children:[e.jsx(l.Item,{name:"cyber_level",label:e.jsx("b",{children:"ระดับ Cyber Security ศทส."}),rules:[{required:!0,message:"กรุณาเลือกระดับ Cyber!"}],children:e.jsx(J,{className:"",options:H,style:{width:200},placeholder:"กรุณาเลือกระดับ Cyber..."})}),e.jsx(l.Item,{name:"cyber_image",label:e.jsx("b",{children:"อัปโหลดไฟล์/ภาพ"}),rules:[{required:!0,message:"กรุณาเพิ่มภาพระดับ Cyber!"}],children:e.jsx(qe,{customRequest:({onSuccess:m})=>m("ok"),children:e.jsx(R,{icon:e.jsx(ve,{}),style:{width:200},children:"Click to Upload"})})}),e.jsx(l.Item,{name:"usersId",hidden:!0,children:e.jsx(j,{})}),e.jsx(l.Item,{name:"hcode",hidden:!0,children:e.jsx(j,{})}),e.jsx(l.Item,{shouldUpdate:!0,children:()=>e.jsx(R,{type:"primary",htmlType:"submit",disabled:!x||!_.isFieldsTouched(!0)||!!_.getFieldsError().filter(({errors:m})=>m.length).length,children:"เพิ่มข้อมูล"})})]})}),e.jsx(pe,{}),e.jsx("div",{className:"grid grid-cols-6 gap-4",children:e.jsx("div",{className:"col-start-2 col-span-4",children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(ds,{className:"px-1 py-1",width:450,src:`https://bdh-service.moph.go.th/api/smarthosp/cyber-image/${w.cyber_image}`})})})})]})]})},Dn=()=>e.jsx("div",{children:e.jsx(Pn,{})}),Rn=Ks([{path:"/smarthosp-quest/",element:e.jsx(bt,{}),children:[{index:!0,element:e.jsx(Ft,{})},{path:"checklist",element:e.jsx(Ct,{})},{path:"user-guide",element:e.jsx(kt,{})},{path:"register",element:e.jsx(Mt,{})},{path:"login",element:e.jsx(Bt,{})},{path:"contact-us",element:e.jsx(Be,{})}]},{path:"/smarthosp-quest/user",element:e.jsx(ts,{element:e.jsx(Ot,{})}),children:[{index:!0,element:e.jsx(zs,{})},{path:"contact-us",element:e.jsx(Be,{})}]},{path:"/smarthosp-quest/user/responder",element:e.jsx(ts,{element:e.jsx(Ma,{})}),children:[{index:!0,element:e.jsx(zs,{})},{path:"evaluate-infrastructure",element:e.jsx(Ga,{})},{path:"evaluate-management",element:e.jsx(Ya,{})},{path:"evaluate-service",element:e.jsx(en,{})},{path:"evaluate-people",element:e.jsx(an,{})},{path:"cyber-check",element:e.jsx(Dn,{})},{path:"report-hosp",element:e.jsx(dn,{})},{path:"contact-us",element:e.jsx(Be,{})}]},{path:"/smarthosp-quest/user/prov-approve",element:e.jsx(ts,{element:e.jsx(Ra,{})}),children:[{index:!0,element:e.jsx(Un,{})},{path:"ssj-usermanagement",element:e.jsx(hn,{})},{path:"ssj-approve-infrastructure",element:e.jsx(mn,{})},{path:"ssj-approve-management",element:e.jsx(jn,{})},{path:"ssj-approve-service",element:e.jsx(bn,{})},{path:"ssj-approve-people",element:e.jsx(fn,{})},{path:"report-prov",element:e.jsx(yn,{})},{path:"contact-us",element:e.jsx(Be,{})}]},{path:"/smarthosp-quest/user/zone-approve",element:e.jsx(ts,{element:e.jsx(Za,{})}),children:[{index:!0,element:e.jsx(Bn,{})},{path:"zone-usermanagement",element:e.jsx(wn,{})},{path:"zone-approve-infrastructure",element:e.jsx(In,{})},{path:"zone-approve-management",element:e.jsx(Fn,{})},{path:"zone-approve-service",element:e.jsx(Ln,{})},{path:"zone-approve-people",element:e.jsx(kn,{})},{path:"report-zone",element:e.jsx(An,{})},{path:"contact-us",element:e.jsx(Be,{})}]},{path:"/smarthosp-quest/admin",element:e.jsx(Pt,{element:e.jsx(Kt,{})}),children:[{index:!0,element:e.jsx(Zt,{})},{path:"manage-user",element:e.jsx(oa,{})},{path:"manage-topic",element:e.jsx(ja,{})},{path:"manage-quest",element:e.jsx(Na,{})},{path:"manage-sub-quest",element:e.jsx(La,{})},{path:"report-centre",element:e.jsx(Ea,{})},{path:"contact-us",element:e.jsx(Be,{})}]}]),Hn=()=>e.jsx(e.Fragment,{children:e.jsx(Ys,{router:Rn})}),On=()=>e.jsxs(e.Fragment,{children:[e.jsx(ht,{}),e.jsx(Hn,{})]});Js(document.getElementById("root")).render(e.jsx(On,{}));
