import{j as e,r as c}from"./react-DtcBd6oJ.js";import{c as Gt}from"./react-dom-BUWP3hwu.js";import{N as ce,c as Zt,R as $t}from"./react-router-dom-Q8s14Oww.js";import{L as ns,U as Zs,a as Vt,S as ls,B as bs,b as Ce,c as vs,d as fs,e as ft,M as _t,H as yt,f as Nt,g as wt,F as Jt,h as bt,i as Yt,T as Ls,G as $s,j as Ps,P as Vs,k as Js,l as Cs,m as ks,n as ke,o as Es,p as Ie,R as Kt,q as Wt,r as Te,s as Ee,t as qt}from"./lucide-react-Cad5Gi7i.js";import{O as rs,e as be,c as It,f as Xt}from"./react-router-C8x6Xlmu.js";import{a as Z}from"./axios-DW_MHI2K.js";import{I as g,F as We,a as r,B as H,M as xe,R as de,S as qe,b as X,A as _s,T as ss,c as Ys,C as ea,d as Ae,e as we,D as je,U as ze,f as Ts}from"./antd-B8_VzFxA.js";import{n as Xe,h as he,f as sa,$ as ye,a0 as Ke,a1 as ta,a2 as Re,a3 as Ss,a4 as Hs}from"./@ant-design-Buap8svl.js";import{B as aa,P as na,p as la,c as ra}from"./@mui-DqGN-KSR.js";import{c as ca,a as oa,p as ia}from"./zustand-E4SUeAM9.js";import{B as V,Q as da}from"./react-toastify-cMNcB8CL.js";import{d as ve,b as cs}from"./dayjs-CvIcHLCM.js";import{D as ha,P as xa,_ as ua,a as ma}from"./react-pdf-DuG2B4cK.js";import"./classnames-BK5ccKcQ.js";import"./scheduler-CylivXx-.js";import"./@remix-run-BQcj6FK2.js";import"./rc-util-DhJyx-BV.js";import"./@babel-CNPOxmrp.js";import"./rc-resize-observer-DcjZBGzh.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-motion-DKWxMSiS.js";import"./@rc-component-CJwU0uVR.js";import"./rc-tooltip-DPNT9ucs.js";import"./rc-overflow-CU4oLaYm.js";import"./rc-tabs-CciN2tkp.js";import"./rc-dropdown-CkSm3u_Q.js";import"./rc-menu-BAvRlY6B.js";import"./rc-select-B2Vq-Cub.js";import"./rc-virtual-list-DlSx8odL.js";import"./rc-input-number-BrZlpYiz.js";import"./rc-input-CWadQfp9.js";import"./rc-field-form-B3WDuTo0.js";import"./scroll-into-view-if-needed-m3rLrdt6.js";import"./compute-scroll-into-view-r6mj3pQe.js";import"./rc-image-OVOiLtc4.js";import"./rc-dialog-BFDk9nNX.js";import"./rc-switch-B5ynqbsk.js";import"./rc-table-6EtFysLI.js";import"./rc-tree-Bwd20y_2.js";import"./rc-checkbox-C96Cy22R.js";import"./rc-pagination-C9CLwTbb.js";import"./throttle-debounce-B7n2cUDB.js";import"./rc-textarea-WhAG34Z4.js";import"./rc-upload-DTdsv4xH.js";import"./rc-picker-s-lhdMzE.js";import"./rc-progress-1QoO-5N1.js";import"./@react-spring-Dm_aPVR1.js";import"./d3-color-9lF95FHy.js";import"./react-is-CjY7idYL.js";import"./@emotion-D8nQvbai.js";import"./stylis-DDa9OTMq.js";import"./clsx-B-dksMZM.js";import"./d3-shape-RIm7hi_d.js";import"./d3-path-CimkQT29.js";import"./d3-scale-BDAIxN6F.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-DJclFi1f.js";import"./d3-format-CzD4bSOQ.js";import"./d3-time-format-DXcLPm7L.js";import"./d3-time-CEUycjr8.js";import"./d3-interpolate-HHnA3okx.js";import"./@popperjs-Br2nQdk_.js";import"./make-event-props-BSS3Agxc.js";import"./make-cancellable-promise-BDT7duwA.js";import"./tiny-invariant-CopsF_GD.js";import"./warning-Bct0Odts.js";import"./dequal-tFQomdd2.js";import"./merge-refs-B7wZyJkK.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const z of document.querySelectorAll('link[rel="modulepreload"]'))h(z);new MutationObserver(z=>{for(const E of z)if(E.type==="childList")for(const q of E.addedNodes)q.tagName==="LINK"&&q.rel==="modulepreload"&&h(q)}).observe(document,{childList:!0,subtree:!0});function p(z){const E={};return z.integrity&&(E.integrity=z.integrity),z.referrerPolicy&&(E.referrerPolicy=z.referrerPolicy),z.crossOrigin==="use-credentials"?E.credentials="include":z.crossOrigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function h(z){if(z.ep)return;z.ep=!0;const E=p(z);fetch(z.href,E)}})();const os="/smarthosp-quest/assets/SmartHospital-Logo2-CI3tI5li.png",pa=()=>e.jsxs("div",{className:"bg-green-800 w-64 text-gray-100 flex flex-col h-screen",children:[e.jsx("div",{className:"h-24 bg-green-900 flex items-center justify-center gap-1",children:e.jsx("img",{src:os})}),e.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[e.jsxs(ce,{to:"/smarthosp-quest/",end:!0,className:({isActive:a})=>a?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ns,{className:"mr-2"}),"Dashboard"]}),e.jsxs(ce,{to:"register",className:({isActive:a})=>a?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Zs,{className:"mr-2"}),"ลงทะเบียนใช้งาน"]}),e.jsxs(ce,{to:"login",className:({isActive:a})=>a?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Vt,{className:"mr-2"}),"เข้าสู่ระบบ"]}),e.jsxs(ce,{to:"contact-us",className:({isActive:a})=>a?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ls,{className:"mr-2"}),"ติดต่อเรา"]})]})]}),ja=()=>e.jsx("header",{className:"relative bg-white h-16 flex items-center px-6"}),ga=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex h-screen",children:[e.jsx(pa,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(ja,{}),e.jsx("main",{className:"flex-1 p-6 bg-gray-100 overflow-y-auto",children:e.jsx(rs,{})})]})]})}),pe=a=>(c.useEffect(()=>{document.title=`SMART HOSPITAL - ${a}`},[a]),null),As="/smarthosp-quest/assets/Blue-gem-CmKK0kqx.png",gs="/smarthosp-quest/assets/Gold2-gN-PTU6g.png",as="/smarthosp-quest/assets/Silver2-CY2qwQIN.png",zs="/smarthosp-quest/assets/Hospital-B9dPxVpb.png",ba=async()=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getListHospitalAll"),is=async(a,l)=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getHospitalOnProv/"+l,{headers:{Authorization:"Bearer "+a}}),St=async(a,l)=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getListHospitalOnZone/"+l,{headers:{Authorization:"Bearer "+a}}),Le=async a=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getSubQuetList",{headers:{Authorization:"Bearer "+a}}),va=async(a,l)=>await Z.get(`https://bdh-service.moph.go.th/api/smarthosp/splitComma?hcode=${l}`,{headers:{Authorization:"Bearer "+a}}),fa=async()=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/sumEvaluateAll"),_a=async()=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getSumEvaluateForAll"),ya=async()=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getHospitalInListEvaluate"),Rs=async(a,l)=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getListSubQuestsForEvaluate/"+l,{headers:{Authorization:"Bearer "+a}}),Qs=async(a,l)=>await Z.post("https://bdh-service.moph.go.th/api/smarthosp/saveEvaluates",l,{headers:{Authorization:"Bearer "+a}}),Ft=async(a,l)=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getListEvaluateByHosp2/"+l,{headers:{Authorization:"Bearer "+a}}),Us=async(a,l,p)=>await Z.get(`https://bdh-service.moph.go.th/api/smarthosp/getEvaluateByHosp?questId=${l}&hcode=${p}`,{headers:{Authorization:"Bearer "+a}}),zt=async(a,l)=>await Z.get(`https://bdh-service.moph.go.th/api/smarthosp/sumEvaluateByHosp?hcode=${l}`,{headers:{Authorization:"Bearer "+a}}),ys=async(a,l)=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getListEvaluateByProv/"+l,{headers:{Authorization:"Bearer "+a}}),Ns=async(a,l)=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getListEvaluateByZone/"+l,{headers:{Authorization:"Bearer "+a}}),Os=async(a,l)=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getEvaluateById/"+l,{headers:{Authorization:"Bearer "+a}}),Na=async(a,l)=>await Z.put("https://bdh-service.moph.go.th/api/smarthosp/updateChoiceEvaluate",l,{headers:{Authorization:"Bearer "+a}}),Qe=async(a,l,p)=>await Z.get(`https://bdh-service.moph.go.th/api/smarthosp/getDocumentsByEvaluateByHosp?category_questId=${l}&hcode=${p}`,{headers:{Authorization:"Bearer "+a}}),wa=async(a,l,p)=>await Z.put("https://bdh-service.moph.go.th/api/smarthosp/uploadFileById/"+l,p,{headers:{Authorization:"Bearer "+a,"Content-Type":"multipart/form-data"}}),Bs=async(a,l)=>await Z.put("https://bdh-service.moph.go.th/api/smarthosp/ssjChangeStatusApprove",l,{headers:{Authorization:"Bearer "+a}}),qa=async(a,l)=>await Z.post("https://bdh-service.moph.go.th/api/smarthosp/uploadCyberImageFile",l,{headers:{Authorization:"Bearer "+a,"Content-Type":"multipart/form-data"}}),Ks=async(a,l)=>await Z.get(`https://bdh-service.moph.go.th/api/smarthosp/getCyberSecurityLevelData?hcode=${l}`,{headers:{Authorization:"Bearer "+a}}),Ia=async(a,l)=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/removeFileById/"+l,{headers:{Authorization:"Bearer "+a}}),Sa=async(a,l)=>await Z.get(`https://bdh-service.moph.go.th/api/smarthosp/getSumEvaluateByZone?zone=${l}`,{headers:{Authorization:"Bearer "+a}}),Ms=async(a,l)=>await Z.put("https://bdh-service.moph.go.th/api/smarthosp/ssjUnApprove",l,{headers:{Authorization:"Bearer "+a}}),Fa=()=>{const[a,l]=c.useState([]),[p,h]=c.useState([]),[z,E]=c.useState(!1);c.useEffect(()=>{q()},[]);const q=async()=>{E(!0),await _a().then(u=>{console.log(u.data),l(u.data),h(u.data)}).catch(u=>{console.log(u)}).finally(()=>E(!1))},M=u=>{h(a.filter(v=>v.hcode.toLowerCase().includes(u.target.value)||v.hname_th.toLowerCase().includes(u.target.value)||v.provname.toLowerCase().includes(u.target.value)))},G=p.map((u,v)=>({key:v,zone:Number(u.zone),provcode:u.provcode,provname:u.provname,hcode:u.hcode,hname_th:u.hname_th,point_total_cat1:u.point_total_cat1,point_require_cat1:u.point_require_cat1,point_total_cat2:u.point_total_cat2,point_require_cat2:u.point_require_cat2,point_total_cat3:u.point_total_cat3,point_require_cat3:u.point_require_cat3,point_total_cat4:u.point_total_cat4,point_require_cat4:u.point_require_cat4,total_cat:u.point_total_cat1+u.point_total_cat2+u.point_total_cat3+u.point_total_cat4,total_require:u.point_require_cat1+u.point_require_cat2+u.point_require_cat3,cyber_level:u.cyber_level,cyber_levelname:u.cyber_levelname})).sort((u,v)=>u.zone>v.zone?1:-1),T=[{title:e.jsx("p",{className:"text-center",style:{fontSize:"13px"},children:"เขตฯ"}),align:"center",render:({zone:u})=>e.jsx("span",{style:{fontSize:"13px"},children:u})},{title:e.jsx("p",{className:"text-center",style:{fontSize:"13px"},children:"จังหวัด"}),align:"center",render:({provname:u})=>e.jsx("span",{style:{fontSize:"13px"},children:u})},{title:e.jsx("p",{className:"text-center",style:{fontSize:"13px"},children:"หน่วยบริการ"}),render:({hname_th:u,hcode:v})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"13px"},children:[u," [",v,"]"]})})},{title:e.jsx("p",{className:"text-center",style:{fontSize:"13px"},children:"ด้านโครงสร้าง"}),children:[{title:e.jsxs("p",{className:"text-center",style:{fontSize:"13px"},children:["คะแนน",e.jsx("br",{}),"ที่ได้"]}),dataIndex:"point_total_cat1",align:"center",render:u=>e.jsx("span",{className:"text-center",style:{fontSize:"13px"},children:u===null?0:u})},{title:e.jsxs("p",{className:"text-center",style:{fontSize:"13px"},children:["คะแนน",e.jsx("br",{}),"จำเป็น"]}),dataIndex:"point_require_cat1",align:"center",render:u=>e.jsx("span",{className:"text-center",style:{fontSize:"13px"},children:u===null?0:u})}]},{title:e.jsx("p",{className:"text-center",style:{fontSize:"13px"},children:"ด้านบริหารจัดการ"}),children:[{title:e.jsxs("p",{className:"text-center",style:{fontSize:"13px"},children:["คะแนน",e.jsx("br",{}),"ที่ได้"]}),dataIndex:"point_total_cat2",align:"center",render:u=>e.jsx("span",{className:"text-center",style:{fontSize:"13px"},children:u===null?0:u})},{title:e.jsxs("p",{className:"text-center",style:{fontSize:"13px"},children:["คะแนน",e.jsx("br",{}),"จำเป็น"]}),dataIndex:"point_require_cat2",align:"center",render:u=>e.jsx("span",{className:"text-center",style:{fontSize:"13px"},children:u===null?0:u})}]},{title:e.jsx("p",{className:"text-center",style:{fontSize:"13px"},children:"ด้านการบริการ"}),children:[{title:e.jsxs("p",{className:"text-center",style:{fontSize:"13px"},children:["คะแนน",e.jsx("br",{}),"ที่ได้"]}),dataIndex:"point_total_cat3",align:"center",render:u=>e.jsx("span",{className:"text-center",style:{fontSize:"13px"},children:u===null?0:u})},{title:e.jsxs("p",{className:"text-center",style:{fontSize:"13px"},children:["คะแนน",e.jsx("br",{}),"จำเป็น"]}),dataIndex:"point_require_cat3",align:"center",render:u=>e.jsx("span",{className:"text-center",style:{fontSize:"13px"},children:u===null?0:u})}]},{title:e.jsx("p",{className:"text-center",style:{fontSize:"13px"},children:"ด้านบุคลากร"}),children:[{title:e.jsxs("p",{className:"text-center",style:{fontSize:"13px"},children:["คะแนน",e.jsx("br",{}),"ที่ได้"]}),dataIndex:"point_total_cat4",align:"center",render:u=>e.jsx("span",{className:"text-center",style:{fontSize:"13px"},children:u===null?0:u})}]},{title:e.jsxs("p",{className:"text-center",style:{fontSize:"13px"},children:["คะแนนที่ได้",e.jsx("br",{}),"(รวม)"]}),dataIndex:"total_cat",align:"center",render:u=>e.jsx("span",{className:"text-center font-bold",style:{fontSize:"13px"},children:u===null?0:u})},{title:e.jsxs("p",{className:"text-center",style:{fontSize:"13px"},children:["คะแนนจำเป็น",e.jsx("br",{}),"(รวม)"]}),dataIndex:"total_require",align:"center",render:u=>e.jsx("span",{className:"text-center font-bold",style:{fontSize:"13px"},children:u===null?0:u})},{title:e.jsx("p",{className:"text-center",style:{fontSize:"13px"},children:"ระดับที่ได้"}),align:"center",render:({total_cat:u,total_require:v,cyber_level:_})=>e.jsx(e.Fragment,{children:u<600?e.jsx("span",{className:"text-red-500 font-bold",style:{fontSize:"13px"},children:"ไม่ผ่าน"}):u>=600&&u<=700?e.jsx("span",{className:"text-slate-400 font-bold",style:{fontSize:"13px"},children:"เงิน"}):u>=700&&v<510?e.jsx("span",{className:"text-slate-400 font-bold",style:{fontSize:"13px"},children:"เงิน"}):u>=800&&v<510?e.jsx("span",{className:"text-slate-400 font-bold",style:{fontSize:"13px"},children:"เงิน"}):u>=700&&u<800&&v==510?e.jsx("span",{className:"text-yellow-500 font-bold",style:{fontSize:"13px"},children:"ทอง"}):u>=800&&v==510&&_!="GREEN"?e.jsx("span",{className:"text-yellow-500 font-bold",style:{fontSize:"13px"},children:"ทอง"}):u>=800&&v==510&&_=="GREEN"?e.jsx("span",{className:"text-blue-500 font-bold",style:{fontSize:"13px"},children:"เพชร"}):null})},{title:e.jsx("p",{className:"text-center",style:{fontSize:"13px"},children:"ระดับ Cyber Secuerity"}),align:"center",render:({cyber_level:u,cyber_levelname:v})=>e.jsx(e.Fragment,{children:u==="GREEN"?e.jsx("p",{className:"text-green-600",style:{fontSize:"13px"},children:v}):u==="YELLOW"?e.jsx("p",{className:"text-yellow-500",style:{fontSize:"13px"},children:v}):u==="RED"?e.jsx("p",{className:"text-red-500",style:{fontSize:"13px"},children:v}):null})}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center p-2",children:e.jsx("p",{className:"text-2xl font-bold text-green-700",children:"ผลการประเมินโรงพยาบาลอัจฉริยะ ปีงบประมาณ 2568 รวมทั้งหมด"})}),e.jsxs("div",{className:"flex justify-between items-center py-2 px-3",children:[e.jsx("div",{children:e.jsxs("p",{style:{fontSize:"14px"},className:"text-blue-500",children:["จำนวนหน่วยบริการทีประเมินทั้งหมด ",p.length," รายการ"]})}),e.jsx("div",{children:e.jsx(g,{placeholder:"จังหวัด, รหัส 5 หลัก, ชื่อหน่วยบริการ...",className:"rounded-full",style:{width:250},prefix:e.jsx(Xe,{}),onChange:M})})]}),e.jsx(We,{style:{margin:"10px"},columns:T,dataSource:G,components:{header:{cell:({children:u,...v})=>e.jsx("th",{...v,style:{background:"#388e3c",color:"white"},children:u})}},bordered:!0,size:"small"})]})},za=()=>{pe("Dashboard");const[a,l]=c.useState([]),[p,h]=c.useState([]),[z,E]=c.useState([]),[q,M]=c.useState([]),[L,G]=c.useState([]),[T,u]=c.useState(null),[v,_]=c.useState(!1),[i]=r.useForm(),[f,j]=c.useState(""),[I,k]=c.useState(""),[le,Q]=c.useState();c.useEffect(()=>{te(),ee(),W()},[]);const te=async()=>{await ba().then(s=>{l(s.data)}).catch(s=>{console.log(s)})},ee=async()=>{await ya().then(s=>{h(s.data),G(s.data)}).catch(s=>{console.log(s)})},W=async()=>{await fa().then(s=>{E(s.data),M(s.data)}).catch(s=>{console.log(s)})},y=q.map(s=>({zone:s.zone,provcode:s.provcode,provname:s.provname,hcode:s.hcode,hname_th:s.hname_th,sumTotalPoint:s.sub_quest_total_point,sumRequirePoint:s.sub_quest_require_point,cyber_level:s.cyber_level,cyber_levelname:s.cyber_levelname}));[...new Set(y.map(s=>s.zone))];const C=y.map(s=>({zone:s.zone,provcode:s.provcode,provname:s.provname}));function m(s,Is){const Dt=s.map(gt=>[Is.map(Ot=>gt[Ot]).join("|"),gt]),Ht=new Map(Dt);return Array.from(Ht.values())}m(C,["zone"]),m(C,["zone","provcode","provname"]);const N=y.filter(s=>s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level=="GREEN"),ne=y.filter(s=>s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint==510||s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level!="GREEN"),Y=y.filter(s=>s.sumTotalPoint>=600&&s.sumTotalPoint<700||s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint<510||s.sumTotalPoint>=800&&s.sumRequirePoint<510),R=a.length-p.length,$=y.filter(s=>s.sumTotalPoint<600),re=N.length/a.length*100,ae=ne.length/a.length*100,P=Y.length/a.length*100,n=p.length/a.length*100,F=(a.length-p.length)/a.length*100,x=$.length/a.length*100;console.log("Level: ",N.length);const K=[{label:"ระดับเพชร",value:N.length,color:"#0088FE"},{label:"ระดับทอง",value:ne.length,color:"#FFDC73"},{label:"ระดับเงิน",value:Y.length,color:"#E0E0E0"},{label:"ไม่ผ่าน",value:$.length,color:"#fc5151"},{label:"ยังไม่ประเมิน",value:R,color:"#fca951"}],t=K.map(s=>s.value).reduce((s,Is)=>s+Is,0),D=s=>`${(s.value/t*100).toFixed(1)}%`,d=y.filter(s=>s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level=="GREEN"&&s.zone==="01"),U=y.filter(s=>s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level=="GREEN"&&s.zone==="02"),se=y.filter(s=>s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level=="GREEN"&&s.zone==="03"),J=y.filter(s=>s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level=="GREEN"&&s.zone==="04"),fe=y.filter(s=>s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level=="GREEN"&&s.zone==="05"),o=y.filter(s=>s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level=="GREEN"&&s.zone==="06"),S=y.filter(s=>s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level=="GREEN"&&s.zone==="07"),b=y.filter(s=>s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level=="GREEN"&&s.zone==="08"),ue=y.filter(s=>s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level=="GREEN"&&s.zone==="09"),w=y.filter(s=>s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level=="GREEN"&&s.zone==="10"),B=y.filter(s=>s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level=="GREEN"&&s.zone==="11"),oe=y.filter(s=>s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level=="GREEN"&&s.zone==="12"),Se=y.filter(s=>s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint==510&&s.zone==="01"||s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level!="GREEN"&&s.zone==="01"),Fe=y.filter(s=>s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint==510&&s.zone==="02"||s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level!="GREEN"&&s.zone==="02"),ge=y.filter(s=>s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint==510&&s.zone==="03"||s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level!="GREEN"&&s.zone==="03"),ws=y.filter(s=>s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint==510&&s.zone==="04"||s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level!="GREEN"&&s.zone==="04"),ds=y.filter(s=>s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint==510&&s.zone==="05"||s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level!="GREEN"&&s.zone==="05"),hs=y.filter(s=>s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint==510&&s.zone==="06"||s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level!="GREEN"&&s.zone==="06"),xs=y.filter(s=>s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint==510&&s.zone==="07"||s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level!="GREEN"&&s.zone==="07"),us=y.filter(s=>s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint==510&&s.zone==="08"||s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level!="GREEN"&&s.zone==="08"),ms=y.filter(s=>s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint==510&&s.zone==="09"||s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level!="GREEN"&&s.zone==="09"),A=y.filter(s=>s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint==510&&s.zone==="10"||s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level!="GREEN"&&s.zone==="10"),ie=y.filter(s=>s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint==510&&s.zone==="11"||s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level!="GREEN"&&s.zone==="11"),me=y.filter(s=>s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint==510&&s.zone==="12"||s.sumTotalPoint>=800&&s.sumRequirePoint==510&&s.cyber_level!="GREEN"&&s.zone==="12"),qs=y.filter(s=>s.sumTotalPoint>=600&&s.sumTotalPoint<=700&&s.zone==="01"||s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint<510&&s.zone==="01"||s.sumTotalPoint>=800&&s.sumRequirePoint<510&&s.zone==="01"),ps=y.filter(s=>s.sumTotalPoint>=600&&s.sumTotalPoint<=700&&s.zone==="02"||s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint<510&&s.zone==="02"||s.sumTotalPoint>=800&&s.sumRequirePoint<510&&s.zone==="02"),es=y.filter(s=>s.sumTotalPoint>=600&&s.sumTotalPoint<=700&&s.zone==="03"||s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint<510&&s.zone==="03"||s.sumTotalPoint>=800&&s.sumRequirePoint<510&&s.zone==="03"),js=y.filter(s=>s.sumTotalPoint>=600&&s.sumTotalPoint<=700&&s.zone==="04"||s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint<510&&s.zone==="04"||s.sumTotalPoint>=800&&s.sumRequirePoint<510&&s.zone==="04"),Pe=y.filter(s=>s.sumTotalPoint>=600&&s.sumTotalPoint<=700&&s.zone==="05"||s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint<510&&s.zone==="05"||s.sumTotalPoint>=800&&s.sumRequirePoint<510&&s.zone==="05"),_e=y.filter(s=>s.sumTotalPoint>=600&&s.sumTotalPoint<=700&&s.zone==="06"||s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint<510&&s.zone==="06"||s.sumTotalPoint>=800&&s.sumRequirePoint<510&&s.zone==="06"),Xs=y.filter(s=>s.sumTotalPoint>=600&&s.sumTotalPoint<=700&&s.zone==="07"||s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint<510&&s.zone==="07"||s.sumTotalPoint>=800&&s.sumRequirePoint<510&&s.zone==="07"),et=y.filter(s=>s.sumTotalPoint>=600&&s.sumTotalPoint<=700&&s.zone==="08"||s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint<510&&s.zone==="08"||s.sumTotalPoint>=800&&s.sumRequirePoint<510&&s.zone==="08"),st=y.filter(s=>s.sumTotalPoint>=600&&s.sumTotalPoint<=700&&s.zone==="09"||s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint<510&&s.zone==="09"||s.sumTotalPoint>=800&&s.sumRequirePoint<510&&s.zone==="09"),tt=y.filter(s=>s.sumTotalPoint>=600&&s.sumTotalPoint<=700&&s.zone==="10"||s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint<510&&s.zone==="10"||s.sumTotalPoint>=800&&s.sumRequirePoint<510&&s.zone==="10"),at=y.filter(s=>s.sumTotalPoint>=600&&s.sumTotalPoint<=700&&s.zone==="11"||s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint<510&&s.zone==="11"||s.sumTotalPoint>=800&&s.sumRequirePoint<510&&s.zone==="11"),nt=y.filter(s=>s.sumTotalPoint>=600&&s.sumTotalPoint<=700&&s.zone==="12"||s.sumTotalPoint>=700&&s.sumTotalPoint<800&&s.sumRequirePoint<510&&s.zone==="12"||s.sumTotalPoint>=800&&s.sumRequirePoint<510&&s.zone==="12"),lt=y.filter(s=>s.sumTotalPoint<600&&s.zone==="01"),rt=y.filter(s=>s.sumTotalPoint<600&&s.zone==="02"),ct=y.filter(s=>s.sumTotalPoint<600&&s.zone==="03"),ot=y.filter(s=>s.sumTotalPoint<600&&s.zone==="04"),it=y.filter(s=>s.sumTotalPoint<600&&s.zone==="05"),dt=y.filter(s=>s.sumTotalPoint<600&&s.zone==="06"),ht=y.filter(s=>s.sumTotalPoint<600&&s.zone==="07"),xt=y.filter(s=>s.sumTotalPoint<600&&s.zone==="08"),ut=y.filter(s=>s.sumTotalPoint<600&&s.zone==="09"),mt=y.filter(s=>s.sumTotalPoint<600&&s.zone==="10"),pt=y.filter(s=>s.sumTotalPoint<600&&s.zone==="11"),jt=y.filter(s=>s.sumTotalPoint<600&&s.zone==="12"),Ue=a.filter(s=>s.zone==="01"),Be=a.filter(s=>s.zone==="02"),Me=a.filter(s=>s.zone==="03"),De=a.filter(s=>s.zone==="04"),He=a.filter(s=>s.zone==="05"),Oe=a.filter(s=>s.zone==="06"),Ge=a.filter(s=>s.zone==="07"),Ze=a.filter(s=>s.zone==="08"),$e=a.filter(s=>s.zone==="09"),Ve=a.filter(s=>s.zone==="10"),Je=a.filter(s=>s.zone==="11"),Ye=a.filter(s=>s.zone==="12");Ue.length,Be.length,Me.length,De.length,He.length,Oe.length,Ge.length,Ze.length,$e.length,Ve.length,Je.length,Ye.length,y.filter(s=>s.zone==="01"),y.filter(s=>s.zone==="02"),y.filter(s=>s.zone==="03"),y.filter(s=>s.zone==="04"),y.filter(s=>s.zone==="05"),y.filter(s=>s.zone==="06"),y.filter(s=>s.zone==="07"),y.filter(s=>s.zone==="08"),y.filter(s=>s.zone==="09"),y.filter(s=>s.zone==="10"),y.filter(s=>s.zone==="11"),y.filter(s=>s.zone==="12");const At=[(d.length/Ue.length*100).toFixed(1),(U.length/Be.length*100).toFixed(1),(se.length/Me.length*100).toFixed(1),(J.length/De.length*100).toFixed(1),(fe.length/He.length*100).toFixed(1),(o.length/Oe.length*100).toFixed(1),(S.length/Ge.length*100).toFixed(1),(b.length/Ze.length*100).toFixed(1),(ue.length/$e.length*100).toFixed(1),(w.length/Ve.length*100).toFixed(1),(B.length/Je.length*100).toFixed(1),(oe.length/Ye.length*100).toFixed(1)];console.log("Silver: ",es.length);const Rt=[(Se.length/Ue.length*100).toFixed(1),(Fe.length/Be.length*100).toFixed(1),(ge.length/Me.length*100).toFixed(1),(ws.length/De.length*100).toFixed(1),(ds.length/He.length*100).toFixed(1),(hs.length/Oe.length*100).toFixed(1),(xs.length/Ge.length*100).toFixed(1),(us.length/Ze.length*100).toFixed(1),(ms.length/$e.length*100).toFixed(1),(A.length/Ve.length*100).toFixed(1),(ie.length/Je.length*100).toFixed(1),(me.length/Ye.length*100).toFixed(1)],Qt=[(qs.length/Ue.length*100).toFixed(1),(ps.length/Be.length*100).toFixed(1),(es.length/Me.length*100).toFixed(1),(js.length/De.length*100).toFixed(1),(Pe.length/He.length*100).toFixed(1),(_e.length/Oe.length*100).toFixed(1),(Xs.length/Ge.length*100).toFixed(1),(et.length/Ze.length*100).toFixed(1),(st.length/$e.length*100).toFixed(1),(tt.length/Ve.length*100).toFixed(1),(at.length/Je.length*100).toFixed(1),(nt.length/Ye.length*100).toFixed(1)],Ut=[(lt.length/Ue.length*100).toFixed(1),(rt.length/Be.length*100).toFixed(1),(ct.length/Me.length*100).toFixed(1),(ot.length/De.length*100).toFixed(1),(it.length/He.length*100).toFixed(1),(dt.length/Oe.length*100).toFixed(1),(ht.length/Ge.length*100).toFixed(1),(xt.length/Ze.length*100).toFixed(1),(ut.length/$e.length*100).toFixed(1),(mt.length/Ve.length*100).toFixed(1),(pt.length/Je.length*100).toFixed(1),(jt.length/Ye.length*100).toFixed(1)],Bt=["เขต1","เขต2","เขต3","เขต4","เขต5","เขต6","เขต7","เขต8","เขต9","เขต10","เขต11","เขต12"],Mt=[((Ue.length-(d.length+Se.length+qs.length+lt.length))/Ue.length*100).toFixed(1),((Be.length-(U.length+Fe.length+ps.length+rt.length))/Be.length*100).toFixed(1),((Me.length-(se.length+ge.length+es.length+ct.length))/Me.length*100).toFixed(1),((De.length-(J.length+ws.length+js.length+ot.length))/De.length*100).toFixed(1),((He.length-(fe.length+ds.length+Pe.length+it.length))/He.length*100).toFixed(1),((Oe.length-(o.length+hs.length+_e.length+dt.length))/Oe.length*100).toFixed(1),((Ge.length-(S.length+xs.length+Xs.length+ht.length))/Ge.length*100).toFixed(1),((Ze.length-(b.length+us.length+et.length+xt.length))/Ze.length*100).toFixed(1),(($e.length-(ue.length+ms.length+st.length+ut.length))/$e.length*100).toFixed(1),((Ve.length-(w.length+A.length+tt.length+mt.length))/Ve.length*100).toFixed(1),((Je.length-(B.length+ie.length+at.length+pt.length))/Je.length*100).toFixed(1),((Ye.length-(oe.length+me.length+nt.length+jt.length))/Ye.length*100).toFixed(1)];return e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:zs,alt:"HospitalIcon"}),e.jsx("p",{className:"text-xl text-green-700 font-bold",children:"ประเมินแล้ว"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3 text-green-700",children:[e.jsx("p",{className:"text-4xl",children:L.length}),e.jsx("p",{children:"แห่ง"})]}),e.jsxs("div",{className:"p-2 flex justify-between text-green-700",children:[e.jsx("div",{children:e.jsx("p",{children:"คิดเป็น"})}),e.jsx("div",{className:"flex",children:e.jsxs("p",{children:[n.toFixed(1)," % "]})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:zs,alt:"HospitalIcon"}),e.jsx("p",{className:"text-xl text-orange-400 font-bold",children:"ยังไม่ประเมิน"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3 text-orange-400",children:[e.jsx("p",{className:"text-4xl",children:a.length-L.length}),e.jsx("p",{children:"แห่ง"})]}),e.jsxs("div",{className:"p-2 flex justify-between text-orange-400",children:[e.jsx("div",{children:e.jsx("p",{children:"คิดเป็น"})}),e.jsx("div",{className:"flex",children:e.jsxs("p",{children:[F.toFixed(1)," % "]})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:As,alt:"Gem"}),e.jsx("p",{className:"text-xl text-blue-500 font-bold",children:"ระดับเพชร"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3 text-blue-500",children:[e.jsx("p",{className:"text-4xl",children:N.length}),e.jsx("p",{children:"แห่ง"})]}),e.jsxs("div",{className:"p-2 flex justify-between text-blue-500",children:[e.jsx("div",{children:e.jsx("p",{children:"คิดเป็น"})}),e.jsx("div",{className:"flex",children:e.jsxs("p",{children:[re.toFixed(1)," % "]})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:gs,alt:"Gold"}),e.jsx("p",{className:"text-xl  text-yellow-500 font-bold",children:"ระดับทอง"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3 text-yellow-500",children:[e.jsx("p",{className:"text-4xl",children:ne.length}),e.jsx("p",{children:"แห่ง"})]}),e.jsxs("div",{className:"p-2 flex justify-between text-yellow-500",children:[e.jsx("div",{children:e.jsx("p",{children:"คิดเป็น"})}),e.jsx("div",{className:"flex",children:e.jsxs("p",{children:[ae.toFixed(1)," % "]})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:as,alt:"Silver"}),e.jsx("p",{className:"text-xl text-slate-400 font-bold",children:"ระดับเงิน"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3 text-slate-400",children:[e.jsx("p",{className:"text-4xl",children:Y.length}),e.jsx("p",{children:"แห่ง"})]}),e.jsxs("div",{className:"p-2 flex justify-between  text-slate-400",children:[e.jsx("div",{children:e.jsx("p",{children:"คิดเป็น"})}),e.jsx("div",{className:"flex",children:e.jsxs("p",{children:[P.toFixed(1)," % "]})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex justify-center items-center bg-amber-50 w-12 h-12 rounded-full shadow-md",children:e.jsx(bs,{size:40,className:"text-red-500"})}),e.jsx("p",{className:"text-xl text-red-500 font-bold",children:"ไม่ผ่าน"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3 text-red-500",children:[e.jsx("p",{className:"text-4xl",children:$.length}),e.jsx("p",{children:"แห่ง"})]}),e.jsxs("div",{className:"p-2 flex justify-between  text-red-500",children:[e.jsx("div",{children:e.jsx("p",{children:"คิดเป็น"})}),e.jsx("div",{className:"flex",children:e.jsxs("p",{children:[x.toFixed(1)," % "]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("p",{children:"จำนวน (เปอร์เซ็นต์) โรงพยาบาลที่ประเมินโรงพยาบาลอัจฉริยะรายเขต"})}),e.jsx(aa,{height:350,series:[{data:At,label:"เพชร",id:"gemID",stack:"total",color:"#0088FE"},{data:Rt,label:"ทอง",id:"goldID",stack:"total",color:"#FFDC73"},{data:Qt,label:"เงิน",id:"silverID",stack:"total",color:"#E0E0E0"},{data:Ut,label:"ไม่ผ่าน",id:"noPassID",stack:"total",color:"#fc5151"},{data:Mt,label:"ยังไม่ประเมิน",id:"notEvaluateID",stack:"total",color:"#FCA951"}],xAxis:[{data:Bt,scaleType:"band"}],yAxis:[{min:0,max:100}],barLabel:s=>`${s.value}%`,sx:{"& .MuiBarLabel-root":{fill:"white",fontSize:10}}})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("p",{children:"จำนวน (เปอร์เซ็นต์) โรงพยาบาลในแต่ละระดับที่ได้จากการประเมิน"})}),e.jsx("div",{className:"flex justify-center items-center mt-5",children:e.jsx(na,{series:[{data:K,innerRadius:80,outerRadius:130,arcLabel:D}],height:300,slotProps:{legend:{hidden:!1}},sx:{[`& .${la.root}`]:{fill:"white",fontSize:12}}})})]})]}),e.jsx("div",{className:"bg-white rounded-md shadow-md mt-3",children:e.jsx(Fa,{})})]})},La=()=>(pe("Checklist บันทึกข้อมูล"),e.jsx("div",{children:"CheckList"})),Pa=()=>(pe("คู่มือการบันทึกข้อมูล"),e.jsx("div",{children:"UserGuide"})),Lt="/smarthosp-quest/assets/SmartHospital-Logo-skdE5XsK.png",Pt="/smarthosp-quest/assets/Plogo-f6506bc1-BFPUxwqs.png",Ca=async a=>await Z.post("https://bdh-service.moph.go.th/api/smarthosp/registerByProviderID",a),ka=async a=>await Z.post("https://bdh-service.moph.go.th/api/smarthosp/loginByProviderID",a),Ea=async a=>await Z.post("https://bdh-service.moph.go.th/api/smarthosp/current-user",{},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}),Ta=async a=>await Z.post("https://bdh-service.moph.go.th/api/smarthosp/current-admin",{},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}}),Ct=async a=>await Z.post("https://moph.id.th/api/v1/token",{grant_type:a.grant_type,code:a.code,redirect_uri:a.redirect_uri,client_id:a.client_id,client_secret:a.client_secret},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),kt=async a=>await Z.post("https://provider.id.th/api/v1/services/token",a),Et=async(a,l,p)=>await Z.get("https://provider.id.th/api/v1/services/profile",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a,"client-id":l,"secret-key":p}}),Aa=(a,l)=>({user:null,token:null,logout:()=>{a({user:null,token:null})},actionLogin:async p=>{try{const h=await ka(p);a({user:h.data.payload.user,token:h.data.token})}catch(h){console.log(h.response.data),V.warning(h.response.data.message)}}}),Ra={name:"global-store",storage:ca(()=>localStorage)},O=oa(ia(Aa,Ra)),Qa=()=>{pe("Login เข้าใช้งาน");const a=be(),l=It().search;O(Q=>Q.actionLogin),O(Q=>Q.user);const[p,h]=c.useState([]),[z,E]=c.useState(!1),[q,M]=c.useState({hcode:"",hname_th:"",position_id:"",position:"",address:""}),[L,G]=c.useState(!1),[T]=r.useForm(),u=new URLSearchParams(l).get("code");u&&Ct({grant_type:"authorization_code",code:u,redirect_uri:"https://bdh-service.moph.go.th/smarthosp-quest/register/",client_id:"019274d1-ac2a-7352-b73a-ca66a5b135fb",client_secret:"97e76d1d6eff9ac1ee377d598c0fe995f018a9c3"}).then(te=>{const W={client_id:"49fba4c4-2c60-4d3f-b8da-3925d1ad7e65",secret_key:"F83E767464E7334923C43D1C1443B",token_by:"Health ID",token:te.data.data.access_token};kt(W).then(y=>{const C=y.data.data.access_token;Et(C,"49fba4c4-2c60-4d3f-b8da-3925d1ad7e65","F83E767464E7334923C43D1C1443B").then(ne=>{console.log("ProviderProfile: ",ne.data.data),h(ne.data.data);const Y=ne.data.data.organization;Y.length>0?E(!0):(M(Y),G(!0))}).catch(ne=>{console.log(ne)})}).catch(y=>{console.log(y)})}).catch(te=>{console.log(te)});const v=p.organization,_=()=>{E(!1)},i=()=>{E(!1),G(!1)},f=Q=>{M(Q.target.value),E(!1),G(!0)},j={email:p.email,title_th:p.title_th,firstname_th:p.firstname_th,lastname_th:p.lastname_th,hcode:q.hcode,hname_th:q.hname_th,position_id:q.position_id,position:q.position,address:q.address,level:"4",objective:"responder"};c.useEffect(()=>{T.setFieldsValue({hcode:j.hcode,hname_th:j.hname_th,email:j.email,title_th:j.title_th,firstname_th:j.firstname_th,lastname_th:j.lastname_th,position_id:j.position_id,position:j.position,district:j.address.district,province:j.address.province,level:j.level,objective:j.objective})});const I=[{value:"01",label:"เขตสุขภาพที่ 1"},{value:"02",label:"เขตสุขภาพที่ 2"},{value:"03",label:"เขตสุขภาพที่ 3"},{value:"04",label:"เขตสุขภาพที่ 4"},{value:"05",label:"เขตสุขภาพที่ 5"},{value:"06",label:"เขตสุขภาพที่ 6"},{value:"07",label:"เขตสุขภาพที่ 7"},{value:"08",label:"เขตสุขภาพที่ 8"},{value:"09",label:"เขตสุขภาพที่ 9"},{value:"10",label:"เขตสุขภาพที่ 10"},{value:"11",label:"เขตสุขภาพที่ 11"},{value:"12",label:"เขตสุขภาพที่ 12"},{value:"13",label:"เขตสุขภาพที่ 13"}],k=async Q=>{console.log(Q),await Ca(Q).then(te=>{V.success(te.data.message),G(!1),setTimeout(()=>a("/smarthosp-quest/login"),5e3)}).catch(te=>{console.log(te),V.warning(te.response.data.message)})},le=Q=>{console.log("Failed",Q)};return e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("div",{}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-white rounded-md shadow-md w-full p-2",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex justify-center items-center mb-5",children:e.jsx("img",{className:"mt-5",src:Lt})}),e.jsx("div",{className:"text-lg flex justify-center mb-4",children:e.jsx("h1",{style:{color:"#037840"},children:"ลงทะเบียนใช้งานด้วย"})}),e.jsx("div",{children:e.jsx(H,{className:"h-12",block:!0,href:"https://moph.id.th/oauth/redirect?client_id=019274d1-ac2a-7352-b73a-ca66a5b135fb&redirect_uri=https://bdh-service.moph.go.th/smarthosp-quest/register/&response_type=code",children:e.jsx("img",{className:"w-32 p-2",src:Pt})})})]})}),e.jsxs(xe,{title:e.jsxs("div",{style:{justifyContent:"center",display:"flex",marginLeft:"auto",marginRight:"auto"},children:[e.jsx(he,{style:{color:"orange"}}),"  ",e.jsx("span",{children:"เลือกหน่วยบริการที่ต้องการล็อกอิน"})]}),open:z,onOk:_,onCancel:i,footer:null,width:400,style:{top:20},children:[e.jsx("hr",{}),e.jsx(de.Group,{onChange:f,children:e.jsx(qe,{direction:"vertical",children:v&&v.map((Q,te)=>e.jsx(de.Button,{value:Q,style:{width:"350px"},children:Q.hname_th+" ["+Q.hcode+"]"},te))})})]}),e.jsx(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{style:{color:"orange"}}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"ลงทะเบียนเข้าใช้งาน"})]}),open:L,onOk:T.submit,onCancel:i,width:1e3,style:{top:20},children:e.jsx(r,{name:"formCreateUser",form:T,layout:"vertical",onFinish:k,onFinishFailed:le,className:"mt-2",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-full p-2",children:e.jsxs("div",{className:"border rounded-md px-2 py-2 mb-2 h-full",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("p",{className:"text-lg font-bold m-2",children:e.jsx("u",{children:"ข้อมูลบุคคล"})})}),e.jsx(r.Item,{name:"firstname_th",label:e.jsx("b",{children:"ชื่อ :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(g,{readOnly:!0})}),e.jsx(r.Item,{name:"lastname_th",label:e.jsx("b",{children:"นามสกุล :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(g,{readOnly:!0})}),e.jsx(r.Item,{name:"position_id",label:e.jsx("b",{children:"รหัสตำแหน่ง :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(g,{readOnly:!0})}),e.jsx(r.Item,{name:"position",label:e.jsx("b",{children:"ตำแหน่ง :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(g,{readOnly:!0})}),e.jsx(r.Item,{name:"email",label:e.jsx("b",{children:"อีเมล :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(g,{readOnly:!0})})]})}),e.jsx("div",{className:"w-full p-2",children:e.jsxs("div",{className:"border rounded-md px-2 py-2 mb-2 h-full",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("p",{className:"text-lg font-bold m-2",children:e.jsx("u",{children:"ที่อยู่หน่วยบริการ"})})}),e.jsx(r.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(g,{readOnly:!0})}),e.jsx(r.Item,{name:"hname_th",label:e.jsx("b",{children:"ชื่อหน่วยบริการ :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(g,{readOnly:!0})}),e.jsx(r.Item,{name:"district",label:e.jsx("b",{children:"อำเภอ :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(g,{readOnly:!0})}),e.jsx(r.Item,{name:"province",label:e.jsx("b",{children:"จังหวัด :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(g,{readOnly:!0})}),e.jsx(r.Item,{name:"zone",label:e.jsx("b",{children:"เขตสุขภาพ :"}),rules:[{required:!0,message:"กรุณาระบุเขตสุขภาพ!"}],style:{marginBottom:"10px"},children:e.jsx(X,{options:I,placeholder:"กรุณาระบุเขตสุขภาพ..."})})]})}),e.jsx("div",{className:"w-full p-2",children:e.jsxs("div",{className:"border rounded-md px-2 py-2 mb-2 h-full",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("p",{className:"text-lg font-bold m-2",children:e.jsx("u",{children:"ระดับหน่วยงาน"})})}),e.jsx(r.Item,{name:"level",label:e.jsx("b",{children:"ระดับหน่วยงาน :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(de.Group,{onChange:Q=>Q.target.value,children:e.jsxs(qe,{direction:"vertical",children:[e.jsx(de,{value:"4",children:"หน่วยบริการ"}),e.jsx(de,{value:"3",children:"จังหวัด"}),e.jsx(de,{value:"2",children:"เขตสุขภาพ"}),e.jsx(de,{value:"1",children:"ส่วนกลาง"})]})})}),e.jsx(r.Item,{name:"objective",label:e.jsx("b",{children:"ประเภทผู้ใช้ :"}),rules:[{required:!0}],style:{marginBottom:"10px"},children:e.jsx(de.Group,{onChange:Q=>Q.target.value,children:e.jsxs(qe,{direction:"vertical",children:[e.jsx(de,{value:"zone_approve",children:"คกก.รพ.อัจฉริยะเขตฯ Approve"}),e.jsx(de,{value:"prov_approve",children:"คกก.รพ.อัจฉริยะ สสจ. Approve"}),e.jsx(de,{value:"responder",children:"ผู้ประเมินโรงพยาบาลตนเอง"})]})})})]})})]})})})]}),e.jsx("div",{})]})},Ua=()=>{pe("Login เข้าใช้งาน");const a=be(),l=It().search,p=O(f=>f.actionLogin),h=O(f=>f.user),[z,E]=c.useState([]),[q,M]=c.useState(!1),[L,G]=c.useState({hcode:"",hname_th:"",position_id:"",position:"",address:""}),[T]=r.useForm(),u=new URLSearchParams(l).get("code");u&&Ct({grant_type:"authorization_code",code:u,redirect_uri:"https://bdh-service.moph.go.th/smarthosp-quest/login/",client_id:"019274d1-ac2a-7352-b73a-ca66a5b135fb",client_secret:"97e76d1d6eff9ac1ee377d598c0fe995f018a9c3"}).then(j=>{const k={client_id:"49fba4c4-2c60-4d3f-b8da-3925d1ad7e65",secret_key:"F83E767464E7334923C43D1C1443B",token_by:"Health ID",token:j.data.data.access_token};kt(k).then(le=>{const Q=le.data.data.access_token;Et(Q,"49fba4c4-2c60-4d3f-b8da-3925d1ad7e65","F83E767464E7334923C43D1C1443B").then(W=>{console.log("ListHosp: ",W.data.organization),E(W.data.data);const y=W.data.data.organization;y.length>0?M(!0):(G(y),setRegisterModal(!0))}).catch(W=>{console.log(W.response.data)})}).catch(le=>{console.log(le.response.data)})}).catch(j=>{console.log(j.response.data)});const v=z.organization,_=()=>{M(!1),setRegisterModal(!1)};z.email,z.firstname_th,z.lastname_th,L.hcode;const i=f=>{const j={email:z.email,firstname_th:z.firstname_th,lastname_th:z.lastname_th,hcode:f.hospital.hcode,level:f.level,objective:f.objective};console.log("Values: ",j),p(j);const I=h.role,k=h.objective;I&&(M(!1),V.success(`ยินดีต้อนรับคุณ ${h.firstname_th+" "+h.lastname_th}`)),I==="admin"&&k==="Administrator"?setTimeout(()=>a("/smarthosp-quest/admin"),5e3):I==="user"&&k==="responder"?setTimeout(()=>a("/smarthosp-quest/user/responder"),5e3):I==="user"&&k==="prov_approve"?setTimeout(()=>a("/smarthosp-quest/user/prov-approve"),5e3):I==="user"&&k==="zone_approve"&&setTimeout(()=>a("/smarthosp-quest/user/zone-approve"),5e3)};return e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("div",{}),e.jsx("div",{children:e.jsx("div",{className:"bg-white rounded-md shadow-md w-full p-2",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex justify-center items-center mb-5",children:e.jsx("img",{className:"mt-5",src:Lt})}),e.jsx("div",{className:"text-lg flex justify-center mb-4",children:e.jsx("h1",{style:{color:"#037840"},children:"ล็อกอินเข้าใช้งานด้วย"})}),e.jsx("div",{children:e.jsx(H,{className:"h-12",block:!0,href:"https://moph.id.th/oauth/redirect?client_id=019274d1-ac2a-7352-b73a-ca66a5b135fb&redirect_uri=https://bdh-service.moph.go.th/smarthosp-quest/login/&response_type=code",children:e.jsx("img",{className:"w-32 p-2",src:Pt})})})]})})}),e.jsx("div",{}),e.jsxs(xe,{title:e.jsxs("div",{style:{justifyContent:"center",display:"flex",marginLeft:"auto",marginRight:"auto"},children:[e.jsx(he,{style:{color:"orange"}}),"  ",e.jsx("span",{children:"เลือกหน่วยบริการที่ต้องการล็อกอิน"})]}),open:q,onCancel:_,footer:null,width:400,style:{top:20},children:[e.jsx("hr",{}),e.jsxs(r,{name:"form-login",layout:"vertical",onFinish:i,children:[e.jsx(r.Item,{name:"hospital",label:e.jsx("b",{children:"หน่วยบริการ :"}),rules:[{required:!0,message:"กรุณาคลิกเลือกหน่วยบริการ"}],children:e.jsx(de.Group,{onChange:f=>f.target.value,children:e.jsx(qe,{direction:"vertical",children:v&&v.map((f,j)=>e.jsx(de.Button,{value:f,style:{width:"350px"},children:f.hname_th+" ["+f.hcode+"]"},j))})})}),e.jsx(r.Item,{name:"level",label:e.jsx("b",{children:"ระดับหน่วยงาน :"}),rules:[{required:!0,message:"กรุณาเลือกระดับหน่วยงาน"}],children:e.jsx(de.Group,{onChange:f=>f.target.value,children:e.jsxs(qe,{direction:"vertical",children:[e.jsx(de,{value:"4",children:"หน่วยบริการ"}),e.jsx(de,{value:"3",children:"จังหวัด"}),e.jsx(de,{value:"2",children:"เขตสุขภาพ"}),e.jsx(de,{value:"1",children:"ส่วนกลาง (กระทรวงสาธารณสุข)"})]})})}),e.jsx(r.Item,{children:e.jsx(H,{block:!0,type:"primary",htmlType:"submit",size:"",children:"ล็อกอินเข้าใช้งาน"})})]})]})]})},ts=()=>(pe("ติดต่อเรา"),e.jsxs("div",{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{children:"สำนักสุขภาพดิจิทัล สำนักงานปลัดกระทรวงสาธารณสุข"}),e.jsx("p",{children:"สำนักงานใหม่ อาคาร 6 ชัน 7 ตึกสำนักงานปลัดกระทรวงสาธารณสุข"})]}),e.jsx("div",{})]})),Tt=()=>{const[a,l]=c.useState(3),[p,h]=c.useState(!1);return c.useEffect(()=>{const z=setInterval(()=>{l(E=>(E===1&&(clearInterval(z),h(!0)),E-1))},1e3);return()=>clearInterval(z)},[]),p?e.jsx(Xt,{to:"/smarthosp-quest/"}):e.jsxs("div",{className:"text-center",children:["No Permission, redirect in ",a]})},Fs=({element:a})=>{const l=O(E=>E.user),p=O(E=>E.token),[h,z]=c.useState(!1);return c.useEffect(()=>{l&&p&&Ea(p).then(E=>{z(!0)}).catch(E=>{z(!1)})},[]),h?a:e.jsx(Tt,{})},Ba=({element:a})=>{const l=O(E=>E.user),p=O(E=>E.token),[h,z]=c.useState(!1);return console.log("pAdmin: ",l,p),c.useEffect(()=>{l.role&&p&&Ta(p).then(E=>{z(!0)}).catch(E=>{console.log(E),z(!1)})},[]),h?a:e.jsx(Tt,{})},{confirm:Ma}=xe,Da=()=>{const a=O(h=>h.logout),l=be(),p=()=>{Ma({title:"คุณต้องการออกจากระบบหรือไม่?",icon:e.jsx(he,{}),content:"",onOk(){a(),l("/smarthosp-quest/")},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"bg-green-800 w-64 text-gray-100 flex flex-col h-screen",children:[e.jsx("div",{className:"h-24 bg-green-900 flex items-center justify-center gap-1",children:e.jsx("div",{children:e.jsx("img",{src:os})})}),e.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[e.jsxs(ce,{to:"/smarthosp-quest/user",end:!0,className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ns,{className:"mr-2"}),"Dashboard"]}),e.jsxs(ce,{to:"result-infrastructure",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"ผลประเมินด้านโครงสร้าง"]}),e.jsxs(ce,{to:"result-management",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"ผลประเมินด้านบริหารจัดการ"]}),e.jsxs(ce,{to:"result-service",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"ผลประเมินด้านการบริหาร"]}),e.jsxs(ce,{to:"result-people",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"ผลประเมินด้านบุคลากร"]}),e.jsxs(ce,{to:"contact-us",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ls,{className:"mr-2"}),"ติดต่อเรา"]})]}),e.jsx("footer",{className:"px-4 py-4 space-y-2",children:e.jsxs(ce,{onClick:p,className:"text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(vs,{className:"mr-2"}),"Logout"]})})]})},Ha=()=>{const a=O(p=>p.token),l=O(p=>p.user);return e.jsx("header",{className:"relative bg-white h-16 flex items-center px-6",children:e.jsx("div",{className:"absolute right-5",children:e.jsx("div",{className:"flex items-center gap-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx(_s,{className:"bg-green-600",icon:e.jsx(fs,{})}),e.jsxs("p",{children:[l.firstname_th+" "+l.lastname_th+" ["+l.hcode+"]"," [",l.objective,"]"]})]}):null})})})},Oa=()=>e.jsxs("div",{className:"flex h-screen",children:[e.jsx(Da,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Ha,{}),e.jsx("main",{className:"flex-1 p-6 bg-gray-100 overflow-y-auto",children:e.jsx(rs,{})})]})]}),Ga=()=>{const a=O(i=>i.user),l=O(i=>i.token),[p,h]=c.useState([]),[z,E]=c.useState({cyber_level:"",cyber_image:"",usersId:"",hcode:""});c.useEffect(()=>{M(),L()},[]);const q=a.hcode,M=async()=>{await zt(l,q).then(i=>{h(i.data)}).catch(i=>{console.log(i)})},L=async()=>{await Ks(l,a.hcode).then(i=>{E(i.data)}).catch(i=>{console.log(i)})},G=p.map(i=>({...i})),T=G.filter(i=>i.category_questId===1),u=G.filter(i=>i.category_questId===2),v=G.filter(i=>i.category_questId===3),_=G.filter(i=>i.category_questId===4);return p.reduce((i,f)=>i+Number(f.total_point),0),p.reduce((i,f)=>i+Number(f.require_point),0),e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(ft,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านโครงสร้าง"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนเต็ม"}),T.map(i=>i.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/300"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[i.total_point,"/300"]})),T.map(i=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(i.total_point/300*100).toFixed(1)," %"]}))]}),e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนจำเป็น"}),T.map(i=>i.require_point===null?e.jsx("p",{className:"text-2xl text-green-700",children:"0/170"}):e.jsxs("p",{className:"text-2xl text-green-700",children:[i.require_point,"/170"]})),T.map(i=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(i.require_point/170*100).toFixed(1)," %"]}))]})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(_t,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านบริหารจัดการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนเต็ม"}),u.map(i=>i.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/300"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[i.total_point,"/300"]})),u.map(i=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(i.total_point/300*100).toFixed(1)," %"]}))]}),e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนจำเป็น"}),u.map(i=>i.require_point===null?e.jsx("p",{className:"text-2xl text-green-700",children:"0/170"}):e.jsxs("p",{className:"text-2xl text-green-700",children:[i.require_point,"/170"]})),u.map(i=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(i.require_point/170*100).toFixed(1)," %"]}))]})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(yt,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านการบริการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนเต็ม"}),v.map(i=>i.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/300"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[i.total_point,"/300"]})),v.map(i=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(i.total_point/300*100).toFixed(1)," %"]}))]}),e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนจำเป็น"}),v.map(i=>i.require_point===null?e.jsx("p",{className:"text-2xl text-green-700",children:"0/170"}):e.jsxs("p",{className:"text-2xl text-green-700",children:[i.require_point,"/170"]})),v.map(i=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(i.require_point/170*100).toFixed(1)," %"]}))]})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(Nt,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านบุคลากร"})]}),e.jsx("div",{className:"flex justify-center items-baseline gap-2 my-3",children:e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนเต็ม"}),_.map(i=>i.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/100"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[i.total_point,"/100"]})),_.map(i=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(i.total_point/100*100).toFixed(1)," %"]}))]})})]})]})})},Za=()=>e.jsx("div",{children:e.jsx(Ga,{})}),$a=()=>{const a=O(n=>n.user),l=O(n=>n.token),[p,h]=c.useState([]),[z,E]=c.useState([]),[q,M]=c.useState(),[L,G]=c.useState([]),[T,u]=c.useState([]);c.useEffect(()=>{k(),le(),_(),i(),f()},[]);const v=a.hcode,_=async()=>{await Le(l).then(n=>{u(n.data)}).catch(n=>{console.log(n)})},i=async()=>{await Ft(l,v).then(n=>{G(n.data)}).catch(n=>{console.log(n)})},f=async()=>{await va(l,v).then(n=>{E(n.data)}).catch(n=>{console.log(n)})},j=L.map(n=>({id:n.id,category_questId:n.category_questId,questId:n.questId,sub_questId:n.sub_questId,sub_quest_name:n.sub_quests.sub_quest_name,check:n.check.split(","),hcode:n.hcode,userId:n.userId,file_name:n.file_name,ssj_approve:n.ssj_approve,zone_approve:n.zone_approve,createdAt:n.createdAt,updatedAt:n.updatedAt}));T.map(n=>({id:n.id,sub_questId:n.sub_questId,choice:n.choice,sub_quest_listname:n.sub_quest_listname,sub_quest_total_point:n.sub_quest_total_point,sub_quest_require_point:n.sub_quest_require_point,description:n.description,necessary:n.necessary,createdAt:n.createdAt,updatedAt:n.updatedAt})).map(n=>j.map(F=>n.choice===F.check));const k=async()=>{await zt(l,v).then(n=>{h(n.data)}).catch(n=>{console.log(n)})},le=async()=>{await Ks(l,a.hcode).then(n=>{M(n.data)}).catch(n=>{console.log(n)})},Q=z.map(n=>({category_questId:Number(n.category_questId),sub_quest_require_point:Number(n.sub_quest_require_point),sub_quest_total_point:Number(n.sub_quest_total_point)})),te=Q.filter(n=>n.category_questId===1),ee=Q.filter(n=>n.category_questId===2),W=Q.filter(n=>n.category_questId===3),y=Q.filter(n=>n.category_questId===4),C=j.filter(n=>n.category_questId===1),m=j.filter(n=>n.category_questId===2),N=j.filter(n=>n.category_questId===3),ne=j.filter(n=>n.category_questId===4),Y=[...new Map(C.map(n=>[n.zone_approve,n])).values()],R=[...new Map(m.map(n=>[n.zone_approve,n])).values()],$=[...new Map(N.map(n=>[n.zone_approve,n])).values()],re=[...new Map(ne.map(n=>[n.zone_approve,n])).values()],ae=z.reduce((n,F)=>n+Number(F.sub_quest_total_point),0),P=z.reduce((n,F)=>n+Number(F.sub_quest_require_point),0);return e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsx("div",{className:"flex justify-center items-center gap-2",children:e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"คะแนนที่ได้อยู่ในระดับ"})}),e.jsx("div",{className:"flex justify-center items-baseline gap-2 my-3",children:ae<600?e.jsx("div",{style:{textAlign:"center"},children:e.jsx("p",{className:"text-4xl font-bold text-red-500",children:"ไม่ผ่าน!"})}):ae>=600&&ae<700?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{className:"text-4xl font-bold text-slate-400",children:"เงิน"}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("img",{className:"w-32",src:as,alt:"Gem"})})]}):ae>=700&&P<510?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{className:"text-4xl font-bold text-slate-400",children:"เงิน"}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("img",{className:"w-32",src:as,alt:"Gem"})})]}):ae>=700&&ae<800&&P==510?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{className:"text-4xl font-bold text-yellow-600",children:"ทอง"}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("img",{className:"w-32",src:gs,alt:"Gem"})})]}):ae>=800&&P<510?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{className:"text-4xl font-bold text-slate-400",children:"เงิน"}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("img",{className:"w-32",src:as,alt:"Gem"})})]}):ae>=800&&P==510&&(q==null?void 0:q.cyber_level)!="GREEN"?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{className:"text-4xl font-bold text-yellow-600",children:"ทอง"}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("img",{className:"w-32",src:gs,alt:"Gem"})})]}):ae>=800&&P==510&&(q==null?void 0:q.cyber_level)=="GREEN"?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{className:"text-4xl font-bold text-orange-400",children:"เพชร"}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("img",{className:"w-32",src:As,alt:"Gem"})})]}):null})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(ft,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านโครงสร้าง"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 my-3",children:[e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนที่ได้"}),te.map(n=>n.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/300"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[n.sub_quest_total_point,"/300"]})),te.map(n=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(n.sub_quest_total_point/300*100).toFixed(1)," %"]}))]}),e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนจำเป็น"}),te.map(n=>n.require_point===null?e.jsx("p",{className:"text-2xl text-green-700",children:"0/170"}):e.jsxs("p",{className:"text-2xl text-green-700",children:[n.sub_quest_require_point,"/170"]})),te.map(n=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(n.sub_quest_require_point/170*100).toFixed(1)," %"]}))]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.สสจ.) : "}),Y==null?void 0:Y.map(n=>n.ssj_approve==!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.เขตฯ.) : "}),Y==null?void 0:Y.map(n=>n.zone_approve===!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(_t,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านบริหารจัดการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 my-3",children:[e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนที่ได้"}),ee.map(n=>n.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/300"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[n.sub_quest_total_point,"/300"]})),ee.map(n=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(n.sub_quest_total_point/300*100).toFixed(1)," %"]}))]}),e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนจำเป็น"}),ee.map(n=>n.require_point===null?e.jsx("p",{className:"text-2xl text-green-700",children:"0/170"}):e.jsxs("p",{className:"text-2xl text-green-700",children:[n.sub_quest_require_point,"/170"]})),ee.map(n=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(n.sub_quest_require_point/170*100).toFixed(1)," %"]}))]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.สสจ.) : "}),R==null?void 0:R.map(n=>n.ssj_approve==!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.เขตฯ.) : "}),R==null?void 0:R.map(n=>n.zone_approve===!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsx("div",{className:"flex justify-center items-center gap-2",children:e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"คะแนนรวมทุกด้าน"})}),e.jsxs("div",{className:"p-2 mt-10 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"คะแนนที่ได้รวม"})}),e.jsx("div",{className:"flex text-green-700",children:ae<600?e.jsx("p",{className:"text-red-500",children:ae}):ae>=600&&ae<700?e.jsx("p",{className:"text-slate-400",children:ae}):ae>=700&&ae<800?e.jsx("p",{className:"text-yellow-600",children:ae}):ae>=800?e.jsx("p",{className:"text-green-700",children:ae}):null})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"คะแนนจำเป็นรวม"})}),e.jsx("div",{className:"flex text-green-700",children:P<510?e.jsx("p",{className:"text-red-500",children:P}):e.jsx("p",{className:"text-green-700",children:P})})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"ระดับ Cyber security"})}),e.jsx("div",{className:"flex text-green-700",children:(q==null?void 0:q.cyber_level)==="GREEN"?e.jsx("p",{className:"text-green-700",children:q==null?void 0:q.cyber_levelname}):(q==null?void 0:q.cyber_level)==="YELLOW"?e.jsx("p",{className:"text-yellow-400",children:q==null?void 0:q.cyber_levelname}):(q==null?void 0:q.cyber_level)==="RED"?e.jsx("p",{className:"text-red-500",children:q==null?void 0:q.cyber_levelname}):e.jsx("p",{className:"text-red-500",children:"-"})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(yt,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านการบริการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 my-3",children:[e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนที่ได้"}),W.map(n=>n.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/300"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[n.sub_quest_total_point,"/300"]})),W.map(n=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(n.sub_quest_total_point/300*100).toFixed(1)," %"]}))]}),e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนจำเป็น"}),W.map(n=>n.require_point===null?e.jsx("p",{className:"text-2xl text-green-700",children:"0/170"}):e.jsxs("p",{className:"text-2xl text-green-700",children:[n.sub_quest_require_point,"/170"]})),W.map(n=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(n.sub_quest_require_point/170*100).toFixed(1)," %"]}))]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.สสจ.) : "}),$==null?void 0:$.map(n=>n.ssj_approve==!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.เขตฯ.) : "}),$==null?void 0:$.map(n=>n.zone_approve===!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-full shadow-md flex justify-center items-center",children:e.jsx(Nt,{className:"text-green-700",size:30})}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ด้านบุคลากร"})]}),e.jsx("div",{className:"flex justify-center items-baseline gap-1 my-3",children:e.jsxs("div",{className:"w-36 text-center border rounded-md p-5",children:[e.jsx("p",{className:"",children:"คะแนนที่ได้"}),y.map(n=>n.total_point===null?e.jsx("p",{className:"text-2xl text-blue-700",children:"0/100"}):e.jsxs("p",{className:"text-2xl text-blue-700",children:[n.sub_quest_total_point,"/100"]})),y.map(n=>e.jsxs("p",{className:"text-sm mt-2",children:["คิดเป็น ",(n.sub_quest_total_point/100*100).toFixed(1)," %"]}))]})}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.สสจ.) : "}),re==null?void 0:re.map(n=>n.ssj_approve==!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("p",{className:"text-slate-400",children:"การอนุมัติ(คกก.เขตฯ.) : "}),re==null?void 0:re.map(n=>n.zone_approve===!0?e.jsx("p",{className:"text-green-500",children:"อนุมัติแล้ว"}):e.jsx("p",{className:"text-red-500",children:"ยังไม่อนุมัติ"}))]})]})]})})},vt=()=>e.jsx("div",{children:e.jsx($a,{})}),{confirm:Va}=xe,Ja=()=>{const a=O(h=>h.logout),l=be(),p=()=>{Va({title:"คุณต้องการออกจากระบบหรือไม่?",icon:e.jsx(he,{}),content:"",onOk(){a(),l("/smarthosp-quest/")},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"bg-green-800 w-64 text-gray-100 flex flex-col h-screen",children:[e.jsx("div",{className:"h-24 bg-green-900 flex items-center justify-center gap-1",children:e.jsx("div",{children:e.jsx("img",{src:os})})}),e.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[e.jsxs(ce,{to:"/smarthosp-quest/admin",end:!0,className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ns,{className:"mr-2"}),"Dashboard"]}),e.jsxs(ce,{to:"manage-user",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(wt,{className:"mr-2"}),"จัดการข้อมูลผู้ใช้งาน (เขตฯ)"]}),e.jsxs(ce,{to:"manage-topic",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Jt,{className:"mr-2"}),"จัดการข้อมูลด้านการประเมิน"]}),e.jsxs(ce,{to:"manage-quest",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(bt,{className:"mr-2"}),"จัดการข้อมูลเกณฑ์หลัก"]}),e.jsxs(ce,{to:"manage-sub-quest",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(bt,{className:"mr-2"}),"จัดการข้อมูลเกณฑ์ย่อย"]}),e.jsxs(ce,{to:"report-centre",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Yt,{className:"mr-2"}),"รายงานผลการประเมิน"]}),e.jsxs(ce,{to:"contact-us",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ls,{className:"mr-2"}),"ติดต่อเรา"]})]}),e.jsx("footer",{className:"px-4 py-4 space-y-2",children:e.jsxs(ce,{onClick:p,className:"text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(vs,{className:"mr-2"}),"Logout"]})})]})},Ya=()=>{const a=O(p=>p.token),l=O(p=>p.user);return e.jsx("header",{className:"relative bg-white h-16 flex items-center px-6",children:e.jsx("div",{className:"absolute right-5",children:e.jsx("div",{className:"flex items-center gap-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx(_s,{className:"bg-green-600",icon:e.jsx(fs,{})}),e.jsxs("p",{children:[l.firstname_th+" "+l.lastname_th+" ["+l.hcode+"]"," [",l.objective,"]"]})]}):null})})})},Ka=()=>e.jsxs("div",{className:"flex h-screen",children:[e.jsx(Ja,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Ya,{}),e.jsx("main",{className:"flex-1 p-6 bg-gray-100 overflow-y-auto",children:e.jsx(rs,{})})]})]}),Wa=async a=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getListUsersZoneApprove",{headers:{Authorization:"Bearer "+a}}),Xa=async(a,l)=>await Z.get(`https://bdh-service.moph.go.th/api/smarthosp/getListUsersByProv?province=${l}`,{headers:{Authorization:"Bearer "+a}}),en=async(a,l)=>await Z.get(`https://bdh-service.moph.go.th/api/smarthosp/getListUsersByZone?zone=${l}`,{headers:{Authorization:"Bearer "+a}}),sn=async(a,l)=>await Z.put("https://bdh-service.moph.go.th/api/smarthosp/changeRole",l,{headers:{Authorization:"Bearer "+a}}),Ws=async(a,l)=>await Z.put("https://bdh-service.moph.go.th/api/smarthosp/changeStatus",l,{headers:{Authorization:"Bearer "+a}}),tn=async(a,l)=>await Z.put("https://bdh-service.moph.go.th/api/smarthosp/changeObjective",l,{headers:{Authorization:"Bearer "+a}}),an=async(a,l)=>await Z.delete("https://bdh-service.moph.go.th/api/smarthosp/removeUser/"+l,{headers:{Authorization:"Bearer "+a}}),nn=async(a,l)=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/approveUserOnProv/"+l,{headers:{Authorization:"Bearer "+a}}),ln=async(a,l)=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/notApproveUserOnProv/"+l,{headers:{Authorization:"Bearer "+a}}),rn=async(a,l)=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/approveUserOnZone/"+l,{headers:{Authorization:"Bearer "+a}}),cn=async(a,l)=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/notApproveUserOnZone/"+l,{headers:{Authorization:"Bearer "+a}});ve.extend(cs);const{confirm:on}=xe,dn=()=>{const a=O(m=>m.token),[l,p]=c.useState([]),[h,z]=c.useState([]),[E,q]=c.useState(!1),[M]=r.useForm(),[L,G]=c.useState(!1);c.useEffect(()=>{_(a)},[]);const T=[{id:1,zone:"01",zone_name:"เขตสุขภาพที่ 1"},{id:2,zone:"02",zone_name:"เขตสุขภาพที่ 2"},{id:3,zone:"03",zone_name:"เขตสุขภาพที่ 3"},{id:4,zone:"04",zone_name:"เขตสุขภาพที่ 4"},{id:5,zone:"05",zone_name:"เขตสุขภาพที่ 5"},{id:6,zone:"06",zone_name:"เขตสุขภาพที่ 6"},{id:7,zone:"07",zone_name:"เขตสุขภาพที่ 7"},{id:8,zone:"08",zone_name:"เขตสุขภาพที่ 8"},{id:9,zone:"09",zone_name:"เขตสุขภาพที่ 9"},{id:10,zone:"10",zone_name:"เขตสุขภาพที่ 10"},{id:11,zone:"11",zone_name:"เขตสุขภาพที่ 11"},{id:12,zone:"12",zone_name:"เขตสุขภาพที่ 12"}];T.sort((m,N)=>m.id>N.id?1:-1).map(m=>({...m})).map(m=>({key:m.id,value:m.zone,label:m.zone_name}));const v=async m=>{console.log("Failed: ",m)},_=async m=>{q(!0),await Wa(m).then(N=>{console.log(N.data),p(N.data),z(N.data),q(!1)}).catch(N=>{console.log(N),q(!1)}).finally(()=>q(!1))},i=m=>{console.log(m),z(l.filter(N=>N.zone===m.zone))},f=m=>{z(l.filter(N=>N.hcode.toLowerCase().includes(m.target.value)||N.hname_th.toLowerCase().includes(m.target.value)||N.firstname_th.toLowerCase().includes(m.target.value)))},j=h.map((m,N)=>({...m,key:N})),k=[{role:"user",role_name:e.jsx(ss,{className:"w-full bg-orange-300 text-center text-white",children:"User"})},{role:"admin",role_name:e.jsx(ss,{className:"w-full bg-green-500 text-center text-white",children:"Admin"})}].map(m=>({value:m.role,label:m.role_name})),Q=[{type:"Administrator",type_name:e.jsx(ss,{className:"w-full bg-green-500 text-center text-white",children:"ผู้ดูแลระบบ"})},{type:"zone_approve",type_name:e.jsx(ss,{className:"w-full bg-blue-500 text-center text-white",children:"คคก.เขตสุขภาพ"})},{type:"prov_approve",type_name:e.jsx(ss,{className:"w-full bg-orange-300 text-center text-white",children:"คคก.จังหวัด"})},{type:"responder",type_name:e.jsx(ss,{className:"w-full bg-yellow-400 text-center text-white",children:"ผู้ประเมิน รพ."})}].map(m=>({value:m.type,label:m.type_name})),te=[{title:"ลำดับ",align:"center",render:({key:m})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:m+1})})},{title:"ชื่อ-นามสกุล",render:({title_th:m,firstname_th:N,lastname_th:ne})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:[m," ",N," ",ne]})})},{title:e.jsx("p",{className:"text-center",children:"หน่วยบริการ"}),render:({hname_th:m,hcode:N})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:[m," [",N,"]"]})})},{title:e.jsx("p",{className:"text-center",children:"เขตสุขภาพ"}),render:({zone:m})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:["เขตสุขภาพที่ ",Number(m)]})})},{title:e.jsx("p",{className:"text-center",children:"ตำแหน่ง"}),render:({position:m,position_id:N})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:[m," [",N,"]"]})})},{title:"ระดับ",dataIndex:"level",align:"center",render:(m,{id:N})=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:m==1?"ส่วนกลาง":m==2?"เขตสุขภาพ":m==3?"จังหวัด":m==4?"หน่วยบริการ":""})})},{title:"สิทธิ",dataIndex:"role",align:"center",render:(m,{id:N})=>e.jsx(e.Fragment,{children:e.jsx(X,{options:k,className:"w-28",defaultValue:m,onChange:ne=>ee(ne,N)})})},{title:"ประเภท",dataIndex:"objective",align:"center",width:"10%",render:(m,{id:N})=>e.jsx(e.Fragment,{children:e.jsx(X,{options:Q,className:"w-full",defaultValue:m,onChange:ne=>W(ne,N)})})},{title:"การอนุมัติ",align:"center",render:({enabled:m,id:N})=>e.jsx(e.Fragment,{children:e.jsx(Ys,{size:"small",checked:m,onChange:ne=>y(ne,N)})})},{title:"วันที่เพิ่ม",align:"center",render:({createdAt:m})=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:ve(m).locale("th").format("DD MMM BB")})})},{title:"จัดการ",align:"center",render:({id:m})=>e.jsx(e.Fragment,{children:e.jsx("button",{className:"px-4 border rounded-full py-1 bg-red-500 hover:bg-red-600 shadow-md text-white",onClick:()=>C(m),children:e.jsx(Ls,{size:16})})})}],ee=(m,N)=>{sn(a,{id:N,role:m}).then(Y=>{V.success(Y.data.message),_(a)}).catch(Y=>{console.log(Y)})},W=(m,N)=>{tn(a,{id:N,objective:m}).then(Y=>{V.success(Y.data.message),_(a)}).catch(Y=>{V.error(Y.response.data.message)})},y=(m,N)=>{Ws(a,{id:N,enabled:m}).then(Y=>{V.success(Y.data.message),_(a)}).catch(Y=>{console.log(Y)})},C=m=>{on({title:"คุณต้องการลบข้อมูลหรือไม่?",icon:e.jsx(he,{}),onOk(){an(a,m).then(N=>{V.error(N.data.message),_(a)}).catch(N=>{console.log(N)})},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:[e.jsx(wt,{})," ",e.jsx("p",{className:"ml-1",children:" จัดการข้อมูลผู้ใช้งาน"})]}),e.jsxs("div",{className:"border rounded-md p-2 bg-white shadow-md",children:[e.jsx("div",{className:"flex justify-center items-center p-1",children:e.jsxs(r,{name:"formSearch",form:M,onFinish:i,onFinishFailed:v,layout:"inline",children:[e.jsx(r.Item,{name:"zone",label:"เลือกเขตสุขภาพ",rules:[{required:!0,message:"กรุณาเลือกเขตสุขภาพ"}],children:e.jsx(X,{showSearch:!0,optionFilterProp:"label",filterSort:(m,N)=>((m==null?void 0:m.label)??"").toLowerCase().localeCompare(((N==null?void 0:N.label)??"").toLowerCase()),placeholder:"กรุณาเลือกหน่วยบริการ...",style:{width:"250px"},children:T.map(m=>e.jsx(X.Option,{value:m.zone,children:m.zone_name},m.id))})}),e.jsx(r.Item,{children:e.jsx(H,{type:"primary",htmlType:"submit",children:"ค้นหา"})})]})}),e.jsxs("div",{className:"flex justify-between items-center p-3",children:[e.jsx("div",{children:e.jsxs("p",{style:{fontSize:"14px"},children:["จำนวนบัญชี คกก.เขตสุขภาพ ทั้งหมด ",h.length," รายการ"]})}),e.jsx("div",{children:e.jsx(g,{placeholder:"ค้นหาด้วย hcode, ชื่อ, ชื่อหน่วยบริการ...",className:"rounded-full",style:{width:250},prefix:e.jsx(Xe,{}),onChange:f})})]}),e.jsx(We,{columns:te,dataSource:j,bordered:!0,size:"small",pagination:{pageSize:12}})]})]})},hn=()=>e.jsx("div",{children:e.jsx(dn,{})}),xn=async(a,l)=>await Z.post("https://bdh-service.moph.go.th/api/smarthosp/createCategory",l,{headers:{Authorization:"Bearer "+a}}),Ds=async a=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getListCategory",{headers:{Authorization:"Bearer "+a}}),un=async(a,l)=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getCategoryById/"+l,{headers:{Authorization:"Bearer "+a}}),mn=async(a,l)=>await Z.put("https://bdh-service.moph.go.th/api/smarthosp/updateCategory",l,{headers:{Authorization:"Bearer "+a}}),pn=async(a,l)=>await Z.delete("https://bdh-service.moph.go.th/api/smarthosp/removeCategory/"+l,{headers:{Authorization:"Bearer "+a}});ve.extend(cs);const{confirm:jn}=xe,gn=()=>{const a=O(m=>m.token),[l,p]=c.useState([]),[h,z]=c.useState([]),[E,q]=c.useState([]),[M,L]=c.useState(!1),[G,T]=c.useState(!1),[u,v]=c.useState(!1),[_]=r.useForm(),[i]=r.useForm();c.useEffect(()=>{f(a)},[]);const f=async m=>{L(!0),await Ds(m).then(N=>{p(N.data),q(N.data)}).catch(N=>{console.log(N)}).finally(()=>L(!1))},j=m=>{q(l.filter(N=>N.category_name_th.toLowerCase().includes(m.target.value)||N.category_name_eng.toLowerCase().includes(m.target.value)))},I=E.map((m,N)=>({...m,key:N})),k=[{title:"ลำดับ",align:"center",render:({key:m})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:m+1})})},{title:e.jsx("p",{className:"text-center",children:"ชื่อด้าน (ไทย)"}),render:({category_name_th:m})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:m})})},{title:e.jsx("p",{className:"text-center",children:"ชื่อด้าน (อังกฤษ)"}),render:({category_name_eng:m})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:m})})},{title:"ปีงบประมาณ",align:"center",render:({fiscal_year:m})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:m})})},{title:"วันที่เพิ่ม",align:"center",render:({createdAt:m})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:ve(m).locale("th").format("DD MMM BB")})})},{title:"วันที่แก้ไข",align:"center",render:({updatedAt:m})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:ve(m).locale("th").format("DD MMM BB")})})},{title:"จัดการ",align:"center",render:({id:m})=>e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("button",{className:"mr-1 px-4 border rounded-full py-1 bg-yellow-400 hover:bg-yellow-500 shadow-md text-white",onClick:()=>W(m),children:e.jsx(Js,{size:16})}),e.jsx("button",{className:"px-4 border rounded-full py-1 bg-red-500 hover:bg-red-600 shadow-md text-white",onClick:()=>C(m),children:e.jsx(Ls,{size:16})})]})})}],le=()=>{T(!0)},Q=()=>{T(!1),v(!1)};c.useEffect(()=>{_.setFieldsValue({category_name_th:"",category_name_eng:"",fiscal_year:"2568"})});const te=async m=>{console.log("FieldValues: ",m),xn(a,m).then(N=>{V.success(N.data.message),f(a),T(!1)}).catch(N=>{V.warning(N.response.data.message)})},ee=m=>{console.log("Fialed: ",m)},W=async m=>{v(!0),await un(a,m).then(N=>{z(N.data)}).catch(N=>{console.log(N)})};c.useEffect(()=>{i.setFieldsValue({category_name_th:h.category_name_th,category_name_eng:h.category_name_eng,fiscal_year:h.fiscal_year})});const y=async m=>{const N={...m,id:h.id};await mn(a,N).then(ne=>{V.success(ne.data.message),v(!1),f(a)}).catch(ne=>{console.log(ne)})},C=async m=>{jn({title:"คุณต้องการลบข้อมูลหรือไม่?",icon:e.jsx(he,{}),onOk(){pn(a,m).then(N=>{V.error(N.data.message),f(a)}).catch(N=>{console.log(N)})},onCancel(){console.log("Cancel")}})};return e.jsx("div",{children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:[e.jsx($s,{})," ",e.jsx("p",{className:"ml-2",children:"ข้อมูลด้านการประเมิน"})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md",children:[M?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(Ps,{className:"w-16 h-16 text-blue-400 animate-spin"})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center p-2",children:[e.jsxs("div",{className:"flex p-2 items-center",style:{fontSize:"14px"},children:[e.jsx("button",{className:"bg-green-600 py-1 px-4 rounded-full shadow-md hover:bg-green-700",onClick:le,children:e.jsxs("p",{className:"flex px-1 text-white items-center",children:[e.jsx(Vs,{className:""})," เพิ่ม"]})}),e.jsxs("p",{style:{fontSize:"14px",marginLeft:"5px"},children:["จำนวนทั้งหมด ",E.length," รายการ"]})]}),e.jsx("div",{children:e.jsx(g,{placeholder:"ค้นหาด้วยชื่อภาษาไทย หรือ อังกฤษ...",prefix:e.jsx(Xe,{}),className:"rounded-full",style:{width:250},onChange:j})})]}),e.jsx("div",{children:e.jsx(We,{columns:k,dataSource:I,size:"small",bordered:!0,pagination:{pageSize:12}})})]}),e.jsx(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"เพิ่มด้านการประเมิน"})]}),open:G,onOk:_.submit,onCancel:Q,width:450,style:{top:20},children:e.jsxs(r,{name:"formCreate",form:_,layout:"vertical",onFinish:te,onFinishFailed:ee,className:"mt-2",children:[e.jsx(r.Item,{name:"category_name_th",label:e.jsx("b",{children:"ชื่อด้านการประเมิน (ไทย)"}),rules:[{required:!0,message:"กรุณาระบุชื่อด้านการประเมิน"}],hasFeedback:!0,className:"mb-3",children:e.jsx(g,{placeholder:"ระบุชื่อด้านการประเมินภาษาไทย"})}),e.jsx(r.Item,{name:"category_name_eng",label:e.jsx("b",{children:"ชื่อด้านการประเมิน (อังกฤษ)"}),rules:[{required:!0,message:"กรุณาระบุชื่อด้านการประเมิน"}],hasFeedback:!0,className:"mb-3",children:e.jsx(g,{placeholder:"ระบุชื่อด้านการประเมินภาษาอังกฤษ"})}),e.jsx(r.Item,{name:"fiscal_year",label:e.jsx("b",{children:"ปีงบประมาณ"}),rules:[{required:!0,message:"กรุณาระบุปีงบประมาณ"}],hasFeedback:!0,className:"mb-3",children:e.jsx(g,{placeholder:"ระบุปีงบประมาณ",readOnly:!0})})]})}),e.jsx(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-yellow-500"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แก้ไขด้านการประเมิน"})]}),open:u,onOk:i.submit,onCancel:Q,width:450,style:{top:20},children:e.jsxs(r,{name:"formUpdate",form:i,layout:"vertical",onFinish:y,onFinishFailed:ee,className:"mt-2",children:[e.jsx(r.Item,{name:"category_name_th",label:e.jsx("b",{children:"ชื่อด้านการประเมิน (ไทย)"}),rules:[{required:!0,message:"กรุณาระบุชื่อด้านการประเมิน"}],hasFeedback:!0,className:"mb-3",children:e.jsx(g,{placeholder:"ระบุชื่อด้านการประเมินภาษาไทย"})}),e.jsx(r.Item,{name:"category_name_eng",label:e.jsx("b",{children:"ชื่อด้านการประเมิน (อังกฤษ)"}),rules:[{required:!0,message:"กรุณาระบุชื่อด้านการประเมิน"}],hasFeedback:!0,className:"mb-3",children:e.jsx(g,{placeholder:"ระบุชื่อด้านการประเมินภาษาอังกฤษ"})}),e.jsx(r.Item,{name:"fiscal_year",label:e.jsx("b",{children:"ปีงบประมาณ"}),rules:[{required:!0,message:"กรุณาระบุปีงบประมาณ"}],hasFeedback:!0,className:"mb-3",children:e.jsx(g,{placeholder:"ระบุปีงบประมาณ",readOnly:!0})})]})})]})]})})},bn=()=>e.jsx("div",{children:e.jsx(gn,{})}),vn=async(a,l)=>await Z.post("https://bdh-service.moph.go.th/api/smarthosp/createQuests",l,{headers:{Authorization:"Bearer "+a}}),Ne=async a=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getListQuests",{headers:{Authorization:"Bearer "+a}}),fn=async(a,l)=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getQuestById/"+l,{headers:{Authorization:"Bearer "+a}}),_n=async(a,l)=>await Z.put("https://bdh-service.moph.go.th/api/smarthosp/updateQuests",l,{headers:{Authorization:"Bearer "+a}}),yn=async(a,l)=>await Z.delete("https://bdh-service.moph.go.th/api/smarthosp/removeQuests/"+l,{headers:{Authorization:"Bearer "+a}});ve.extend(cs);const{confirm:Nn}=xe,wn=()=>{const a=O(R=>R.token),[l,p]=c.useState([]),[h,z]=c.useState([]),[E,q]=c.useState([]),[M,L]=c.useState([]),[G,T]=c.useState(!1),[u,v]=c.useState(!1),[_,i]=c.useState(!1),[f]=r.useForm(),[j]=r.useForm();c.useEffect(()=>{I(a)},[]);const I=async R=>{await Ds(R).then($=>{p($.data)}).catch($=>{console.log($)})},k=l.map(R=>({value:R.id,label:R.category_name_th}));c.useEffect(()=>{le(a)},[]);const le=async R=>{T(!0),await Ne(R).then($=>{z($.data),q($.data)}).catch($=>{console.log($)}).finally(()=>T(!1))},Q=R=>{q(h.filter($=>$.category_quests.category_name_th.toLowerCase().includes(R.target.value)))},te=E.map((R,$)=>({...R,key:$})),ee=[{title:"ลำดับ",align:"center",render:({key:R})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:R+1})})},{title:e.jsx("p",{className:"text-center",children:"ด้าน"}),render:({category_quests:R})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:R.category_name_th})})},{title:e.jsx("p",{className:"text-center",children:"คำถามหลัก"}),width:"45%",render:({quest_name:R})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:R})})},{title:"ปีงบประมาณ",align:"center",render:({category_quests:R})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:R.fiscal_year})})},{title:"วันที่เพิ่ม",align:"center",render:({createdAt:R})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:ve(R).locale("th").format("DD MMM BB")})})},{title:"วันที่แก้ไข",align:"center",render:({updatedAt:R})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:ve(R).locale("th").format("DD MMM BB")})})},{title:"จัดการ",align:"center",render:({id:R})=>e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("button",{className:"mr-1 px-4 border rounded-full py-1 bg-yellow-400 hover:bg-yellow-500 shadow-md text-white",onClick:()=>N(R),children:e.jsx(Js,{size:16})}),e.jsx("button",{className:"px-4 border rounded-full py-1 bg-red-500 hover:bg-red-600 shadow-md text-white",onClick:()=>Y(R),children:e.jsx(Ls,{size:16})})]})})}],W=()=>{v(!0)},y=()=>{v(!1),i(!1)},C=async R=>{const $=R.items[0].list.map(re=>({quest_name:re.quest_name,category_questId:R.items[0].category_questId}));console.log("Value: ",$),await vn(a,$).then(re=>{V.success(re.data.message),v(!1),le(a)}).catch(re=>{console.log(re.response.data.message),V.warning(re.response.data.message)})},m=R=>{console.log("Failed: ",R)},N=async R=>{i(!0),await fn(a,R).then($=>{L($.data)}).catch($=>{console.log($)})};c.useEffect(()=>{j.setFieldsValue({category_questId:M.category_questId,quest_name:M.quest_name})});const ne=async R=>{const $={...R,id:M.id};await _n(a,$).then(re=>{V.success(re.data.message),le(a),i(!1)}).catch(re=>{console.log(re.response.data.message),V.error(re.response.data.message)})},Y=async R=>{Nn({title:"คุณต้องการลบข้อมูลหรือไม่?",icon:e.jsx(he,{}),onOk(){yn(a,R).then($=>{V.success($.data.message),le(a)}).catch($=>{console.log($.response.data.message),V.error($.response.data.message)})},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:[e.jsx($s,{})," ",e.jsx("p",{className:"ml-2",children:"ข้อมูลเกณฑ์การประเมินหลัก"})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md",children:[G?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(Ps,{className:"w-16 h-16 text-blue-400 animate-spin"})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center p-2",children:[e.jsxs("div",{className:"flex p-2 items-center",style:{fontSize:"14px"},children:[e.jsx("button",{className:"bg-green-600 py-1 px-4 rounded-full shadow-md hover:bg-green-700",onClick:W,children:e.jsxs("p",{className:"flex px-1 text-white items-center",children:[e.jsx(Vs,{className:""})," เพิ่ม"]})}),e.jsxs("p",{style:{fontSize:"14px",marginLeft:"5px"},children:["จำนวนทั้งหมด ",E.length," รายการ"]})]}),e.jsx("div",{children:e.jsx(g,{placeholder:"ค้นหาด้วยชื่อ...",prefix:e.jsx(Xe,{}),className:"rounded-full",style:{width:250},onChange:Q})})]}),e.jsx("div",{className:"p-2",children:e.jsx(We,{dataSource:te,columns:ee,size:"small",bordered:!0})})]}),e.jsx(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"เพิ่มคำถามหลัก"})]}),open:u,onOk:f.submit,onCancel:y,width:450,style:{top:20},children:e.jsx(r,{name:"formCreate",form:f,layout:"vertical",onFinish:C,onFinishFailed:m,className:"mt-2",autoComplete:"off",initialValues:{items:[{}]},children:e.jsx(r.List,{name:"items",children:(R,{add:$,remove:re})=>e.jsx("div",{children:R.map(ae=>e.jsxs(ea,{size:"small",children:[e.jsx(r.Item,{label:"ด้านการประเมิน",name:[ae.name,"category_questId"],children:e.jsx(X,{options:k,placeholder:"กรุณาเลือกด้านการประเมิน..."})}),e.jsx(r.Item,{label:"คำถามหลัก",children:e.jsx(r.List,{name:[ae.name,"list"],children:(P,n)=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",rowGap:16},children:[P.map(F=>e.jsxs(qe,{children:[e.jsx(r.Item,{noStyle:!0,name:[F.name,"quest_name"],children:e.jsx(g.TextArea,{placeholder:"ระบุคำถาม....",style:{width:350}})}),e.jsx(sa,{onClick:()=>{n.remove(F.name)}})]},F.key)),e.jsx(H,{type:"dashed",onClick:()=>n.add(),block:!0,children:"+ เพิ่มคำถามหลัก"})]})})})]},ae.key))})})})}),e.jsx(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-yellow-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แก้ไขคำถามหลัก"})]}),open:_,onOk:j.submit,onCancel:y,width:450,style:{top:20},children:e.jsxs(r,{name:"formCreate",form:j,layout:"vertical",onFinish:ne,onFinishFailed:m,className:"mt-2",children:[e.jsx(r.Item,{name:"category_questId",label:e.jsx("b",{children:"ชื่อด้านการประเมิน"}),rules:[{required:!0,message:"กรุณาระบุชื่อด้านการประเมิน"}],hasFeedback:!0,className:"mb-3",children:e.jsx(X,{options:k})}),e.jsx(r.Item,{name:"quest_name",label:e.jsx("b",{children:"คำถามหลัก"}),rules:[{required:!0,message:"กรุณาระบุคำถามหลัก"}],hasFeedback:!0,className:"mb-3",children:e.jsx(g,{})})]})})]})]})},qn=()=>e.jsx("div",{children:e.jsx(wn,{})}),In=async(a,l)=>await Z.post("https://bdh-service.moph.go.th/api/smarthosp/createSubQuest",l,{headers:{Authorization:"Bearer "+a}}),Sn=async a=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getListSubQuests",{headers:{Authorization:"Bearer "+a}}),Fn=async(a,l)=>await Z.get("https://bdh-service.moph.go.th/api/smarthosp/getSubQuestById/"+l,{headers:{Authorization:"Bearer "+a}}),zn=async(a,l)=>await Z.get(`https://bdh-service.moph.go.th/api/smarthosp/getSubQuestByCatId?category_questId=${l}`,{headers:{Authorization:"Bearer "+a}}),Ln=async(a,l)=>await Z.put("https://bdh-service.moph.go.th/api/smarthosp/updateSubQuest",l,{headers:{Authorization:"Bearer "+a}}),Pn=async(a,l)=>await Z.delete("https://bdh-service.moph.go.th/api/smarthosp/removeSubQuest/"+l,{headers:{Authorization:"Bearer "+a}});ve.extend(cs);const{confirm:Cn}=xe,{TextArea:Gs}=g,kn=()=>{const a=O(P=>P.token),[l,p]=c.useState([]),[h,z]=c.useState([]),[E,q]=c.useState(!1),[M,L]=c.useState(!1),[G,T]=c.useState(!1),[u,v]=c.useState([]),[_,i]=c.useState([]),[f,j]=c.useState([]),[I]=r.useForm(),[k]=r.useForm(),[le,Q]=c.useState({category_questId:""});c.useEffect(()=>{te(a),ee(a),W(a)},[]);const te=async P=>{await Ds(P).then(n=>{p(n.data)}).catch(n=>{console.log(n)})},ee=async P=>{await Ne(P).then(n=>{z(n.data)}).catch(n=>{console.log(n)})},W=async P=>{q(!0),await Sn(P).then(n=>{v(n.data),i(n.data)}).catch(n=>{console.log(n)}).finally(()=>q(!1))},y=P=>{i(u.filter(n=>n.category_quests.category_name_th.toLowerCase().includes(P.target.value)||n.quests.quest_name.toLowerCase().includes(P.target.value)||n.sub_quest_name.toLowerCase().includes(P.target.value)))},C=_.map((P,n)=>({...P,key:n})),m=[{title:"ลำดับ",align:"center",render:({key:P})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:P+1})})},{title:e.jsx("p",{className:"text-center",children:"คำถามย่อย"}),width:"45%",render:({sub_quest_name:P})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:P})})},{title:"จำเป็น",align:"center",render:({necessary:P})=>e.jsx(e.Fragment,{children:e.jsx(we,{checked:P})})},{title:"วันที่เพิ่ม",align:"center",render:({createdAt:P})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:ve(P).locale("th").format("DD MMM BB")})})},{title:"วันที่แก้ไข",align:"center",render:({updatedAt:P})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"text-sm",children:ve(P).locale("th").format("DD MMM BB")})})},{title:"จัดการ",align:"center",render:({id:P})=>e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("button",{className:"mr-1 px-4 border rounded-full py-1 bg-yellow-400 hover:bg-yellow-500 shadow-md text-white",onClick:()=>$(P),children:e.jsx(Js,{size:16})}),e.jsx("button",{className:"px-4 border rounded-full py-1 bg-red-500 hover:bg-red-600 shadow-md text-white",onClick:()=>ae(P),children:e.jsx(Ls,{size:16})})]})})}],N=()=>{L(!0)},ne=()=>{L(!1),T(!1)};c.useEffect(()=>{I.setFieldsValue({category_questId:null,questId:null,sub_quest_name:null,sub_quest_require_point:0,sub_quest_total_point:0,description:null,necessary:null})});const Y=async P=>{console.log("fieldValue: ",P),await In(a,P).then(n=>{V.success(n.data.message),L(!1),W(a)}).catch(n=>{console.log(n.response.data.message),V.warning(n.response.data.message)})},R=P=>{console.log("Failed: ",P)},$=P=>{console.log("Update Modal: ",P),T(!0),Fn(a,P).then(n=>{j(n.data)}).catch(n=>{console.log(n)})};c.useEffect(()=>{k.setFieldsValue({category_questId:f.category_questId,questId:f.questId,sub_quest_name:f.sub_quest_name,sub_quest_total_point:f.sub_quest_total_point,sub_quest_require_point:f.sub_quest_require_point,description:f.description,necessary:f.necessary})});const re=P=>{const n={...P,id:f.id};console.log(n),Ln(a,n).then(F=>{V.success(F.data.message),T(!1),W(a)}).catch(F=>{console.log(F.response.data.message),V.error(F.response.data.message)})},ae=P=>{Cn({title:"คุณต้องการลบข้อมูลหรือไม่?",icon:e.jsx(he,{}),onOk(){Pn(a,P).then(n=>{V.success(n.data.message),W(a)}).catch(n=>{console.log(n.response.data.message),V.error(n.response.data.message)})},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:[e.jsx($s,{})," ",e.jsx("p",{className:"ml-2",children:"ข้อมูลเกณฑ์การประเมินย่อย"})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md",children:[E?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(Ps,{className:"w-16 h-16 text-blue-400 animate-spin"})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center p-2",children:[e.jsxs("div",{className:"flex items-center p-2",children:[e.jsx("button",{className:"bg-green-600 py-1 px-4 rounded-full shadow-md hover:bg-green-700",onClick:N,children:e.jsxs("p",{className:"flex px-1 text-white items-center",children:[e.jsx(Vs,{className:""})," เพิ่ม"]})}),e.jsxs("p",{style:{fontSize:"14px",marginLeft:"5px"},children:["จำนวนทั้งหมด ",_.length," รายการ"]})]}),e.jsx("div",{children:e.jsx(g,{placeholder:"ค้นหาด้วยชื่อ...",prefix:e.jsx(Xe,{}),className:"rounded-full",style:{width:250},onChange:y})})]}),e.jsx("div",{children:e.jsx(We,{dataSource:C,columns:m,size:"dmall",bordered:!0})})]}),e.jsx(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"เพิ่มเกณฑ์ย่อย"})]}),open:M,onOk:I.submit,onCancel:ne,width:450,style:{top:20},children:e.jsxs(r,{name:"formCreate",form:I,layout:"vertical",onFinish:Y,onFinishFailed:R,className:"mt-2",autoComplete:"off",initialValues:{items:[{}]},children:[e.jsx(r.Item,{name:"category_questId",label:e.jsx("b",{children:"ชื่อด้านการประเมิน"}),rules:[{required:!0,message:"กรุณาระบุชื่อด้านการประเมิน"}],className:"mb-3",children:e.jsx(X,{placeholder:"กรุณาเลือกชื่อด้านการประเมิน...",onChange:P=>Q(P),children:l.sort((P,n)=>P-n).map((P,n)=>e.jsx(X.Option,{value:P.id,children:P.category_name_th},n))})}),e.jsx(r.Item,{name:"questId",label:e.jsx("b",{children:"คำถามหลัก"}),rules:[{required:!0,message:"กรุณาระบุคำถามหลัก"}],className:"mb-3",children:e.jsx(X,{placeholder:"กรุณาเลือกคำถามหลัก...",children:h.map((P,n)=>le===P.category_questId?e.jsx(X.Option,{value:P.id,children:P.quest_name},n):null)})}),e.jsx(r.Item,{name:"sub_quest_name",label:e.jsx("b",{children:"คำถามย่อย"}),rules:[{required:!0,message:"กรุณาระบุคำถามย่อย"}],className:"mb-3",children:e.jsx(Gs,{rows:5})})]})}),e.jsx(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-yellow-400"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แก้ไขเกณฑ์ย่อย"})]}),open:G,onOk:k.submit,onCancel:ne,width:450,style:{top:20},children:e.jsxs(r,{name:"formUpdate",form:k,layout:"vertical",onFinish:re,onFinishFailed:R,className:"mt-2",autoComplete:"off",initialValues:{items:[{}]},children:[e.jsx(r.Item,{name:"category_questId",label:e.jsx("b",{children:"ชื่อด้านการประเมิน"}),rules:[{required:!0,message:"กรุณาระบุชื่อด้านการประเมิน"}],className:"mb-3",children:e.jsx(X,{placeholder:"กรุณาเลือกชื่อด้านการประเมิน...",onChange:P=>Q(P),children:l.sort((P,n)=>P-n).map((P,n)=>e.jsx(X.Option,{value:P.id,children:P.category_name_th},n))})}),e.jsx(r.Item,{name:"questId",label:e.jsx("b",{children:"คำถามหลัก"}),rules:[{required:!0,message:"กรุณาระบุคำถามหลัก"}],className:"mb-3",children:e.jsx(X,{placeholder:"กรุณาเลือกคำถามหลัก...",children:h.map((P,n)=>f.category_questId===P.category_questId?e.jsx(X.Option,{value:P.id,children:P.quest_name},n):null)})}),e.jsx(r.Item,{name:"sub_quest_name",label:e.jsx("b",{children:"คำถามย่อย"}),rules:[{required:!0,message:"กรุณาระบุคำถามย่อย"}],className:"mb-3",children:e.jsx(Gs,{rows:5})}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-full px-1",children:e.jsx(r.Item,{name:"sub_quest_total_point",label:e.jsx("b",{children:"คะแนนเต็ม"}),rules:[{required:!0,message:"กรุณาระบุคะแนนเต็ม"}],className:"mb-3",children:e.jsx(Ae,{className:"w-full"})})}),e.jsx("div",{className:"w-full px-1",children:e.jsx(r.Item,{name:"sub_quest_require_point",label:e.jsx("b",{children:"คะแนนจำเป็น"}),rules:[{required:!0,message:"กรุณาระบุคะแนนเต็ม"}],className:"mb-3",children:e.jsx(Ae,{className:"w-full"})})})]}),e.jsx(r.Item,{name:"description",label:e.jsx("b",{children:"คำชี้แจง/คำอธิบายเพิ่มเติม"}),className:"mb-3",children:e.jsx(Gs,{})}),e.jsx(r.Item,{name:"necessary",label:e.jsx("b",{children:"จำเป็นต้องดำเนินการ"}),rules:[{required:!0,message:"กรุณาระบุว่าจำเป็นต้องดำเนินการหรือไม่?"}],className:"mb-3",children:e.jsxs(de.Group,{children:[e.jsx(de,{value:!0,children:"จำเป็น"}),e.jsx(de,{value:!1,children:"ไม่จำเป็น"})]})})]})})]})]})},En=()=>e.jsx("div",{children:e.jsx(kn,{})}),Tn=()=>e.jsx("div",{children:"ReportCentre"}),{confirm:An}=xe,Rn=()=>{const a=O(h=>h.logout),l=be(),p=()=>{An({title:"คุณต้องการออกจากระบบหรือไม่?",icon:e.jsx(he,{}),content:"",onOk(){a(),l("/smarthosp-quest/")},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"bg-green-800 w-64 text-gray-100 flex flex-col h-screen",children:[e.jsx("div",{className:"h-24 bg-green-900 flex items-center justify-center gap-1",children:e.jsx("div",{children:e.jsx("img",{src:os})})}),e.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[e.jsxs(ce,{to:"/smarthosp-quest/user/responder",end:!0,className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ns,{className:"mr-2"}),"Dashboard"]}),e.jsxs(ce,{to:"evaluate-infrastructure",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"ประเมินด้านโครงสร้าง"]}),e.jsxs(ce,{to:"evaluate-management",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"ประเมินด้านบริหารจัดการ"]}),e.jsxs(ce,{to:"evaluate-service",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"ประเมินด้านการบริการ"]}),e.jsxs(ce,{to:"evaluate-people",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Ce,{className:"mr-2"}),"ประเมินด้านบุคลากร"]}),e.jsxs(ce,{to:"report-hosp",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Cs,{className:"mr-2"}),"รายงานผลการประเมิน"]}),e.jsxs(ce,{to:"contact-us",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ls,{className:"mr-2"}),"ติดต่อเรา"]})]}),e.jsx("footer",{className:"px-4 py-4 space-y-2",children:e.jsxs(ce,{onClick:p,className:"text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(vs,{className:"mr-2"}),"Logout"]})})]})},Qn=()=>{const a=O(p=>p.token),l=O(p=>p.user);return e.jsx("header",{className:"relative bg-white h-16 flex items-center px-6",children:e.jsx("div",{className:"absolute right-5",children:e.jsx("div",{className:"flex items-center gap-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx(_s,{className:"bg-green-600",icon:e.jsx(fs,{})}),e.jsxs("p",{children:[l.firstname_th+" "+l.lastname_th+" ["+l.hcode+"]"," [",l.objective==="responder"?"ผู้ประเมินโรงพยาบาลตนเอง":null,"]"]})]}):null})})})},Un=()=>e.jsxs("div",{className:"flex h-screen",children:[e.jsx(Rn,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Qn,{}),e.jsx("main",{className:"flex-1 p-6 bg-gray-100 overflow-y-auto",children:e.jsx(rs,{})})]})]}),Bn=()=>{const a=O(p=>p.token),l=O(p=>p.user);return e.jsx("header",{className:"relative bg-white h-16 flex items-center px-6",children:e.jsx("div",{className:"absolute right-5",children:e.jsx("div",{className:"flex items-center gap-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx(_s,{className:"bg-green-600",icon:e.jsx(fs,{})}),e.jsxs("p",{children:[l.firstname_th+" "+l.lastname_th+" ["+l.hcode+"]"," [",l.objective==="prov_approve"?"คกก.รพ.อัจฉริยะ สสจ. Approve":null,"]"]})]}):null})})})},{confirm:Mn}=xe,Dn=()=>{const a=O(h=>h.logout),l=be(),p=()=>{Mn({title:"คุณต้องการออกจากระบบหรือไม่?",icon:e.jsx(he,{}),content:"",onOk(){a(),l("/smarthosp-quest/")},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"bg-green-800 w-64 text-gray-100 flex flex-col h-screen",children:[e.jsx("div",{className:"h-24 bg-green-900 flex items-center justify-center gap-1",children:e.jsx("div",{children:e.jsx("img",{src:os})})}),e.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[e.jsxs(ce,{to:"/smarthosp-quest/user/prov-approve",end:!0,className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ns,{className:"mr-2"}),"Dashboard"]}),e.jsxs(ce,{to:"ssj-usermanagement",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ks,{className:"mr-2"}),"จัดการ user รพ.ในจังหวัด"]}),e.jsxs(ce,{to:"ssj-approve-infrastructure",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ke,{className:"mr-2"}),"Approve ด้านโครงสร้าง"]}),e.jsxs(ce,{to:"ssj-approve-management",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ke,{className:"mr-2"}),"Approve ด้านบริหารจัดการ"]}),e.jsxs(ce,{to:"ssj-approve-service",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ke,{className:"mr-2"}),"Approve ด้านการบริการ"]}),e.jsxs(ce,{to:"ssj-approve-people",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ke,{className:"mr-2"}),"Approve ด้านบุคลากร"]}),e.jsxs(ce,{to:"report-prov",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Cs,{className:"mr-2"}),"รายงานผลการประเมิน"]}),e.jsxs(ce,{to:"contact-us",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ls,{className:"mr-2"}),"ติดต่อเรา"]})]}),e.jsx("footer",{className:"px-4 py-4 space-y-2",children:e.jsxs(ce,{onClick:p,className:"text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(vs,{className:"mr-2"}),"Logout"]})})]})},Hn=()=>e.jsxs("div",{className:"flex h-screen",children:[e.jsx(Dn,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Bn,{}),e.jsx("main",{className:"flex-1 p-6 bg-gray-100 overflow-y-auto",children:e.jsx(rs,{})})]})]}),On=()=>{const a=O(p=>p.token),l=O(p=>p.user);return e.jsx("header",{className:"relative bg-white h-16 flex items-center px-6",children:e.jsx("div",{className:"absolute right-5",children:e.jsx("div",{className:"flex items-center gap-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx(_s,{className:"bg-green-600",icon:e.jsx(fs,{})}),e.jsxs("p",{children:[l.firstname_th+" "+l.lastname_th+" ["+l.hcode+"]"," [",l.objective==="zone_approve"?"คกก.รพ.อัจฉริยะเขตฯ Approve":null,"]"]})]}):null})})})},{confirm:Gn}=xe,Zn=()=>{const a=O(h=>h.logout),l=be(),p=()=>{Gn({title:"คุณต้องการออกจากระบบหรือไม่?",icon:e.jsx(he,{}),content:"",onOk(){a(),l("/smarthosp-quest/")},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{className:"bg-green-800 w-64 text-gray-100 flex flex-col h-screen",children:[e.jsx("div",{className:"h-24 bg-green-900 flex items-center justify-center gap-1",children:e.jsx("div",{children:e.jsx("img",{src:os})})}),e.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-2",children:[e.jsxs(ce,{to:"/smarthosp-quest/user/zone-approve",end:!0,className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ns,{className:"mr-2"}),"Dashboard"]}),e.jsxs(ce,{to:"zone-usermanagement",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ks,{className:"mr-2"}),"จัดการผู้ใช้งาน (จังหวัด)"]}),e.jsxs(ce,{to:"zone-approve-infrastructure",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ke,{className:"mr-2"}),"Approve ด้านโครงสร้าง"]}),e.jsxs(ce,{to:"zone-approve-management",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ke,{className:"mr-2"}),"Approve ด้านบริหารจัดการ"]}),e.jsxs(ce,{to:"zone-approve-service",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ke,{className:"mr-2"}),"Approve ด้านการบริการ"]}),e.jsxs(ce,{to:"zone-approve-people",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ke,{className:"mr-2"}),"Approve ด้านบุคลากร"]}),e.jsxs(ce,{to:"report-zone",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(Cs,{className:"mr-2"}),"รายงานผลการประเมิน"]}),e.jsxs(ce,{to:"contact-us",className:({isActive:h})=>h?" text-sm bg-green-900 rounded-md text-white px-4 py-2 flex items-center":" text-sm text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(ls,{className:"mr-2"}),"ติดต่อเรา"]})]}),e.jsx("footer",{className:"px-4 py-4 space-y-2",children:e.jsxs(ce,{onClick:p,className:"text-gray-300 px-4 py-2 hover:bg-green-700 hover:text-white rounded flex items-center",children:[e.jsx(vs,{className:"mr-2"}),"Logout"]})})]})},$n=()=>e.jsxs("div",{className:"flex h-screen",children:[e.jsx(Zn,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(On,{}),e.jsx("main",{className:"flex-1 p-6 bg-gray-100 overflow-y-auto",children:e.jsx(rs,{})})]})]}),Vn={onChange({file:a,fileList:l}){a.status!=="uploading"&&console.log(a,l)},showUploadList:{extra:({size:a=0})=>e.jsxs("span",{className:"text-slate-400",children:[" (",(a/1024/1024).toFixed(2),"MB)"]}),showRemoveIcon:!0}},Jn=()=>{const a=be(),l=O(d=>d.user),p=O(d=>d.token),[h,z]=c.useState(!1),[E,q]=c.useState([]),[M,L]=c.useState([]),[G,T]=c.useState(!1),[u,v]=c.useState([]),[_,i]=c.useState(""),[f,j]=c.useState({}),[I]=r.useForm(),[k]=r.useForm(),[le,Q]=c.useState(),[te,ee]=c.useState(!1),[W,y]=c.useState(!1),[C,m]=c.useState(),[N]=r.useForm();c.useEffect(()=>{Y()},[]);const ne=l.hcode,Y=async()=>{await Ne(p).then(d=>{q(d.data)}).catch(d=>{console.log(d.response.data.message)})},$=E.filter(d=>d.category_questId===1).map((d,U)=>({value:d.id,label:d.quest_name})),re=async d=>{z(!1),i(d),T(!0),await Rs(p,d).then(U=>{console.log("Data: ",U.data),L(U.data)}).catch(U=>{console.log(U)}).finally(()=>T(!1)),await Us(p,d,ne).then(U=>{console.log("Eva: ",U.data),v(U.data)}).catch(U=>{console.log(U)})},ae=[...new Set(M.map(d=>d.quests.quest_name))],P=M.map((d,U)=>({...d,key:U})),n=async d=>{z(!0);const U=[];P.forEach(se=>{U.push({sub_questId:se.id,category_questId:d["category_questId"+se.id],questId:d["questId"+se.id],check:d["check"+se.id],hcode:d["hcode"+se.id],userId:d["userId"+se.id]})}),console.log("Success:",U),await Qs(p,U).then(se=>{V.success(se.data.message),setTimeout(()=>a("/smarthosp-quest/user/responder/evaluate-infrastructure"),5e3)}).catch(se=>{console.log(se.response.data.message),V.error(se.response.data.message)})},F=()=>{ee(!0)},x=()=>{ee(!1),y(!1)},K=async d=>{const U=new FormData;U.append("file_name",d.file_name.file.originFileObj),U.append("category_questId",d.category_questId),U.append("hcode",d.hcode),U.append("usersId",d.usersId),await Z.post("https://bdh-service.moph.go.th/api/smarthosp/saveDocuments",U,{headers:{Authorization:"Bearer "+p,"Content-Type":"multipart/form-data"}}).then(se=>{V.success(se.data.message),ee(!1)}).catch(se=>{console.log(se.response.data),V.error(se.response.data.message)})},t=async d=>{const U=new FormData;U.append("file_name",d.file_name.file.originFileObj),U.append("category_questId",d.category_questId),U.append("questId",d.questId),U.append("sub_questId",d.sub_questId),U.append("hcode",d.hcode),U.append("usersId",d.usersId),await Z.post("https://bdh-service.moph.go.th/api/smarthosp/saveEvidenceAll",U,{headers:{Authorization:"Bearer "+p,"Content-Type":"multipart/form-data"}}).then(se=>{V.success(se.data.message),y(!1)}).catch(se=>{console.log(se),V.error("ต้องเป็นไฟล์นามสกุล .png หรือ .jpg หรือ .pdf เท่านั้น!!")})},D=d=>{console.log("Fialed: ",d)};return c.useEffect(()=>{k.setFieldsValue({category_questId:"1",hcode:l.hcode,usersId:l.id})}),c.useEffect(()=>{C&&N.setFieldsValue({category_questId:C.category_questId,questId:C.questId,sub_questId:C.id,sub_quest_name:C.sub_quest_name,hcode:l.hcode,usersId:l.id})}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"ประเมินผลด้านโครงสร้าง (Infrastructure)"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกเกณฑ์การประเมิน : "}),e.jsx(X,{onChange:d=>re(d),options:$,placeholder:"กรุณาเลือกหัวข้อเพื่อประเมิน...",style:{width:"40%"}}),e.jsx("div",{children:e.jsxs(H,{onClick:F,children:[e.jsx(ye,{})," แนบเอกสาร/หลักฐานแบบรวมไฟล์ (PDF)"]})})]}),e.jsx(je,{}),u.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center",children:e.jsxs(H,{onClick:()=>a("/smarthosp-quest/user/responder/report-hosp"),children:[e.jsx(Es,{})," ประเมินหัวข้อนี้แล้ว คลิกเพื่อตรวจสอบ"]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("div",{className:"my-2",children:e.jsx("p",{className:"text-lg ml-4 font-bold text-yellow-900",children:e.jsx("u",{children:ae})})}),e.jsxs(r,{name:"formEvaluate",form:I,onFinish:n,children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"grid grid-cols-6 ml-10 bg-slate-100 text-md text-slate-950",children:[e.jsx("div",{className:"col-span-4 text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"รายการ"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนเต็ม"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนจำเป็น"})})]}),P.map((d,U)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 ml-10",children:[e.jsxs("div",{className:"col-span-4 border",children:[e.jsx("p",{className:"p-2 font-bold",children:d.sub_quest_name}),e.jsx(r.Item,{name:"category_questId"+d.id,hidden:!0,initialValue:d.category_questId,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"questId"+d.id,hidden:!0,initialValue:d.questId,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"description"+d.id,initialValue:d.description,hidden:!0,children:e.jsx(g,{className:"border-none"})}),e.jsx(r.Item,{name:"check"+d.id,className:"ml-16 mt-1",children:e.jsx(de.Group,{children:e.jsxs(qe,{direction:"vertical",children:[e.jsx(de,{value:"true",className:"text-green-700",children:"มีการดำเนินการ"}),e.jsx(de,{value:"false",className:"text-red-700",children:"ไม่มีการดำเนินการ"})]})})})]},U),e.jsxs("div",{className:"text-center border",children:[e.jsx(r.Item,{name:"sub_quest_total_point"+d.id,rules:[{required:!0,message:"กรุณาระบุ"}],initialValue:d.sub_quest_total_point,hidden:!0,className:"mt-1",children:e.jsx(Ae,{readOnly:!0})}),e.jsx("p",{className:"mt-6 font-bold",children:d.sub_quest_total_point})]}),e.jsxs("div",{className:"text-center border",children:[e.jsx(r.Item,{name:"sub_quest_require_point"+d.id,rules:[{required:!0,message:"กรุณาระบุ"}],initialValue:d.sub_quest_require_point,hidden:!0,className:"mt-1",children:e.jsx(Ae,{readOnly:!0})}),e.jsx(r.Item,{name:"hcode"+d.id,hidden:!0,initialValue:l.hcode,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"userId"+d.id,hidden:!0,initialValue:l.id,children:e.jsx(g,{})}),e.jsx("p",{className:"mt-6 font-bold",children:d.sub_quest_require_point})]})]})}))]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:M.length>0?e.jsx(r.Item,{children:e.jsxs(H,{type:"primary",htmlType:"submit",style:{width:500},disabled:h,children:[e.jsx(Ie,{})," บันทึกผลการประเมิน"]})}):null})})]})]})}),e.jsxs(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:te,onOk:k.submit,onCancel:x,width:450,style:{top:20},children:[e.jsx(je,{}),e.jsxs(r,{name:"formUpload",form:k,layout:"vertical",onFinish:K,onFinishFailed:D,children:[e.jsx(r.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(X,{options:[{value:"1",label:"ด้านโครงสร้าง"}]})}),e.jsx(r.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(X,{options:[{value:l.hcode,label:l.hname_th}]})}),e.jsx(r.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(X,{options:[{value:l.id,label:l.firstname_th+" "+l.lastname_th}]})}),e.jsx(r.Item,{name:"file_name",label:e.jsx("b",{children:"แนบเอกสาร/หลักฐาน"}),children:e.jsx(ze,{customRequest:({onSuccess:d})=>d("ok"),...Vn,children:e.jsxs(H,{children:[e.jsx(ye,{})," แนบไฟล์ .pdf ขนาดไม่เกิน 15 MB"]})})})]})]}),e.jsxs(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:W,onOk:N.submit,onCancel:x,width:450,style:{top:20},children:[e.jsx(je,{}),e.jsxs(r,{name:"formUploadAllType",form:N,layout:"vertical",onFinish:t,onFinishFailed:D,children:[e.jsx(r.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(X,{options:[{value:C?C.category_questId:null,label:C?C.category_quests.category_name_th:null}]})}),e.jsx(r.Item,{name:"questId",label:e.jsx("b",{children:"เกณฑ์การประเมินหลัก"}),children:e.jsx(X,{options:[{value:C?C.questId:null,label:C?C.quests.quest_name:null}]})}),e.jsx(r.Item,{name:"sub_questId",hidden:!0,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"sub_quest_name",label:e.jsx("b",{children:"เกณฑ์การประเมินย่อย"}),children:e.jsx(g.TextArea,{rows:3,readOnly:!0})}),e.jsx(r.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(X,{options:[{value:l.hcode,label:l.hname_th}]})}),e.jsx(r.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(X,{options:[{value:l.id,label:l.firstname_th+" "+l.lastname_th}]})}),e.jsx(r.Item,{name:"file_name",label:e.jsx("b",{children:"อัปโหลดไฟล์/เอกสาร หลักฐาน"}),children:e.jsx(ze,{customRequest:({onSuccess:d})=>d("ok"),children:e.jsxs(H,{children:[e.jsx(ye,{})," อัปโหลดไฟล์นามสกุล (.jpg หรือ .png หรือ .pdf)"]})})})]})]})]})]})},Yn=()=>(pe("ประเมินผลด้านโครงสร้าง"),e.jsx("div",{children:e.jsx(Jn,{})})),Kn={onChange({file:a,fileList:l}){a.status!=="uploading"&&console.log(a,l)},showUploadList:{extra:({size:a=0})=>e.jsxs("span",{className:"text-slate-400",children:[" (",(a/1024/1024).toFixed(2),"MB)"]}),showRemoveIcon:!0}},Wn=()=>{const a=be(),l=O(n=>n.user),p=O(n=>n.token),[h,z]=c.useState(!1),[E,q]=c.useState(!1),[M,L]=c.useState(!1),[G,T]=c.useState(!1),[u,v]=c.useState([]),[_,i]=c.useState([]),[f,j]=c.useState([]),[I]=r.useForm(),[k]=r.useForm(),[le]=r.useForm(),[Q,te]=c.useState();c.useEffect(()=>{ee()},[]);const ee=async()=>{await Ne(p).then(n=>{v(n.data)}).catch(n=>{console.log(n)})},y=u.filter(n=>n.category_questId===2).map((n,F)=>({value:n.id,label:n.quest_name})),C=l.hcode,m=async n=>{q(!1),z(!0),console.log(n),await Rs(p,n).then(F=>{i(F.data)}).catch(F=>{console.log(F)}).finally(()=>z(!1)),await Us(p,n,C).then(F=>{console.log("Eva: ",F.data),j(F.data)}).catch(F=>{console.log(F)})},N=[...new Set(_.map(n=>n.quests.quest_name))],ne=_.map((n,F)=>({...n,key:F})),Y=async n=>{q(!0);const F=[];ne.forEach(x=>{F.push({sub_questId:x.id,category_questId:n["category_questId"+x.id],questId:n["questId"+x.id],check:n["check"+x.id],hcode:n["hcode"+x.id],userId:n["userId"+x.id]})}),console.log("Success:",F),await Qs(p,F).then(x=>{V.success(x.data.message),setTimeout(()=>a("/smarthosp-quest/user/responder/evaluate-management"),5e3)}).catch(x=>{console.log(x.response.data.message),V.error(x.response.data.message)})},R=()=>[L(!0)],$=()=>{L(!1),T(!1)},re=async n=>{const F=new FormData;F.append("file_name",n.file_name.file.originFileObj),F.append("category_questId",n.category_questId),F.append("hcode",n.hcode),F.append("usersId",n.usersId),await Z.post("https://bdh-service.moph.go.th/api/smarthosp/saveDocuments",F,{headers:{Authorization:"Bearer "+p,"Content-Type":"multipart/form-data"}}).then(x=>{V.success(x.data.message),L(!1)}).catch(x=>{console.log(x.response.data),V.error(x.response.data.message)})},ae=n=>{console.log("Fialed: ",n)};c.useEffect(()=>{k.setFieldsValue({category_questId:"2",hcode:l.hcode,usersId:l.id})}),c.useEffect(()=>{Q&&le.setFieldsValue({category_questId:Q.category_questId,questId:Q.questId,sub_questId:Q.id,sub_quest_name:Q.sub_quest_name,hcode:l.hcode,usersId:l.id})});const P=async n=>{const F=new FormData;F.append("file_name",n.file_name.file.originFileObj),F.append("category_questId",n.category_questId),F.append("questId",n.questId),F.append("sub_questId",n.sub_questId),F.append("hcode",n.hcode),F.append("usersId",n.usersId),await Z.post("https://bdh-service.moph.go.th/api/smarthosp/saveEvidenceAll",F,{headers:{Authorization:"Bearer "+p,"Content-Type":"multipart/form-data"}}).then(x=>{V.success(x.data.message),T(!1)}).catch(x=>{console.log(x),V.error("ต้องเป็นไฟล์นามสกุล .png หรือ .jpg หรือ .pdf เท่านั้น!!")})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"ประเมินผลด้านบริหารจัดการ (Management)"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกเกณฑ์การประเมิน : "}),e.jsx(X,{onChange:n=>m(n),options:y,placeholder:"กรุณาเลือกหัวข้อเพื่อประเมิน...",style:{width:"40%"}}),e.jsx("div",{children:e.jsxs(H,{onClick:R,children:[e.jsx(ye,{})," แนบเอกสาร/หลักฐานแบบรวมไฟล์ (PDF)"]})})]}),e.jsx(je,{}),f.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center",children:e.jsxs(H,{onClick:()=>a("/smarthosp-quest/user/responder/report-hosp"),children:[e.jsx(Es,{})," ประเมินหัวข้อนี้แล้ว คลิกเพื่อตรวจสอบ"]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("div",{className:"my-2",children:e.jsx("p",{className:"text-lg ml-4 font-bold text-yellow-900",children:e.jsx("u",{children:N})})}),e.jsxs(r,{name:"formEvaluate",form:I,onFinish:Y,children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"grid grid-cols-6 ml-10 bg-slate-100 text-md text-slate-950",children:[e.jsx("div",{className:"col-span-4 text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"รายการ"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนเต็ม"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนจำเป็น"})})]}),ne.map((n,F)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 ml-10",children:[e.jsxs("div",{className:"col-span-4 border",children:[e.jsx("p",{className:"p-2 font-bold",children:n.sub_quest_name}),e.jsx(r.Item,{name:"category_questId"+n.id,hidden:!0,initialValue:n.category_questId,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"questId"+n.id,hidden:!0,initialValue:n.questId,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"description"+n.id,initialValue:n.description,hidden:!0,children:e.jsx(g,{className:"border-none"})}),n.id===76?e.jsx(r.Item,{name:"check"+n.id,className:"ml-16 mt-1",children:e.jsx(we.Group,{style:{display:"inline-block"},children:n.sub_quest_lists.map((x,K)=>x.sub_questId===n.id?e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(we,{value:x.choice}),e.jsx("p",{className:"text-green-700",children:x.sub_quest_listname})]},K)})}):null)})}):n.id===70||n.id===73||n.id===81||n.id===85||n.id===94||n.id===98||n.id===125||n.id===130?e.jsx(r.Item,{name:"check"+n.id,className:"ml-16 mt-1",children:e.jsx(de.Group,{children:e.jsx(qe,{direction:"vertical",children:n.sub_quest_lists.map((x,K)=>x.sub_questId===n.id?e.jsx(de,{className:"text-green-700",value:x.choice,children:x.sub_quest_listname}):null)})})}):e.jsx(r.Item,{name:"check"+n.id,className:"ml-16 mt-1",children:e.jsx(de.Group,{children:e.jsxs(qe,{direction:"vertical",children:[e.jsx(de,{value:"true",className:"text-green-700",children:"มีการดำเนินการ"}),e.jsx(de,{value:"false",className:"text-red-700",children:"ไม่มีการดำเนินการ"})]})})})]}),e.jsxs("div",{className:"text-center border",children:[e.jsx("p",{className:"font-bold mt-2",children:n.sub_quest_total_point}),e.jsx("div",{className:"mt-2",children:n.id===70||n.id===73||n.id===76||n.id===81||n.id===85||n.id===94||n.id===98||n.id===125||n.id===130?e.jsx(e.Fragment,{children:n.sub_quest_lists.map(x=>x.sub_questId===n.id?e.jsx("p",{className:"text-green-700",children:x.sub_quest_total_point}):e.jsx(e.Fragment,{}))}):e.jsx(e.Fragment,{})})]}),e.jsxs("div",{className:"text-center border",children:[e.jsx(r.Item,{name:"hcode"+n.id,hidden:!0,initialValue:l.hcode,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"userId"+n.id,hidden:!0,initialValue:l.id,children:e.jsx(g,{})}),e.jsx("p",{className:"font-bold mt-2",children:n.sub_quest_require_point}),e.jsx("div",{className:"mt-2",children:n.id===70||n.id===73||n.id===76||n.id===81||n.id===85||n.id===94||n.id===98||n.id===125||n.id===130?e.jsx(e.Fragment,{children:n.sub_quest_lists.map(x=>x.sub_questId===n.id?e.jsx("p",{className:"text-green-700",children:x.sub_quest_require_point}):e.jsx(e.Fragment,{}))}):e.jsx(e.Fragment,{})})]})]})}))]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:_.length>0?e.jsx(r.Item,{children:e.jsxs(H,{type:"primary",htmlType:"submit",style:{width:500},disabled:E,children:[e.jsx(Ie,{})," บันทึกผลการประเมิน"]})}):null})})]})]})}),e.jsxs(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:M,onOk:k.submit,onCancel:$,width:450,style:{top:20},children:[e.jsx(je,{}),e.jsxs(r,{name:"formUpload",form:k,layout:"vertical",onFinish:re,onFinishFailed:ae,children:[e.jsx(r.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(X,{options:[{value:"2",label:"ด้านบริหารจัดการ"}]})}),e.jsx(r.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(X,{options:[{value:l.hcode,label:l.hname_th}]})}),e.jsx(r.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(X,{options:[{value:l.id,label:l.firstname_th+" "+l.lastname_th}]})}),e.jsx(r.Item,{name:"file_name",label:e.jsx("b",{children:"แนบเอกสาร/หลักฐาน"}),children:e.jsx(ze,{customRequest:({onSuccess:n})=>n("ok"),...Kn,children:e.jsxs(H,{children:[e.jsx(ye,{})," แนบไฟล์ .pdf ขนาดไม่เกิน 15 MB"]})})})]})]}),e.jsxs(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:G,onOk:le.submit,onCancel:$,width:450,style:{top:20},children:[e.jsx(je,{}),e.jsxs(r,{name:"formUploadItem",form:le,layout:"vertical",onFinish:P,onFinishFailed:ae,children:[e.jsx(r.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(X,{options:[{value:Q?Q.category_questId:null,label:Q?Q.category_quests.category_name_th:null}]})}),e.jsx(r.Item,{name:"questId",label:e.jsx("b",{children:"เกณฑ์การประเมินหลัก"}),children:e.jsx(X,{options:[{value:Q?Q.questId:null,label:Q?Q.quests.quest_name:null}]})}),e.jsx(r.Item,{name:"sub_questId",hidden:!0,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"sub_quest_name",label:e.jsx("b",{children:"เกณฑ์การประเมินย่อย"}),children:e.jsx(g.TextArea,{rows:3,readOnly:!0})}),e.jsx(r.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(X,{options:[{value:l.hcode,label:l.hname_th}]})}),e.jsx(r.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(X,{options:[{value:l.id,label:l.firstname_th+" "+l.lastname_th}]})}),e.jsx(r.Item,{name:"file_name",label:e.jsx("b",{children:"อัปโหลดไฟล์/เอกสาร หลักฐาน"}),children:e.jsx(ze,{customRequest:({onSuccess:n})=>n("ok"),children:e.jsxs(H,{children:[e.jsx(ye,{})," อัปโหลดไฟล์นามสกุล (.jpg หรือ .png หรือ .pdf)"]})})})]})]})]})]})},Xn=()=>(pe("ประเมินด้านบริหารจัดการ"),e.jsx("div",{children:e.jsx(Wn,{})})),el={onChange({file:a,fileList:l}){a.status!=="uploading"&&console.log(a,l)},showUploadList:{extra:({size:a=0})=>e.jsxs("span",{className:"text-slate-400",children:[" (",(a/1024/1024).toFixed(2),"MB)"]}),showRemoveIcon:!0}},sl=()=>{const a=be(),l=O(x=>x.user),p=O(x=>x.token),[h,z]=c.useState(!1),[E,q]=c.useState(!1),[M,L]=c.useState(!1),[G,T]=c.useState(!1),[u,v]=c.useState([]),[_,i]=c.useState([]),[f,j]=c.useState([]),[I,k]=c.useState(),[le]=r.useForm(),[Q]=r.useForm(),[te]=r.useForm(),[ee,W]=c.useState("");console.log("Val : ",Number(ee.substring(1,5)));const y=l.hcode;c.useEffect(()=>{C()},[]);const C=async()=>{await Ne(p).then(x=>{v(x.data)}).catch(x=>{console.log(x)})},N=u.filter(x=>x.category_questId===3).map((x,K)=>({value:x.id,label:x.quest_name.substring(0,90)})),ne=async x=>{q(!1),z(!0),console.log(x),await Rs(p,x).then(K=>{console.log("Data: ",K.data),i(K.data)}).catch(K=>{console.log(K)}).finally(()=>z(!1)),await Us(p,x,y).then(K=>{console.log("Eva: ",K.data),j(K.data)}).catch(K=>{console.log(K)})},Y=[...new Set(_.map(x=>x.quests.quest_name))],R=_.map((x,K)=>({...x,key:K})),$=async x=>{q(!0);const K=[];R.forEach(t=>{K.push({sub_questId:t.id,category_questId:x["category_questId"+t.id],questId:x["questId"+t.id],check:x["check"+t.id],hcode:x["hcode"+t.id],userId:x["userId"+t.id]})}),console.log("Success:",K),await Qs(p,K).then(t=>{V.success(t.data.message),setTimeout(()=>a("/smarthosp-quest/user/responder/evaluate-service"),5e3)}).catch(t=>{console.log(t.response.data.message),V.error(t.response.data.message)})},re=()=>[L(!0)],ae=()=>{L(!1),T(!1)},P=async x=>{const K=new FormData;K.append("file_name",x.file_name.file.originFileObj),K.append("category_questId",x.category_questId),K.append("hcode",x.hcode),K.append("usersId",x.usersId),await Z.post("https://bdh-service.moph.go.th/api/smarthosp/saveDocuments",K,{headers:{Authorization:"Bearer "+p,"Content-Type":"multipart/form-data"}}).then(t=>{V.success(t.data.message),L(!1)}).catch(t=>{console.log(t.response.data),V.error(t.response.data.message)})},n=x=>{console.log("Fialed: ",x)};c.useEffect(()=>{Q.setFieldsValue({category_questId:"3",hcode:l.hcode,usersId:l.id})}),c.useEffect(()=>{I&&te.setFieldsValue({category_questId:I.category_questId,questId:I.questId,sub_questId:I.id,sub_quest_name:I.sub_quest_name,hcode:l.hcode,usersId:l.id})});const F=async x=>{const K=new FormData;K.append("file_name",x.file_name.file.originFileObj),K.append("category_questId",x.category_questId),K.append("questId",x.questId),K.append("sub_questId",x.sub_questId),K.append("hcode",x.hcode),K.append("usersId",x.usersId),await Z.post("https://bdh-service.moph.go.th/api/smarthosp/saveEvidenceAll",K,{headers:{Authorization:"Bearer "+p,"Content-Type":"multipart/form-data"}}).then(t=>{V.success(t.data.message),T(!1)}).catch(t=>{console.log(t),V.error("ต้องเป็นไฟล์นามสกุล .png หรือ .jpg หรือ .pdf เท่านั้น!!")})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"ประเมินผลด้านการบริการ (Service)"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกเกณฑ์การประเมิน : "}),e.jsx(X,{onChange:x=>ne(x),options:N,placeholder:"กรุณาเลือกหัวข้อเพื่อประเมิน...",style:{width:"40%"}}),e.jsx("div",{children:e.jsxs(H,{onClick:re,children:[e.jsx(ye,{})," แนบเอกสาร/หลักฐานแบบรวมไฟล์ (PDF)"]})})]}),e.jsx(je,{}),f.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center",children:e.jsxs(H,{onClick:()=>a("/smarthosp-quest/user/responder/report-hosp"),children:[e.jsx(Es,{})," ประเมินหัวข้อนี้แล้ว คลิกเพื่อตรวจสอบ"]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("div",{className:"my-2 max-w-screen-xl",children:e.jsx("p",{className:"text-lg ml-4 font-bold text-yellow-900",children:e.jsx("u",{children:Y})})}),e.jsxs(r,{name:"formEvaluate",form:le,onFinish:$,children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"grid grid-cols-6 ml-10 bg-slate-100 text-md text-slate-950",children:[e.jsx("div",{className:"col-span-4 text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"รายการ"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนเต็ม"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนจำเป็น"})})]}),R.map((x,K)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 ml-10",children:[e.jsxs("div",{className:"col-span-4 border",children:[e.jsx("p",{className:"p-2 font-bold",children:x.sub_quest_name}),e.jsx(r.Item,{name:"category_questId"+x.id,hidden:!0,initialValue:x.category_questId,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"questId"+x.id,hidden:!0,initialValue:x.questId,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"description"+x.id,initialValue:x.description,hidden:!0,children:e.jsx(g,{className:"border-none"})}),x.id===145||x.id===150||x.id===157||x.id===179||x.id===189||x.id===192||x.id===195?e.jsxs(e.Fragment,{children:[e.jsx(r.Item,{name:"sub_quest_listId"+x.id,initialValue:1,hidden:!0,children:e.jsx(g,{className:"border-none"})}),e.jsx(r.Item,{name:"check"+x.id,className:"ml-16 mt-1",children:e.jsx(de.Group,{onChange:t=>W(t.target.value),children:e.jsx(qe,{direction:"vertical",children:x.sub_quest_lists.map((t,D)=>t.sub_questId===x.id?e.jsx(de,{className:"text-green-700",value:"C"+t.id,children:t.sub_quest_listname}):null)})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(r.Item,{name:"sub_quest_listId"+x.id,hidden:!0,children:e.jsx(g,{className:"border-none"})}),e.jsx(r.Item,{name:"check"+x.id,className:"ml-16 mt-1",children:e.jsx(de.Group,{children:e.jsxs(qe,{direction:"vertical",children:[e.jsx(de,{value:"true",className:"text-green-700",children:"มีการดำเนินการ"}),e.jsx(de,{value:"false",className:"text-red-700",children:"ไม่มีการดำเนินการ"})]})})})]})]}),e.jsxs("div",{className:"text-center border",children:[e.jsx(r.Item,{name:"sub_quest_total_point"+x.id,rules:[{required:!0,message:"กรุณาระบุ"}],initialValue:x.sub_quest_total_point,hidden:!0,className:"mt-1",children:e.jsx(Ae,{readOnly:!0})}),e.jsx("p",{className:"mt-6 font-bold",children:x.sub_quest_total_point}),e.jsx("div",{className:"mt-2",children:x.id===145||x.id===150||x.id===157||x.id===179||x.id===189||x.id===192||x.id===195?e.jsx(e.Fragment,{children:x.sub_quest_lists.map(t=>t.sub_questId===x.id?e.jsx("p",{className:"text-green-700",children:t.sub_quest_total_point}):e.jsx(e.Fragment,{}))}):e.jsx(e.Fragment,{})})]}),e.jsxs("div",{className:"text-center border",children:[e.jsx(r.Item,{name:"sub_quest_require_point"+x.id,rules:[{required:!0,message:"กรุณาระบุ"}],initialValue:x.sub_quest_require_point,hidden:!0,className:"mt-1",children:e.jsx(Ae,{readOnly:!0})}),e.jsx(r.Item,{name:"hcode"+x.id,hidden:!0,initialValue:l.hcode,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"userId"+x.id,hidden:!0,initialValue:l.id,children:e.jsx(g,{})}),e.jsx("p",{className:"mt-6 font-bold",children:x.sub_quest_require_point}),e.jsx("div",{className:"mt-2",children:x.id===145||x.id===150||x.id===157||x.id===179||x.id===189||x.id===192||x.id===195?e.jsx(e.Fragment,{children:x.sub_quest_lists.map(t=>t.sub_questId===x.id?e.jsx("p",{className:"text-green-700",children:t.sub_quest_require_point}):e.jsx(e.Fragment,{}))}):e.jsx(e.Fragment,{})})]})]})}))]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:_.length>0?e.jsx(r.Item,{children:e.jsxs(H,{type:"primary",htmlType:"submit",style:{width:500},disabled:E,children:[e.jsx(Ie,{})," บันทึกผลการประเมิน"]})}):null})})]})]})}),e.jsxs(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:M,onOk:Q.submit,onCancel:ae,width:450,style:{top:20},children:[e.jsx(je,{}),e.jsxs(r,{name:"formUpload",form:Q,layout:"vertical",onFinish:P,onFinishFailed:n,children:[e.jsx(r.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(X,{options:[{value:"3",label:"ด้านการบริการ"}]})}),e.jsx(r.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(X,{options:[{value:l.hcode,label:l.hname_th}]})}),e.jsx(r.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(X,{options:[{value:l.id,label:l.firstname_th+" "+l.lastname_th}]})}),e.jsx(r.Item,{name:"file_name",label:e.jsx("b",{children:"แนบเอกสาร/หลักฐาน"}),children:e.jsx(ze,{customRequest:({onSuccess:x})=>x("ok"),...el,children:e.jsxs(H,{children:[e.jsx(ye,{})," แนบไฟล์ .pdf ขนาดไม่เกิน 15 MB"]})})})]})]}),e.jsxs(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:G,onOk:te.submit,onCancel:ae,width:450,style:{top:20},children:[e.jsx(je,{}),e.jsxs(r,{name:"formUploadItem",form:te,layout:"vertical",onFinish:F,onFinishFailed:n,children:[e.jsx(r.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(X,{options:[{value:I?I.category_questId:null,label:I?I.category_quests.category_name_th:null}]})}),e.jsx(r.Item,{name:"questId",label:e.jsx("b",{children:"เกณฑ์การประเมินหลัก"}),children:e.jsx(X,{options:[{value:I?I.questId:null,label:I?I.quests.quest_name:null}]})}),e.jsx(r.Item,{name:"sub_questId",hidden:!0,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"sub_quest_name",label:e.jsx("b",{children:"เกณฑ์การประเมินย่อย"}),children:e.jsx(g.TextArea,{rows:3,readOnly:!0})}),e.jsx(r.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(X,{options:[{value:l.hcode,label:l.hname_th}]})}),e.jsx(r.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(X,{options:[{value:l.id,label:l.firstname_th+" "+l.lastname_th}]})}),e.jsx(r.Item,{name:"file_name",label:e.jsx("b",{children:"อัปโหลดไฟล์/เอกสาร หลักฐาน"}),children:e.jsx(ze,{customRequest:({onSuccess:x})=>x("ok"),children:e.jsxs(H,{children:[e.jsx(ye,{})," อัปโหลดไฟล์นามสกุล (.jpg หรือ .png หรือ .pdf)"]})})})]})]})]})]})},tl=()=>e.jsx("div",{children:e.jsx(sl,{})}),al={onChange({file:a,fileList:l}){a.status!=="uploading"&&console.log(a,l)},showUploadList:{extra:({size:a=0})=>e.jsxs("span",{className:"text-slate-400",children:[" (",(a/1024/1024).toFixed(2),"MB)"]}),showRemoveIcon:!0}},nl=()=>{const a=be(),l=O(n=>n.user),p=O(n=>n.token),[h,z]=c.useState(!1),[E,q]=c.useState(!1),[M,L]=c.useState(!1),[G,T]=c.useState(!1),[u,v]=c.useState([]),[_,i]=c.useState([]),[f,j]=c.useState([]),[I,k]=c.useState(),[le]=r.useForm(),[Q]=r.useForm(),[te]=r.useForm(),ee=l.hcode;c.useEffect(()=>{W()},[]);const W=async()=>{await Ne(p).then(n=>{v(n.data)}).catch(n=>{console.log(n)})},C=u.filter(n=>n.category_questId===4).map((n,F)=>({value:n.id,label:n.quest_name})),m=async n=>{q(!1),z(!0),console.log(n),await Rs(p,n).then(F=>{i(F.data)}).catch(F=>{console.log(F)}).finally(()=>z(!1)),await Us(p,n,ee).then(F=>{console.log("Eva: ",F.data),j(F.data)}).catch(F=>{console.log(F)})},N=[...new Set(_.map(n=>n.quests.quest_name))],ne=_.map((n,F)=>({...n,key:F})),Y=async n=>{q(!0);const F=[];ne.forEach(x=>{F.push({sub_questId:x.id,category_questId:n["category_questId"+x.id],questId:n["questId"+x.id],check:n["check"+x.id],hcode:n["hcode"+x.id],userId:n["userId"+x.id]})}),console.log("Success:",F),await Qs(p,F).then(x=>{V.success(x.data.message),setTimeout(()=>a("/smarthosp-quest/user/responder/evaluate-people"),5e3)}).catch(x=>{console.log(x.response.data.message),V.error(x.response.data.message)})},R=()=>[L(!0)],$=()=>{L(!1),T(!1)},re=async n=>{const F=new FormData;F.append("file_name",n.file_name.file.originFileObj),F.append("category_questId",n.category_questId),F.append("hcode",n.hcode),F.append("usersId",n.usersId),await Z.post("https://bdh-service.moph.go.th/api/smarthosp/saveDocuments",F,{headers:{Authorization:"Bearer "+p,"Content-Type":"multipart/form-data"}}).then(x=>{V.success(x.data.message),L(!1)}).catch(x=>{console.log(x.response.data),V.error(x.response.data.message)})},ae=n=>{console.log("Fialed: ",n)};c.useEffect(()=>{Q.setFieldsValue({category_questId:"4",hcode:l.hcode,usersId:l.id})}),c.useEffect(()=>{I&&te.setFieldsValue({category_questId:I.category_questId,questId:I.questId,sub_questId:I.id,sub_quest_name:I.sub_quest_name,hcode:l.hcode,usersId:l.id})});const P=async n=>{const F=new FormData;F.append("file_name",n.file_name.file.originFileObj),F.append("category_questId",n.category_questId),F.append("questId",n.questId),F.append("sub_questId",n.sub_questId),F.append("hcode",n.hcode),F.append("usersId",n.usersId),await Z.post("https://bdh-service.moph.go.th/api/smarthosp/saveEvidenceAll",F,{headers:{Authorization:"Bearer "+p,"Content-Type":"multipart/form-data"}}).then(x=>{V.success(x.data.message),T(!1)}).catch(x=>{console.log(x),V.error("ต้องเป็นไฟล์นามสกุล .png หรือ .jpg หรือ .pdf เท่านั้น!!")})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"ประเมินผลด้านบุคลากร (People)"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกเกณฑ์การประเมิน : "}),e.jsx(X,{onChange:n=>m(n),options:C,placeholder:"กรุณาเลือกหัวข้อเพื่อประเมิน...",style:{width:"40%"}}),e.jsx("div",{children:e.jsxs(H,{onClick:R,children:[e.jsx(ye,{})," แนบเอกสาร/หลักฐานแบบรวมไฟล์ (PDF)"]})})]}),e.jsx(je,{}),f.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center",children:e.jsxs(H,{onClick:()=>a("/smarthosp-quest/user/responder/report-hosp"),children:[e.jsx(Es,{})," ประเมินหัวข้อนี้แล้ว คลิกเพื่อตรวจสอบ"]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("div",{className:"my-2",children:e.jsx("p",{className:"text-lg ml-4 font-bold text-yellow-900",children:e.jsx("u",{children:N})})}),e.jsxs(r,{name:"formEvaluate",form:le,onFinish:Y,children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"grid grid-cols-6 ml-10 bg-slate-100 text-md text-slate-950",children:[e.jsx("div",{className:"col-span-4 text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"รายการ"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนเต็ม"})}),e.jsx("div",{className:"text-center border",children:e.jsx("p",{className:"font-bold p-2",children:"คะแนนจำเป็น"})})]}),ne.map((n,F)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 ml-10",children:[e.jsxs("div",{className:"col-span-4 border",children:[e.jsx("p",{className:"p-2 font-bold",children:n.sub_quest_name}),e.jsx(r.Item,{name:"category_questId"+n.id,hidden:!0,initialValue:n.category_questId,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"questId"+n.id,hidden:!0,initialValue:n.questId,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"description"+n.id,initialValue:n.description,hidden:!0,children:e.jsx(g,{className:"border-none"})}),e.jsx(r.Item,{name:"check"+n.id,className:"ml-16 mt-1",children:e.jsx(de.Group,{children:e.jsxs(qe,{direction:"vertical",children:[e.jsx(de,{value:"true",className:"text-green-700",children:"มีการดำเนินการ"}),e.jsx(de,{value:"false",className:"text-red-700",children:"ไม่มีการดำเนินการ"})]})})})]}),e.jsxs("div",{className:"text-center border",children:[e.jsx(r.Item,{name:"sub_quest_total_point"+n.id,rules:[{required:!0,message:"กรุณาระบุ"}],initialValue:n.sub_quest_total_point,hidden:!0,className:"mt-1",children:e.jsx(Ae,{readOnly:!0})}),e.jsx("p",{className:"mt-6 font-bold",children:n.sub_quest_total_point})]}),e.jsxs("div",{className:"text-center border",children:[e.jsx(r.Item,{name:"sub_quest_require_point"+n.id,rules:[{required:!0,message:"กรุณาระบุ"}],initialValue:n.sub_quest_require_point,hidden:!0,className:"mt-1",children:e.jsx(Ae,{readOnly:!0})}),e.jsx(r.Item,{name:"hcode"+n.id,hidden:!0,initialValue:l.hcode,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"userId"+n.id,hidden:!0,initialValue:l.id,children:e.jsx(g,{})}),e.jsx("p",{className:"mt-6 font-bold",children:n.sub_quest_require_point})]})]})}))]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:_.length>0?e.jsx(r.Item,{children:e.jsxs(H,{type:"primary",htmlType:"submit",style:{width:500},disabled:E,children:[e.jsx(Ie,{})," บันทึกผลการประเมิน"]})}):null})})]})]})}),e.jsxs(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:M,onOk:Q.submit,onCancel:$,width:450,style:{top:20},children:[e.jsx(je,{}),e.jsxs(r,{name:"formUpload",form:Q,layout:"vertical",onFinish:re,onFinishFailed:ae,children:[e.jsx(r.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(X,{options:[{value:"4",label:"ด้านบุคลากร"}]})}),e.jsx(r.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(X,{options:[{value:l.hcode,label:l.hname_th}]})}),e.jsx(r.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(X,{options:[{value:l.id,label:l.firstname_th+" "+l.lastname_th}]})}),e.jsx(r.Item,{name:"file_name",label:e.jsx("b",{children:"แนบเอกสาร/หลักฐาน"}),children:e.jsx(ze,{customRequest:({onSuccess:n})=>n("ok"),...al,children:e.jsxs(H,{children:[e.jsx(ye,{})," แนบไฟล์ .pdf ขนาดไม่เกิน 15 MB"]})})})]})]}),e.jsxs(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-green-600"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แนบเอกสาร/หลักฐาน"})]}),open:G,onOk:te.submit,onCancel:$,width:450,style:{top:20},children:[e.jsx(je,{}),e.jsxs(r,{name:"formUploadItem",form:te,layout:"vertical",onFinish:P,onFinishFailed:ae,children:[e.jsx(r.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx(X,{options:[{value:I?I.category_questId:null,label:I?I.category_quests.category_name_th:null}]})}),e.jsx(r.Item,{name:"questId",label:e.jsx("b",{children:"เกณฑ์การประเมินหลัก"}),children:e.jsx(X,{options:[{value:I?I.questId:null,label:I?I.quests.quest_name:null}]})}),e.jsx(r.Item,{name:"sub_questId",hidden:!0,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"sub_quest_name",label:e.jsx("b",{children:"เกณฑ์การประเมินย่อย"}),children:e.jsx(g.TextArea,{rows:3,readOnly:!0})}),e.jsx(r.Item,{name:"hcode",label:e.jsx("b",{children:"รหัสหน่วยบริการ"}),children:e.jsx(X,{options:[{value:l.hcode,label:l.hname_th}]})}),e.jsx(r.Item,{name:"usersId",label:e.jsx("b",{children:"ผู้บันทึก"}),children:e.jsx(X,{options:[{value:l.id,label:l.firstname_th+" "+l.lastname_th}]})}),e.jsx(r.Item,{name:"file_name",label:e.jsx("b",{children:"อัปโหลดไฟล์/เอกสาร หลักฐาน"}),children:e.jsx(ze,{customRequest:({onSuccess:n})=>n("ok"),children:e.jsxs(H,{children:[e.jsx(ye,{})," อัปโหลดไฟล์นามสกุล (.jpg หรือ .png หรือ .pdf)"]})})})]})]})]})]})},ll=()=>e.jsx("div",{children:e.jsx(nl,{})}),rl=a=>{const[l,p]=c.useState(),[h,z]=c.useState(1);function E({numPages:q}){p(q)}return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center bg-slate-200 p-5 mt-5 items-center",children:e.jsx(ha,{file:a.pdfFile,onLoadSuccess:E,children:Array.apply(null,Array(l)).map((q,M)=>M+1).map(q=>e.jsx(xa,{pageNumber:q,renderTextLayer:!1,renderAnnotationLayer:!1}))})}),e.jsxs("p",{children:["Page ",h," of ",l]})]})},{confirm:cl}=xe;ma.workerSrc=`//unpkg.com/pdfjs-dist@${ua}/build/pdf.worker.min.mjs`;const ol={onChange({file:a,fileList:l}){a.status!=="uploading"&&console.log(a,l)},showUploadList:{extra:({size:a=0})=>e.jsxs("span",{className:"text-slate-400",children:[" (",(a/1024/1024).toFixed(2),"MB)"]}),showRemoveIcon:!0}},il=()=>{var ds,hs,xs,us,ms;const a=O(A=>A.user),l=O(A=>A.token),[p,h]=c.useState([]),[z,E]=c.useState([]),[q,M]=c.useState([]),[L,G]=c.useState({}),[T,u]=c.useState([]),[v,_]=c.useState([]),[i,f]=c.useState(!1),[j,I]=c.useState(!1),[k,le]=c.useState(!1),[Q,te]=c.useState(!1),[ee]=r.useForm(),[W]=r.useForm(),[y,C]=c.useState(""),[m,N]=c.useState(),[ne,Y]=c.useState(),[R,$]=c.useState([]),[re,ae]=c.useState(null),[P,n]=c.useState(),[F,x]=c.useState(1);c.useEffect(()=>{t(),d(),K(),se()},[]),c.useEffect(()=>{let A=setTimeout(()=>{o()},2e3);return()=>{clearTimeout(A)}},[]);const K=async()=>{await Le(l).then(A=>{$(A.data)}).catch(A=>{console.log(A)})},t=async()=>{await Ds(l).then(A=>{h(A.data)}).catch(A=>{console.log(A)})},D=p.map(A=>({value:A.id,label:A.category_name_th,key:A.id})),d=async()=>{await Ne(l).then(A=>{E(A.data)}).catch(A=>{console.log(A)})},U=a.hcode,se=async()=>{f(!0),await Ft(l,U).then(A=>{M(A.data)}).catch(A=>{console.log(A)}).finally(()=>f(!1))},J=A=>{C(A),u(q.filter(ie=>ie.category_questId===A)),_(z.filter(ie=>ie.category_questId===A))},fe=async A=>{console.log("Value: ",A),le(!0),await Os(l,A.id).then(ie=>{G(ie.data)}).catch(ie=>{console.log(ie)})},o=()=>{u(q.filter(A=>A.category_questId===y))};c.useEffect(()=>{W.setFieldsValue({evaluateId:L.id,file_name:[]})});const S=async A=>{console.log(A),I(!0),await Os(l,A).then(ie=>{console.log("GetById: ",ie.data),G(ie.data)}).catch(ie=>{console.log(ie)})};c.useEffect(()=>{ee.setFieldsValue({id:L.id,category_questId:L.category_questId,questId:L.questId,sub_questId:L.sub_questId,check:L.check,hcode:L.hcode,userId:L.userId})});const b=async A=>{const ie={...A,id:L.id};console.log("Values: ",ie),await Na(l,ie).then(me=>{V.success(me.data.message),I(!1),se()}).catch(me=>{console.log(me.response.data.message),V.error(me.response.data.message)})},ue=async A=>{const ie=new FormData;ie.append("file_name",A.file_name.file.originFileObj),await wa(l,L.id,ie).then(me=>{V.success(me.data.message),le(!1),se(),W.resetFields()}).catch(me=>{console.log(me.response.data),V.error(me.response.data.message)})},w=A=>{console.log("Failed: ",A)},B=()=>{I(!1),le(!1),te(!1)},oe=A=>{console.log(A),Qe(l,A,U).then(ie=>{ie.data?window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${ie.data.file_name}`,"_blank","noreferrer"):V.warning("ไม่พบข้อมูล!")}).catch(ie=>{console.log(ie)})},Se=async A=>{te(!0),await Os(l,A).then(ie=>{console.log("GetById: ",ie.data),G(ie.data),ae(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${ie.data.file_name}`)}).catch(ie=>{console.log(ie)})},Fe=T.map(A=>({id:A.id,category_questId:A.category_questId,questId:A.questId,sub_questId:A.sub_questId,sub_quest_name:A.sub_quests.sub_quest_name,check:A.check.split(","),hcode:A.hcode,userId:A.userId,file_name:A.file_name,ssj_approve:A.ssj_approve,zone_approve:A.zone_approve,createdAt:A.createdAt,updatedAt:A.updatedAt})),ge=R.map(A=>({id:A.id,sub_questId:A.sub_questId,choice:A.choice,sub_quest_listname:A.sub_quest_listname,sub_quest_total_point:A.sub_quest_total_point,sub_quest_require_point:A.sub_quest_require_point,description:A.description,necessary:A.necessary,createdAt:A.createdAt,updatedAt:A.updatedAt})),ws=A=>{console.log(A),cl({title:"ต้องการลบไฟล์หลักฐานนี้หรือไม่?",icon:e.jsx(he,{}),okText:"ใช่",okType:"danger",cancelText:"ไม่",onOk(){Ia(l,A).then(ie=>{V.error(ie.data.message),te(!1),se()}).catch(ie=>{console.log(ie)})},onCancel(){console.log("Cancel")}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:[e.jsx(Cs,{})," ",e.jsx("p",{className:"ml-2",children:" รายงานผลการประเมินโรงพยาบาลอัจฉริยะ ประจำปีงบประมาณ 2568"})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-1",children:[e.jsx("p",{className:"font-bold",children:"ด้านการประเมิน : "}),e.jsx(X,{onChange:A=>J(A),options:D,placeholder:"กรุณาเลือกด้านการประเมินที่ต้องการ...",style:{width:"20%"}}),T.length>0?e.jsx(e.Fragment,{children:e.jsxs(H,{onClick:()=>oe(y),children:[e.jsx(Ke,{})," ดูหลักฐานไฟล์รวม"]})}):null,e.jsxs(H,{onClick:o,children:[e.jsx(Kt,{size:13})," รีเฟรช"]})]}),e.jsx(je,{}),e.jsxs("div",{children:[i?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(Ps,{className:"w-16 h-16 text-blue-400 animate-spin"})})}):e.jsx(e.Fragment,{children:e.jsxs("table",{className:"text-left table-fixed w-full min-w-screen text-slate-800",children:[e.jsx("thead",{className:"",children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",style:{fontSize:"15px"},children:[e.jsx("th",{className:"text-center p-4 border-r",style:{width:500},children:"เกณฑ์การประเมิน"}),e.jsx("th",{className:"text-center p-4 border-r",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-center p-4 border-r",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r",children:"ภาพหลักฐาน"}),e.jsx("th",{className:"text-center p-4 border-r",children:"แก้ไข"})]})}),e.jsx("tbody",{children:v.map((A,ie)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border",children:e.jsx("td",{className:"p-1 text-amber-950 font-bold",colSpan:5,children:A.quest_name})},ie),Fe.map((me,qs)=>{var ps,es,js;return A.id===me.questId?e.jsxs("tr",{className:"border",children:[e.jsxs("td",{className:"pl-5 pr-1 py-1 border-r w-screen",style:{fontSize:"15px"},children:[e.jsx("p",{className:"font-bold",children:me.sub_quest_name}),(ps=me.check)==null?void 0:ps.map(Pe=>ge.map(_e=>_e.sub_questId===me.sub_questId&&_e.choice===Pe?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(we,{checked:!0}),e.jsx("p",{className:_e.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:_e.sub_quest_listname})]}):null))]}),e.jsx("td",{className:"text-center border-r",children:(es=me.check)==null?void 0:es.map(Pe=>ge.map(_e=>_e.sub_questId===me.sub_questId&&_e.choice===Pe?e.jsx("div",{children:e.jsx("p",{className:"font-bold",children:_e.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-r",style:{fontSize:"15px"},children:(js=me.check)==null?void 0:js.map(Pe=>ge.map(_e=>_e.sub_questId===me.sub_questId&&_e.choice===Pe?e.jsx("div",{children:e.jsx("p",{className:"font-bold",children:_e.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-r",style:{fontSize:"15px"},children:me.file_name?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs(H,{size:"small",onClick:()=>Se(me.id),children:[e.jsx(Ke,{})," ดูไฟล์หลักฐาน"]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsxs(H,{size:"small",onClick:()=>fe(me),children:[e.jsx(ye,{})," เพิ่มไฟล์ pdf"]})})})}),e.jsx("td",{className:"text-center",children:e.jsx("div",{className:"",children:e.jsxs(H,{size:"small",className:"bg-yellow-400 text-white",onClick:()=>S(me.id),children:[e.jsx(ta,{})," แก้ไข"]})})})]},qs):null})]}))})]})}),e.jsxs(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-yellow-500"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"Upload ไฟล์หลักฐาน"})]}),open:k,onOk:W.submit,onCancel:B,width:480,style:{top:20},children:[e.jsx(je,{}),e.jsxs(r,{name:"formUpload",form:W,layout:"vertical",onFinish:ue,onFinishFailed:w,className:"mt-2",children:[e.jsx("div",{className:"m-2",children:L.length>0?e.jsx("p",{className:"text-md text-blue-700 font-bold",children:L.sub_quests.sub_quest_name}):null}),e.jsx(r.Item,{name:"file_name",label:e.jsx("b",{children:"อัปโหลดไฟล์/เอกสาร หลักฐาน"}),rules:[{required:!0,message:"กรุณาเลือกไฟล์!"}],children:e.jsx(ze,{customRequest:({onSuccess:A})=>A("ok"),...ol,children:e.jsxs(H,{children:[e.jsx(ye,{})," อัปโหลดไฟล์นามสกุล (.pdf) และขนาดไฟล์ต้องไม่เกิน 2 MB เท่านั้น!"]})})})]})]}),e.jsx(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-yellow-500"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"แก้ไขคำตอบการประเมิน"})]}),open:j,onOk:ee.submit,onCancel:B,width:450,style:{top:20},children:e.jsxs(r,{name:"formUpdate",form:ee,layout:"vertical",onFinish:b,onFinishFailed:w,className:"mt-2",children:[e.jsx(r.Item,{name:"hcode",label:e.jsx("b",{children:"หน่วยบริการ"}),children:e.jsx("div",{className:"p-1 border rounded-md",children:L.hcode?a.hname_th+" ["+L.hcode+"]":null})}),e.jsx(r.Item,{name:"category_questId",label:e.jsx("b",{children:"ด้านการประเมิน"}),children:e.jsx("div",{className:"p-1 border rounded-md",children:L.category_questId?L.category_quests.category_name_th:null})}),e.jsx(r.Item,{name:"questId",label:e.jsx("b",{children:"เกณฑ์หลัก"}),children:e.jsx("div",{className:"p-1 border rounded-md",children:L.questId?L.quests.quest_name:null})}),e.jsx(r.Item,{name:"sub_questId",label:e.jsx("b",{children:"เกณฑ์ย่อย"}),children:e.jsx("div",{className:"p-1 border rounded-md",children:L.sub_questId?L.sub_quests.sub_quest_name:null})}),e.jsx("div",{className:"flex justify-between",children:e.jsx("div",{children:e.jsx(r.Item,{name:"check",label:e.jsx("b",{children:"ตัวเลือกประเมิน"}),rules:[{required:!0,message:"ระบุคะแนนจำเป็น"}],children:L.sub_questId===76?e.jsx(e.Fragment,{children:e.jsx(we.Group,{style:{display:"inline-block"},children:(hs=(ds=L==null?void 0:L.sub_quests)==null?void 0:ds.sub_quest_lists)==null?void 0:hs.map((A,ie)=>e.jsxs("div",{className:"flex gap-1",children:[e.jsx(we,{value:A.choice},ie),e.jsx("p",{className:"text-green-700",children:A.sub_quest_listname})]}))})}):e.jsx(e.Fragment,{children:e.jsx(de.Group,{children:e.jsx(qe,{direction:"vertical",children:(us=(xs=L==null?void 0:L.sub_quests)==null?void 0:xs.sub_quest_lists)==null?void 0:us.map(A=>e.jsx(de,{value:A.choice,className:A.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700 pl-7":"text-green-700 pl-7",children:A.sub_quest_listname}))})})})})})}),e.jsx(r.Item,{name:"userId",label:e.jsx("b",{children:"ผู้ประเมิน"}),children:e.jsx("div",{className:"p-1 border rounded-md",children:L.userId?a.firstname_th+" "+a.lastname_th:null})})]})}),e.jsxs(xe,{title:e.jsxs("div",{className:"flex justify-center",children:[e.jsx(he,{className:"text-yellow-500"}),"  ",e.jsx("span",{className:"text-xl font-bold",children:"ดูข้อมูลหลักฐาน"})]}),open:Q,onCancel:B,width:700,style:{top:20},footer:e.jsx(H,{size:"small",color:"danger",onClick:B,variant:"dashed",children:"ปิด"}),children:[e.jsx(je,{}),e.jsx("div",{children:e.jsx("p",{className:"text-slate-600 font-bold",children:(ms=L==null?void 0:L.sub_quests)==null?void 0:ms.sub_quest_name})}),e.jsx("div",{className:"flex gap-4 mt-2",children:e.jsxs(H,{size:"small",color:"danger",variant:"outlined",onClick:()=>ws(L==null?void 0:L.id),children:[e.jsx(Wt,{size:16})," ลบไฟล์หลักฐานนี้"]})}),e.jsx("div",{children:e.jsx(rl,{pdfFile:re})})]})]})]})]})},dl=()=>(pe("รายงานผลการประเมิน"),e.jsx("div",{children:e.jsx(il,{})}));ve.extend(cs);const hl=()=>{const a=O(_=>_.user),l=O(_=>_.token),[p,h]=c.useState([]),[z,E]=c.useState([]),[q,M]=c.useState(!1);c.useEffect(()=>{L(l,a.province)},[]);const L=async()=>{M(!0),await Xa(l,a.province).then(_=>{h(_.data),E(_.data)}).catch(_=>{console.log(_)}).finally(()=>M(!1))},G=_=>{E(p.filter(i=>i.hcode.toLowerCase().includes(_.target.value)||i.hname_th.toLowerCase().includes(_.target.value)||i.firstname_th.toLowerCase().includes(_.target.value)))},T=z.map((_,i)=>({..._,key:i})),u=[{title:"ลำดับ",align:"center",render:({key:_})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:_+1})})},{title:"ชื่อ-นามสกุล",render:({title_th:_,firstname_th:i,lastname_th:f})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px",marginLeft:"5px"},children:[_," ",i," ",f]})})},{title:e.jsx("p",{className:"text-center",children:"หน่วยบริการ"}),render:({hname_th:_,hcode:i})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:[_," [",i,"]"]})})},{title:e.jsx("p",{className:"text-center",children:"ตำแหน่ง"}),render:({position:_,position_id:i})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:[_," [",i,"]"]})})},{title:"ระดับ",dataIndex:"level",align:"center",render:_=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:_==1?"ส่วนกลาง":_==2?"เขตสุขภาพ":_==3?"จังหวัด":_==4?"หน่วยบริการ":""})})},{title:"สิทธิ",dataIndex:"role",align:"center",render:_=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:_})})},{title:"ประเภท",dataIndex:"objective",align:"center",width:"10%",render:_=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:_==="responder"?"ผู้ประเมิน รพ.":_==="prov_approve"?"คกก.สสจ.":_==="zone_approve"?"คกก.เขตฯ":null})})},{title:"การอนุมัติ",align:"center",render:({enabled:_,id:i})=>e.jsx(e.Fragment,{children:e.jsx(Ys,{size:"small",checked:_,onChange:f=>v(f,i)})})},{title:"วันที่เพิ่ม",align:"center",render:({createdAt:_})=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:ve(_).locale("th").format("DD MMM BB")})})},{title:"วันที่แก้ไข",align:"center",render:({updatedAt:_})=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:ve(_).locale("th").format("DD MMM BB")})})}],v=(_,i)=>{Ws(l,{id:i,enabled:_}).then(j=>{V.success(j.data.message),L(l,a.province)}).catch(j=>{console.log(j)})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:[e.jsx(ks,{})," ",e.jsx("p",{className:"ml-2",children:"จัดการ user รพ.ในจังหวัด"})]}),e.jsxs("div",{className:"border rounded-md p-2 bg-white shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-3",children:[e.jsx("div",{children:e.jsxs("p",{style:{fontSize:"14px"},children:["จำนวนบัญชีทั้งหมด ",z.length," รายการ"]})}),e.jsx("div",{children:e.jsx(g,{placeholder:"ค้นหาด้วย hcode, ชื่อ, ชื่อหน่วยบริการ...",className:"rounded-full",style:{width:250},prefix:e.jsx(Xe,{}),onChange:G})})]}),e.jsx(We,{columns:u,dataSource:T,bordered:!0,size:"small",pagination:{pageSize:12}})]})]})},xl=()=>(pe("จัดการผู้ใช้งาน (รพ.จังหวัด)"),e.jsx("div",{children:e.jsx(hl,{})})),ul=async(a,l,p)=>await Z.get(`https://bdh-service.moph.go.th/api/smarthosp/getDocumentsByEvaluateByHosp?category_questId=${l}&hcode=${p}`,{headers:{Authorization:"Bearer "+a}}),ml=()=>{var fe;be();const a=O(o=>o.user),l=O(o=>o.token),[p,h]=c.useState(!1),[z,E]=c.useState(!1),[q,M]=c.useState(!1),[L,G]=c.useState([]),[T,u]=c.useState([]),[v,_]=c.useState([]),[i,f]=c.useState(),[j,I]=c.useState(""),[k,le]=c.useState([]),[Q,te]=c.useState([]),[ee]=r.useForm(),[W]=r.useForm(),y=a.province;c.useEffect(()=>{Y(),m(),C()},[]);const C=async()=>{await is(l,y).then(o=>{console.log(o.data),te(o.data)}).catch(o=>{console.log(o)})},m=async()=>{await Le(l).then(o=>{le(o.data)}).catch(o=>{console.log(o)})},N=k.map(o=>({id:o.id,sub_questId:o.sub_questId,choice:o.choice,sub_quest_listname:o.sub_quest_listname,sub_quest_total_point:o.sub_quest_total_point,sub_quest_require_point:o.sub_quest_require_point,description:o.description,necessary:o.necessary,createdAt:o.createdAt,updatedAt:o.updatedAt})),ne=async()=>{await Ne(l).then(o=>{G(o.data)}).catch(o=>{console.log(o)})},Y=()=>{h(!0),ys(l,y).then(o=>{u(o.data)}).catch(o=>{console.log(o)}).finally(()=>h(!1))},R=T.filter(o=>o.category_quests.id===1),re=[...new Map(R.map(o=>[o.hospitals.hname_th,o])).values()].map(o=>({value:o.hcode,label:o.hospitals.hname_th+" ["+o.hcode+"]"})),ae=1,P=o=>{E(!1),I(o),ne(),_(R.filter(S=>S.hcode===o)),ul(l,ae,o).then(S=>{f(S.data)}).catch(S=>{console.log(S)})},n=L.filter(o=>o.category_questId===1),F=o=>{Y(),m(),C(),_(R.filter(S=>S.hcode===o))},x=async o=>{E(!0);const S=[];v.forEach(b=>{S.push({evaluateId:o["evaluateId"+b.id],ssj_approve:o["ssj_approve"+b.id],usersId:o["usersId"+b.id],hcode:o["hcode"+b.id],province:o["province"+b.id],zone:o["zone"+b.id]})}),console.log("Result: ",S),await Bs(l,S).then(b=>{V.success(b.data.message),Y(),m(),C(),_(R.filter(ue=>ue.hcode===j))}).catch(b=>{console.log(b)})},K=o=>{console.log("Failed: ",o)},t=o=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${o}`,"_blank","noreferer")};c.useEffect(()=>{ee.setFieldsValue({evaluateId:v.id,usersId:a.id,province:a.province,zone:a.zone})});const D=v.map(o=>n.map(S=>o.quests.quest_name===S.quest_name?{quest_name:o.quest_name,sub_quest_name:S.sub_quest_name}:null));c.useEffect(()=>{W.setFieldsValue({evaluateId:v.id,usersId:a.id,province:a.province,zone:a.zone})});const d=Q.filter(o=>o.hcode===j);console.log("Hosp: ",j);const U=()=>{M(!0)},se=()=>{M(!1)},J=async o=>{const S=[];v.forEach(b=>{S.push({evaluateId:o["evaluateId"+b.id],ssj_approve:o["ssj_approve"+b.id],usersId:o["usersId"+b.id],hcode:o["hcode"+b.id],province:o["province"+b.id],zone:o["zone"+b.id]})}),console.log("Result2: ",S),await Ms(l,S).then(b=>{V.error(b.data.message),M(!1),Y(),m(),C(),_(R.filter(ue=>ue.hcode===j))}).catch(b=>{console.log(b)})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านโครงสร้าง"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกหน่วยบริการ : "}),e.jsx(X,{showSearch:!0,onChange:o=>P(o),optionFilterProp:"label",filterSort:(o,S)=>((o==null?void 0:o.label)??"").toLowerCase().localeCompare(((S==null?void 0:S.label)??"").toLowerCase()),options:re,placeholder:"กรุณาเลือกหน่วยบริการ...",style:{width:"40%"}}),i?e.jsx(e.Fragment,{children:e.jsxs(H,{onClick:()=>t(i.file_name),type:"primary",children:[e.jsx(Re,{})," ดูเอกสาร/หลักฐาน"]})}):null,e.jsxs(H,{style:{width:180},variant:"solid",onClick:()=>F(j),children:[e.jsx(Te,{})," Refresh (รีเฟรช!)"]})]}),e.jsx("p",{className:"text-sm text-orange-400 p-4",children:'หมายเหตุ: หากโรงพยาบาลประเมินมาไม่ครบทุกหัวข้อ หรือ มีข้อมูลซ้ำ ระบบจะไม่แสดงปุ่ม "Approve (อนุมัติ)"'}),e.jsx("div",{children:e.jsxs(r,{name:"formSsjApprove",form:ee,onFinish:x,onFinishFailed:K,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ไฟล์หลักฐาน"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"การอนุมัติ"})]})}),e.jsx("tbody",{children:n.map((o,S)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:5,children:e.jsx("p",{className:"ml-1 p-1 font-bold",style:{fontSize:"18px"},children:e.jsx("u",{children:o.quest_name})})})},S),v.map((b,ue)=>b.quests.quest_name===o.quest_name?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(r.Item,{name:"evaluateId"+b.id,hidden:!0,initialValue:b.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hcode"+b.id,hidden:!0,initialValue:a.hcode,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"usersId"+b.id,hidden:!0,initialValue:a.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"province"+b.id,hidden:!0,initialValue:a.province,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone"+b.id,hidden:!0,initialValue:a.zone,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"ssj_approve"+b.id,hidden:!0,initialValue:!0,children:e.jsx(g,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("div",{className:"flex gap-1",children:e.jsx("p",{className:"font-bold text-slate-600",children:b.sub_quests.sub_quest_name})}),e.jsx("div",{className:"pl-10 flex gap-2",children:b.check.split(",").map(w=>N.map(B=>B.sub_questId===b.sub_quests.id&&B.choice===w?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(we,{checked:!0}),e.jsx("p",{className:B.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:B.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:b.check.split(",").map(w=>N.map(B=>B.sub_questId===b.sub_quests.id&&B.choice===w?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:B.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:b.check.split(",").map(w=>N.map(B=>B.sub_questId===b.sub_quests.id&&B.choice===w?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:B.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:b.file_name?e.jsx(e.Fragment,{children:e.jsxs(H,{onClick:()=>t(b.file_name),children:[e.jsx(Ke,{})," ดูไฟล์"]})}):e.jsx(e.Fragment,{children:"-"})})}),e.jsx("td",{className:"text-center border-l px-1",children:b.ssj_approve===!0?e.jsx("p",{className:"font-bold text-green-700",children:"อนุมัติแล้ว!"}):e.jsx("p",{className:"font-bold text-red-500",children:"ยังไม่อนุมัติ!"})})]},ue)}):null),e.jsx("div",{})]}))})]}),D.length===67?e.jsxs("div",{className:"flex justify-center space-x-1 mt-3 gap-3",children:[e.jsx("div",{className:"mt-3",children:e.jsx(r.Item,{children:e.jsxs(H,{type:"primary",htmlType:"submit",style:{width:180},disabled:D.length!==67,children:[e.jsx(Ie,{})," Approve (อนุมัติ!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(H,{color:"danger",style:{width:180},variant:"solid",onClick:U,children:[e.jsx(bs,{})," Cancel (ยกเลิก!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(H,{style:{width:180},variant:"solid",onClick:()=>F(j),children:[e.jsx(Te,{})," Refresh (รีเฟรช!)"]})})})]}):null]})})]}),e.jsx(xe,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"text-yellow-500"}),e.jsxs("span",{className:"font-bold",children:["คุณต้องการยกเลิกการอนุมัติด้านโครงสร้าง ของ",(fe=d[0])==null?void 0:fe.hname_th," หรือไม่?"]})]}),open:q,onOk:W.submit,onCancel:se,width:500,style:{top:20},children:e.jsx("div",{className:"h-4",children:e.jsx(r,{name:"formUnApprove",form:W,onFinish:J,onFinishFailed:K,children:n.map(o=>v.map(S=>S.quests.quest_name===o.quest_name?e.jsxs(e.Fragment,{children:[e.jsx(r.Item,{name:"evaluateId"+S.id,hidden:!0,initialValue:S.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hcode"+S.id,hidden:!0,initialValue:j,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"usersId"+S.id,hidden:!0,initialValue:a.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"province"+S.id,hidden:!0,initialValue:a.province,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone"+S.id,hidden:!0,initialValue:a.zone,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"ssj_approve"+S.id,hidden:!0,initialValue:!1,children:e.jsx(g,{})})]}):null))})})})]})},pl=()=>(pe("อนุมัติด้านโครงสร้าง"),e.jsx("div",{children:e.jsx(ml,{})})),jl=()=>{var fe;be();const a=O(o=>o.user),l=O(o=>o.token),[p,h]=c.useState(!1),[z,E]=c.useState(!1),[q,M]=c.useState(!1),[L,G]=c.useState([]),[T,u]=c.useState([]),[v,_]=c.useState([]),[i,f]=c.useState(),[j,I]=c.useState(null),[k,le]=c.useState([]),[Q,te]=c.useState([]),[ee]=r.useForm(),[W]=r.useForm(),y=a.province;c.useEffect(()=>{Y(),m(),C()},[]);const C=async()=>{await is(l,y).then(o=>{console.log(o.data),te(o.data)}).catch(o=>{console.log(o)})},m=async()=>{await Le(l).then(o=>{le(o.data)}).catch(o=>{console.log(o)})},N=k.map(o=>({id:o.id,sub_questId:o.sub_questId,choice:o.choice,sub_quest_listname:o.sub_quest_listname,sub_quest_total_point:o.sub_quest_total_point,sub_quest_require_point:o.sub_quest_require_point,description:o.description,necessary:o.necessary,createdAt:o.createdAt,updatedAt:o.updatedAt})),ne=async()=>{await Ne(l).then(o=>{u(o.data)}).catch(o=>{console.log(o)})},Y=async()=>{await ys(l,y).then(o=>{G(o.data)}).catch(o=>{console.log(o)})},R=L.filter(o=>o.category_quests.id===2),re=[...new Map(R.map(o=>[o.hospitals.hname_th,o])).values()].map(o=>({value:o.hcode,label:o.hospitals.hname_th+" ["+o.hcode+"]"})),ae=2,P=o=>{h(!1),I(o),ne(),_(R.filter(S=>S.hcode===o)),Qe(l,ae,o).then(S=>{f(S.data)}).catch(S=>{console.log(S)})},n=T.filter(o=>o.category_questId===2),F=o=>{Y(),m(),C(),_(R.filter(S=>S.hcode===o))};c.useEffect(()=>{ee.setFieldsValue({evaluateId:v.id,usersId:a.id,province:a.province,zone:a.zone})});const x=async o=>{h(!0);const S=[];v.forEach(b=>{S.push({evaluateId:o["evaluateId"+b.id],ssj_approve:o["ssj_approve"+b.id],hcode:o["hcode"+b.id],usersId:o["usersId"+b.id],province:o["province"+b.id],zone:o["zone"+b.id]})}),console.log("Result: ",S),await Bs(l,S).then(b=>{V.success(b.data.message),Y(),m(),C(),_(R.filter(ue=>ue.hcode===j))}).catch(b=>{console.log(b)})},K=o=>{console.log("Failed: ",o)},t=v.map(o=>n.map(S=>o.quests.quest_name===S.quest_name?{quest_name:o.quest_name,sub_quest_name:S.sub_quest_name}:null)),D=o=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${o}`,"_blank","noreferer")};c.useEffect(()=>{W.setFieldsValue({evaluateId:v.id,usersId:a.id,province:a.province,zone:a.zone})});const d=Q.filter(o=>o.hcode===j);console.log("Hosp: ",j);const U=()=>{M(!0)},se=()=>{M(!1)},J=async o=>{const S=[];v.forEach(b=>{S.push({evaluateId:o["evaluateId"+b.id],ssj_approve:o["ssj_approve"+b.id],usersId:o["usersId"+b.id],hcode:o["hcode"+b.id],province:o["province"+b.id],zone:o["zone"+b.id]})}),console.log("Result2: ",S),await Ms(l,S).then(b=>{V.error(b.data.message),M(!1),Y(),m(),C(),_(R.filter(ue=>ue.hcode===j))}).catch(b=>{console.log(b)})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านบริหารจัดการ"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกหน่วยบริการ : "}),e.jsx(X,{showSearch:!0,onChange:o=>P(o),optionFilterProp:"label",filterSort:(o,S)=>((o==null?void 0:o.label)??"").toLowerCase().localeCompare(((S==null?void 0:S.label)??"").toLowerCase()),options:re,placeholder:"กรุณาเลือกหน่วยบริการ...",style:{width:"40%"}}),i?e.jsx(e.Fragment,{children:e.jsxs(H,{onClick:()=>D(i.file_name),type:"primary",children:[e.jsx(Re,{})," ดูเอกสาร/หลักฐาน"]})}):null,e.jsxs(H,{style:{width:180},variant:"solid",onClick:()=>F(j),children:[e.jsx(Te,{})," Refresh (รีเฟรช!)"]})]}),e.jsx("p",{className:"text-sm text-orange-400 p-4",children:'หมายเหตุ: หากโรงพยาบาลประเมินมาไม่ครบทุกหัวข้อ หรือ มีข้อมูลซ้ำ ระบบจะไม่แสดงปุ่ม "Approve (อนุมัติ)"'}),e.jsx("div",{children:e.jsxs(r,{name:"formSsjApprove",form:ee,onFinish:x,onFinishFailed:K,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ไฟล์หลักฐาน"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"การอนุมัติ"})]})}),e.jsx("tbody",{children:n.map((o,S)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:5,children:e.jsx("p",{className:"ml-1 p-1 font-bold",style:{fontSize:"18px"},children:e.jsx("u",{children:o.quest_name})})})},S),v.map((b,ue)=>b.quests.quest_name===o.quest_name?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(r.Item,{name:"evaluateId"+b.id,hidden:!0,initialValue:b.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"ssj_approve"+b.id,hidden:!0,initialValue:!0,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"usersId"+b.id,hidden:!0,initialValue:a.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hcode"+b.id,hidden:!0,initialValue:a.hcode,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"province"+b.id,hidden:!0,initialValue:a.province,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone"+b.id,hidden:!0,initialValue:a.zone,children:e.jsx(g,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"font-bold text-slate-600",children:b.sub_quests.sub_quest_name}),e.jsx("div",{className:"pl-10 gap-2",children:b.check.split(",").map(w=>N.map(B=>B.sub_questId===b.sub_quests.id&&B.choice===w?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(we,{checked:!0}),e.jsx("p",{className:B.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:B.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:b.check.split(",").map(w=>N.map(B=>B.sub_questId===b.sub_quests.id&&B.choice===w?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:B.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:b.check.split(",").map(w=>N.map(B=>B.sub_questId===b.sub_quests.id&&B.choice===w?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:B.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:b.file_name?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs(H,{onClick:()=>D(b.file_name),children:[e.jsx(Ke,{})," ดูไฟล์"]})})}):e.jsx(e.Fragment,{children:"-"})})}),e.jsx("td",{className:"text-center border-l px-1",children:b.ssj_approve===!0?e.jsx("p",{className:"font-bold text-green-700",children:"อนุมัติแล้ว!"}):e.jsx("p",{className:"font-bold text-red-500",children:"ยังไม่อนุมัติ!"})})]},ue)}):null)]}))})]}),t.length===42?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-center space-x-1 mt-3",children:[e.jsx("div",{className:"m-3",children:e.jsx(r.Item,{children:e.jsxs(H,{type:"primary",htmlType:"submit",style:{width:180},children:[e.jsx(Ie,{})," Approve (อนุมัติ!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(H,{color:"danger",style:{width:180},variant:"solid",onClick:U,children:[e.jsx(bs,{})," Cancel (ยกเลิก!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(H,{style:{width:180},variant:"solid",onClick:()=>F(j),children:[e.jsx(Te,{})," Refresh (รีเฟรช!)"]})})})]})}):null]})})]}),e.jsx(xe,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"text-yellow-500"}),e.jsxs("span",{className:"font-bold",children:["คุณต้องการยกเลิกการอนุมัติด้านบริหารจัดการ ของ",(fe=d[0])==null?void 0:fe.hname_th," หรือไม่?"]})]}),open:q,onOk:W.submit,onCancel:se,width:500,style:{top:20},children:e.jsx("div",{className:"h-4",children:e.jsx(r,{name:"formUnApprove",form:W,onFinish:J,onFinishFailed:K,children:n.map(o=>v.map(S=>S.quests.quest_name===o.quest_name?e.jsxs(e.Fragment,{children:[e.jsx(r.Item,{name:"evaluateId"+S.id,hidden:!0,initialValue:S.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hcode"+S.id,hidden:!0,initialValue:j,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"usersId"+S.id,hidden:!0,initialValue:a.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"province"+S.id,hidden:!0,initialValue:a.province,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone"+S.id,hidden:!0,initialValue:a.zone,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"ssj_approve"+S.id,hidden:!0,initialValue:!1,children:e.jsx(g,{})})]}):null))})})})]})},gl=()=>(pe("อนุมัติด้านบริหารจัดการ"),e.jsx("div",{children:e.jsx(jl,{})})),bl=()=>{var fe;be();const a=O(o=>o.user),l=O(o=>o.token),[p,h]=c.useState(!1),[z,E]=c.useState(!1),[q,M]=c.useState(!1),[L,G]=c.useState([]),[T,u]=c.useState([]),[v,_]=c.useState([]),[i,f]=c.useState(),[j,I]=c.useState(null),[k,le]=c.useState([]),[Q,te]=c.useState([]),[ee]=r.useForm(),[W]=r.useForm(),y=a.province;c.useEffect(()=>{Y(),m(),C()},[]);const C=async()=>{await is(l,y).then(o=>{console.log(o.data),te(o.data)}).catch(o=>{console.log(o)})},m=async()=>{await Le(l).then(o=>{le(o.data)}).catch(o=>{console.log(o)})},N=k.map(o=>({id:o.id,sub_questId:o.sub_questId,choice:o.choice,sub_quest_listname:o.sub_quest_listname,sub_quest_total_point:o.sub_quest_total_point,sub_quest_require_point:o.sub_quest_require_point,description:o.description,necessary:o.necessary,createdAt:o.createdAt,updatedAt:o.updatedAt})),ne=async()=>{await Ne(l).then(o=>{u(o.data)}).catch(o=>{console.log(o)})},Y=async()=>{await ys(l,y).then(o=>{G(o.data)}).catch(o=>{console.log(o)})},R=L.filter(o=>o.category_quests.id===3),re=[...new Map(R.map(o=>[o.hospitals.hname_th,o])).values()].map(o=>({value:o.hcode,label:o.hospitals.hname_th+" ["+o.hcode+"]"})),ae=3,P=o=>{h(!1),I(o),ne(),_(R.filter(S=>S.hcode===o)),Qe(l,ae,o).then(S=>{f(S.data)}).catch(S=>{console.log(S)})},n=T.filter(o=>o.category_questId===3),F=o=>{Y(),m(),C(),_(R.filter(S=>S.hcode===o))};c.useEffect(()=>{ee.setFieldsValue({evaluateId:v.id,usersId:a.id,province:a.province,zone:a.zone})});const x=async o=>{h(!0);const S=[];v.forEach(b=>{S.push({evaluateId:o["evaluateId"+b.id],ssj_approve:o["ssj_approve"+b.id],usersId:o["usersId"+b.id],hcode:o["hcode"+b.id],province:o["province"+b.id],zone:o["zone"+b.id]})}),console.log("Result: ",S),await Bs(l,S).then(b=>{V.success(b.data.message),Y(),m(),C(),_(R.filter(ue=>ue.hcode===j))}).catch(b=>{console.log(b)})},K=o=>{console.log("Failed: ",o)},t=v.map(o=>n.map(S=>o.quests.quest_name===S.quest_name?{quest_name:o.quest_name,sub_quest_name:S.sub_quest_name}:null)),D=o=>{console.log(o),window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${o}`,"_blank","noreferer")};c.useEffect(()=>{W.setFieldsValue({evaluateId:v.id,usersId:a.id,province:a.province,zone:a.zone})});const d=Q.filter(o=>o.hcode===j);console.log("Hosp: ",j);const U=()=>{M(!0)},se=()=>{M(!1)},J=async o=>{const S=[];v.forEach(b=>{S.push({evaluateId:o["evaluateId"+b.id],ssj_approve:o["ssj_approve"+b.id],usersId:o["usersId"+b.id],hcode:o["hcode"+b.id],province:o["province"+b.id],zone:o["zone"+b.id]})}),console.log("Result2: ",S),await Ms(l,S).then(b=>{V.error(b.data.message),M(!1),Y(),m(),C(),_(R.filter(ue=>ue.hcode===j))}).catch(b=>{console.log(b)})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านการบริการ"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกหน่วยบริการ : "}),e.jsx(X,{showSearch:!0,onChange:o=>P(o),optionFilterProp:"label",filterSort:(o,S)=>((o==null?void 0:o.label)??"").toLowerCase().localeCompare(((S==null?void 0:S.label)??"").toLowerCase()),options:re,placeholder:"กรุณาเลือกหน่วยบริการ...",style:{width:"40%"}}),i?e.jsx(e.Fragment,{children:e.jsxs(H,{onClick:()=>D(i.file_name),type:"primary",children:[e.jsx(Re,{})," ดูเอกสาร/หลักฐาน"]})}):null,e.jsxs(H,{style:{width:180},variant:"solid",onClick:()=>F(j),children:[e.jsx(Te,{})," Refresh (รีเฟรช!)"]})]}),e.jsx("p",{className:"text-sm text-orange-400 p-4",children:'หมายเหตุ: หากโรงพยาบาลประเมินมาไม่ครบทุกหัวข้อ หรือ มีข้อมูลซ้ำ ระบบจะไม่แสดงปุ่ม "Approve (อนุมัติ)"'}),e.jsx("div",{children:e.jsxs(r,{name:"formSsjApprove",form:ee,onFinish:x,onFinishFailed:K,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ไฟล์หลักฐาน"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"การอนุมัติ"})]})}),e.jsx("tbody",{children:n.map((o,S)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:5,children:e.jsx("p",{className:"ml-1 p-1 font-bold",style:{fontSize:"18px"},children:e.jsx("u",{children:o.quest_name})})})},S),v.map((b,ue)=>b.quests.quest_name===o.quest_name?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(r.Item,{name:"evaluateId"+b.id,hidden:!0,initialValue:b.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"ssj_approve"+b.id,hidden:!0,initialValue:!0,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"usersId"+b.id,hidden:!0,initialValue:a.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hcode"+b.id,hidden:!0,initialValue:a.hcode,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"province"+b.id,hidden:!0,initialValue:a.province,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone"+b.id,hidden:!0,initialValue:a.zone,children:e.jsx(g,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"font-bold text-slate-600",children:b.sub_quests.sub_quest_name}),e.jsx("div",{className:"pl-10 flex gap-2",children:b.check.split(",").map(w=>N.map(B=>B.sub_questId===b.sub_quests.id&&B.choice===w?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(we,{checked:!0}),e.jsx("p",{className:B.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:B.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:b.check.split(",").map(w=>N.map(B=>B.sub_questId===b.sub_quests.id&&B.choice===w?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:B.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:b.check.split(",").map(w=>N.map(B=>B.sub_questId===b.sub_quests.id&&B.choice===w?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:B.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:b.file_name?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs(H,{onClick:()=>D(b.file_name),children:[e.jsx(Ke,{})," ดูไฟล์"]})})}):e.jsx(e.Fragment,{children:"-"})})}),e.jsx("td",{className:"text-center border-l px-1",children:b.ssj_approve===!0?e.jsx("p",{className:"font-bold text-green-700",children:"อนุมัติแล้ว!"}):e.jsx("p",{className:"font-bold text-red-500",children:"ยังไม่อนุมัติ!"})})]},ue)}):null)]}))})]}),t.length===44?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-center space-x-1 mt-3",children:[e.jsx("div",{className:"m-3",children:e.jsx(r.Item,{children:e.jsxs(H,{type:"primary",htmlType:"submit",style:{width:180},disabled:t.length!==44,children:[e.jsx(Ie,{})," Approve (อนุมัติ!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(H,{color:"danger",style:{width:180},variant:"solid",onClick:U,children:[e.jsx(bs,{})," Cancel (ยกเลิก!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(H,{style:{width:180},variant:"solid",onClick:()=>F(j),children:[e.jsx(Te,{})," Refresh (รีเฟรช!)"]})})})]})}):null]})})]}),e.jsx(xe,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"text-yellow-500"}),e.jsxs("span",{className:"font-bold",children:["คุณต้องการยกเลิกการอนุมัติด้านการบริการ ของ",(fe=d[0])==null?void 0:fe.hname_th," หรือไม่?"]})]}),open:q,onOk:W.submit,onCancel:se,width:500,style:{top:20},children:e.jsx("div",{className:"h-4",children:e.jsx(r,{name:"formUnApprove",form:W,onFinish:J,onFinishFailed:K,children:n.map(o=>v.map(S=>S.quests.quest_name===o.quest_name?e.jsxs(e.Fragment,{children:[e.jsx(r.Item,{name:"evaluateId"+S.id,hidden:!0,initialValue:S.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hcode"+S.id,hidden:!0,initialValue:j,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"usersId"+S.id,hidden:!0,initialValue:a.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"province"+S.id,hidden:!0,initialValue:a.province,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone"+S.id,hidden:!0,initialValue:a.zone,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"ssj_approve"+S.id,hidden:!0,initialValue:!1,children:e.jsx(g,{})})]}):null))})})})]})},vl=()=>e.jsx("div",{children:e.jsx(bl,{})}),fl=()=>{var ue;be();const a=O(w=>w.user),l=O(w=>w.token),[p,h]=c.useState(!1),[z,E]=c.useState(!1),[q,M]=c.useState(!1),[L,G]=c.useState([]),[T,u]=c.useState([]),[v,_]=c.useState([]),[i,f]=c.useState(),[j,I]=c.useState(null),[k,le]=c.useState([]),[Q,te]=c.useState([]),[ee,W]=c.useState([]),[y]=r.useForm(),[C]=r.useForm(),m=a.province;c.useEffect(()=>{ae(),Y(),R(),N()},[]);const N=async()=>{await is(l,m).then(w=>{console.log(w.data),W(w.data)}).catch(w=>{console.log(w)})},ne=4,Y=async()=>{await zn(l,ne).then(w=>{le(w.data)}).catch(w=>{console.log(w)})},R=async()=>{await Le(l).then(w=>{te(w.data)}).catch(w=>{console.log(w)})},$=Q.map(w=>({id:w.id,sub_questId:w.sub_questId,choice:w.choice,sub_quest_listname:w.sub_quest_listname,sub_quest_total_point:w.sub_quest_total_point,sub_quest_require_point:w.sub_quest_require_point,description:w.description,necessary:w.necessary,createdAt:w.createdAt,updatedAt:w.updatedAt})),re=async()=>{await Ne(l).then(w=>{u(w.data)}).catch(w=>{console.log(w)})},ae=async()=>{await ys(l,m).then(w=>{G(w.data)}).catch(w=>{console.log(w)})},P=L.filter(w=>w.category_quests.id===4),F=[...new Map(P.map(w=>[w.hospitals.hname_th,w])).values()].map(w=>({value:w.hcode,label:w.hospitals.hname_th+" ["+w.hcode+"]"})),x=w=>{h(!1),I(w),re(),_(P.filter(B=>B.hcode===w)),Qe(l,ne,w).then(B=>{f(B.data)}).catch(B=>{console.log(B)})},K=T.filter(w=>w.category_questId===4),t=w=>{ae(),R(),N(),_(P.filter(B=>B.hcode===w))};c.useEffect(()=>{y.setFieldsValue({evaluateId:v.id,usersId:a.id,province:a.province,zone:a.zone})});const D=async w=>{h(!0);const B=[];v.forEach(oe=>{B.push({evaluateId:w["evaluateId"+oe.id],ssj_approve:w["ssj_approve"+oe.id],usersId:w["usersId"+oe.id],hcode:w["hcode"+oe.id],province:w["province"+oe.id],zone:w["zone"+oe.id]})}),console.log("Result: ",B),await Bs(l,B).then(oe=>{V.success(oe.data.message),ae(),R(),N(),_(P.filter(Se=>Se.hcode===j))}).catch(oe=>{console.log(oe)})},d=w=>{console.log("Failed: ",w)},U=w=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${w}`,"_blank","noreferer")},se=v.map(w=>K.map(B=>w.quests.quest_name===B.quest_name?{quest_name:w.quest_name,sub_quest_name:B.sub_quest_name}:null)),J=w=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${w}`,"_blank","noreferer")};c.useEffect(()=>{C.setFieldsValue({evaluateId:v.id,usersId:a.id,province:a.province,zone:a.zone})});const fe=ee.filter(w=>w.hcode===j);console.log("Hosp: ",j);const o=()=>{M(!0)},S=()=>{M(!1)},b=async w=>{const B=[];v.forEach(oe=>{B.push({evaluateId:w["evaluateId"+oe.id],ssj_approve:w["ssj_approve"+oe.id],usersId:w["usersId"+oe.id],hcode:w["hcode"+oe.id],province:w["province"+oe.id],zone:w["zone"+oe.id]})}),console.log("Result2: ",B),await Ms(l,B).then(oe=>{V.error(oe.data.message),M(!1),ae(),R(),N(),_(P.filter(Se=>Se.hcode===j))}).catch(oe=>{console.log(oe)})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านบุคลากร"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("p",{className:"font-bold",children:"เลือกหน่วยบริการ : "}),e.jsx(X,{showSearch:!0,onChange:w=>x(w),optionFilterProp:"label",filterSort:(w,B)=>((w==null?void 0:w.label)??"").toLowerCase().localeCompare(((B==null?void 0:B.label)??"").toLowerCase()),options:F,placeholder:"กรุณาเลือกหน่วยบริการ...",style:{width:"40%"}}),i?e.jsx(e.Fragment,{children:e.jsxs(H,{onClick:()=>U(i.file_name),type:"primary",children:[e.jsx(Re,{})," ดูเอกสาร/หลักฐาน"]})}):null,e.jsxs(H,{style:{width:180},variant:"solid",onClick:()=>t(j),children:[e.jsx(Te,{})," Refresh (รีเฟรช!)"]})]}),e.jsx("p",{className:"text-sm text-orange-400 p-4",children:'หมายเหตุ: หากโรงพยาบาลประเมินมาไม่ครบทุกหัวข้อ หรือ มีข้อมูลซ้ำ ระบบจะไม่แสดงปุ่ม "Approve (อนุมัติ)"'}),e.jsx("div",{children:e.jsxs(r,{name:"formSsjApprove",form:y,onFinish:D,onFinishFailed:d,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ไฟล์หลักฐาน"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"การอนุมัติ"})]})}),e.jsx("tbody",{children:K.map((w,B)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:5,children:e.jsx("p",{className:"ml-1 p-1 font-bold",style:{fontSize:"18px"},children:e.jsx("u",{children:w.quest_name})})})},B),v.map((oe,Se)=>oe.quests.quest_name===w.quest_name?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(r.Item,{name:"evaluateId"+oe.id,hidden:!0,initialValue:oe.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"usersId"+oe.id,hidden:!0,initialValue:a.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"province"+oe.id,hidden:!0,initialValue:a.province,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone"+oe.id,hidden:!0,initialValue:a.zone,children:e.jsx(g,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"font-bold text-slate-600",children:oe.sub_quests.sub_quest_name}),e.jsx("div",{className:"pl-10 flex gap-2",children:oe.check.split(",").map(Fe=>$.map(ge=>ge.sub_questId===oe.sub_quests.id&&ge.choice===Fe?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(we,{checked:!0}),e.jsx("p",{className:ge.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:ge.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:oe.check.split(",").map(Fe=>$.map(ge=>ge.sub_questId===oe.sub_quests.id&&ge.choice===Fe?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:ge.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:oe.check.split(",").map(Fe=>$.map(ge=>ge.sub_questId===oe.sub_quests.id&&ge.choice===Fe?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:ge.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:oe.file_name?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs(H,{onClick:()=>J(oe.file_name),children:[e.jsx(Ke,{})," ดูไฟล์"]})})}):e.jsx(e.Fragment,{children:"-"})})}),e.jsx("td",{className:"text-center border-l px-1",children:oe.ssj_approve===!0?e.jsx("p",{className:"font-bold text-green-700",children:"อนุมัติแล้ว!"}):e.jsx("p",{className:"font-bold text-red-500",children:"ยังไม่อนุมัติ!"})})]},Se)}):null)]}))})]}),se.length===14?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-center space-x-1 mt-3",children:[e.jsx("div",{className:"m-3",children:e.jsx(r.Item,{children:e.jsxs(H,{type:"primary",htmlType:"submit",style:{width:180},children:[e.jsx(Ie,{})," Approve (อนุมัติ!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(H,{color:"danger",style:{width:180},variant:"solid",onClick:o,children:[e.jsx(bs,{})," Cancel (ยกเลิก!)"]})})}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{children:e.jsxs(H,{style:{width:180},variant:"solid",onClick:()=>t(j),children:[e.jsx(Te,{})," Refresh (รีเฟรช!)"]})})})]})}):null]})})]}),e.jsx(xe,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"text-yellow-500"}),e.jsxs("span",{className:"font-bold",children:["คุณต้องการยกเลิกการอนุมัติด้านบุคลากร ของ",(ue=fe[0])==null?void 0:ue.hname_th," หรือไม่?"]})]}),open:q,onOk:C.submit,onCancel:S,width:500,style:{top:20},children:e.jsx("div",{className:"h-4",children:e.jsx(r,{name:"formUnApprove",form:C,onFinish:b,onFinishFailed:d,children:K.map(w=>v.map(B=>B.quests.quest_name===w.quest_name?e.jsxs(e.Fragment,{children:[e.jsx(r.Item,{name:"evaluateId"+B.id,hidden:!0,initialValue:B.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hcode"+B.id,hidden:!0,initialValue:j,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"usersId"+B.id,hidden:!0,initialValue:a.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"province"+B.id,hidden:!0,initialValue:a.province,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone"+B.id,hidden:!0,initialValue:a.zone,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"ssj_approve"+B.id,hidden:!0,initialValue:!1,children:e.jsx(g,{})})]}):null))})})})]})},_l=()=>(pe("อนุมัติด้านบุคลากร"),e.jsx("div",{children:e.jsx(fl,{})})),yl=()=>{be();const a=O(f=>f.user),l=O(f=>f.token),[p,h]=c.useState(!1),[z,E]=c.useState([]),[q,M]=c.useState([]),[L,G]=c.useState(null),T=a.province,u=a.zone;c.useEffect(()=>{v(),_()},[]);const v=async()=>{await is(l,T).then(f=>{console.log(f.data),E(f.data)}).catch(f=>{console.log(f)})},_=async()=>{await Sa(l,u).then(f=>{console.log("List: ",f.data),M(f.data)}).catch(f=>{console.log(f)})},i=f=>{console.log("Value: ",f);var j=null;const k=(j===f?f:null)?null:j=f;G(L!==f?k:null)};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"รายงานผลการประเมิน"})}),e.jsx("div",{className:"bg-white rounded-md shadow-md p-3",children:e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-200",children:[e.jsxs("th",{className:"text-center p-2 border-r",children:["หน่วยบริการที่อยู่ในจังหวัด",T," (คะแนนที่แสดงเป็นคะแนนที่หน่วยบริการประเมินเข้ามา ยังไม่ได้รับการอนุมัติ จาก คกก.จังหวัด)"]}),e.jsx("th",{className:"text-center p-2 border-r w-40",children:"ประเภท"})]})}),z.map((f,j)=>e.jsxs("tbody",{children:[e.jsxs("tr",{className:"cursor-pointer bg-slate-100 hover:bg-slate-50",onClick:()=>i(j),children:[e.jsx("td",{className:"border p-1 text-stone-800",children:e.jsxs("div",{className:"flex gap-1 pl-4",children:[e.jsx("p",{className:"text-sm",children:f.hname_th}),e.jsxs("p",{className:"text-sm",children:["[",f.hcode,"]"]})]})}),e.jsx("td",{className:"border text-center p-1 text-stone-800",children:e.jsx("p",{className:"text-sm",children:f.typename})})]},j),L===j?e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"text-center border",children:e.jsxs("table",{className:"w-full table-fixed text-slate-700",children:[e.jsxs("thead",{className:"",children:[e.jsxs("tr",{children:[e.jsx("th",{colSpan:2,className:"text-xs text-center border w-28 p-1",children:"ด้านโครงสร้าง"}),e.jsx("th",{colSpan:2,className:"text-xs text-center border w-28",children:"ด้านบริหารจัดการ"}),e.jsx("th",{colSpan:2,className:"text-xs text-center border w-28",children:"ด้านการบริการ"}),e.jsx("th",{className:"text-xs text-center border w-28",children:"ด้านบุคลากร"}),e.jsx("th",{rowSpan:2,className:"text-xs text-center border w-28",children:"ระดับ Cyber Security"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"text-xs text-center border p-1",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-xs text-center border",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-xs text-center border",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-xs text-center border",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-xs text-center border",children:"คะแนนที่ได้"}),e.jsx("th",{className:"text-xs text-center border",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-xs text-center border",children:"คะแนนที่ได้"})]})]}),e.jsx("tbody",{className:"",children:q.map(I=>f.hcode===I.hcode?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"text-xs font-bold",children:[e.jsx("td",{className:"border text-center p-1",children:I.point_total_cat1===null?e.jsx("p",{className:"text-red-500",children:"0"}):e.jsx("p",{className:"text-blue-600",children:I.point_total_cat1})}),e.jsx("td",{className:"border text-center",children:I.point_require_cat1===null?e.jsx("p",{className:"text-red-500",children:"0"}):e.jsx("p",{className:"text-blue-600",children:I.point_require_cat1})}),e.jsx("td",{className:"border text-center",children:I.point_total_cat2===null?e.jsx("p",{className:"text-red-500",children:"0"}):e.jsx("p",{className:"text-blue-600",children:I.point_total_cat2})}),e.jsx("td",{className:"border text-center",children:I.point_require_cat2===null?e.jsx("p",{className:"text-red-500",children:"0"}):e.jsx("p",{className:"text-blue-600",children:I.point_require_cat2})}),e.jsx("td",{className:"border text-center",children:I.point_total_cat3===null?e.jsx("p",{className:"text-red-500",children:"0"}):e.jsx("p",{className:"text-blue-600",children:I.point_total_cat3})}),e.jsx("td",{className:"border text-center",children:I.point_require_cat3===null?e.jsx("p",{className:"text-red-500",children:"0"}):e.jsx("p",{className:"text-blue-600",children:I.point_require_cat3})}),e.jsx("td",{className:"border text-center",children:I.point_total_cat4===null?e.jsx("p",{className:"text-red-500",children:"0"}):e.jsx("p",{className:"text-blue-600",children:I.point_total_cat4})}),e.jsx("td",{className:"border text-center",children:I.cyber_level==="GREEN"?e.jsx("p",{className:"text-green-700",children:I.cyber_levelname}):I.cyber_level==="YELLOW"?e.jsx("p",{className:"text-yellow-600",children:I.cyber_levelname}):I.cyber_level==="RED"?e.jsx("p",{className:"text-red-500",children:I.cyber_levelname}):null})]})}):e.jsx(e.Fragment,{}))})]})})}):null]}))]})})]})},Nl=()=>(pe("รายงานผลระดับจังหวัด"),e.jsx("div",{children:e.jsx(yl,{})}));ve.extend(cs);const wl=()=>{const a=O(i=>i.user),l=O(i=>i.token),[p,h]=c.useState([]),[z,E]=c.useState([]),[q,M]=c.useState(!1),L=a.zone;c.useEffect(()=>{G()},[]);const G=async()=>{M(!0),await en(l,L).then(i=>{h(i.data),E(i.data)}).catch(i=>{console.log(i)}).finally(()=>M(!1))},T=i=>{E(p.filter(f=>f.hcode.toLowerCase().includes(i.target.value)||f.hname_th.toLowerCase().includes(i.target.value)||f.firstname_th.toLowerCase().includes(i.target.value)))},u=z.map((i,f)=>({...i,key:f})),v=[{title:"ลำดับ",align:"center",render:({key:i})=>e.jsx(e.Fragment,{children:e.jsx("span",{style:{fontSize:"14px"},children:i+1})})},{title:"ชื่อ-นามสกุล",render:({title_th:i,firstname_th:f,lastname_th:j})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px",marginLeft:"5px"},children:[i," ",f," ",j]})})},{title:e.jsx("p",{className:"text-center",children:"หน่วยบริการ"}),render:({hname_th:i,hcode:f})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:[i," [",f,"]"]})})},{title:e.jsx("p",{className:"text-center",children:"ตำแหน่ง"}),render:({position:i,position_id:f})=>e.jsx(e.Fragment,{children:e.jsxs("span",{style:{fontSize:"14px"},children:[i," [",f,"]"]})})},{title:"ระดับ",dataIndex:"level",align:"center",render:i=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:i==1?"ส่วนกลาง":i==2?"เขตสุขภาพ":i==3?"จังหวัด":i==4?"หน่วยบริการ":""})})},{title:"สิทธิ",dataIndex:"role",align:"center",render:i=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:i})})},{title:"ประเภท",dataIndex:"objective",align:"center",width:"10%",render:i=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:i==="responder"?"ผู้ประเมิน รพ.":i==="prov_approve"?"คกก.สสจ.":i==="zone_approve"?"คกก.เขตฯ":null})})},{title:"การอนุมัติ",align:"center",render:({enabled:i,id:f})=>e.jsx(e.Fragment,{children:e.jsx(Ys,{size:"small",checked:i,onChange:j=>_(j,f)})})},{title:"วันที่เพิ่ม",align:"center",render:({createdAt:i})=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:ve(i).locale("th").format("DD MMM BB")})})},{title:"วันที่แก้ไข",align:"center",render:({updatedAt:i})=>e.jsx(e.Fragment,{children:e.jsx("p",{style:{fontSize:"14px"},children:ve(i).locale("th").format("DD MMM BB")})})}],_=(i,f)=>{Ws(l,{id:f,enabled:i}).then(I=>{V.success(I.data.message),G()}).catch(I=>{console.log(I)})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:[e.jsx(ks,{})," ",e.jsx("p",{className:"ml-2",children:"จัดการ user คกก.รพ.อัจฉริยะ ระดับจังหวัด"})]}),e.jsxs("div",{className:"border rounded-md p-2 bg-white shadow-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-3",children:[e.jsx("div",{children:e.jsxs("p",{style:{fontSize:"14px"},children:["จำนวนบัญชีทั้งหมด ",z.length," รายการ"]})}),e.jsx("div",{children:e.jsx(g,{placeholder:"ค้นหาด้วย hcode, ชื่อ, ชื่อหน่วยบริการ...",className:"rounded-full",style:{width:250},prefix:e.jsx(Xe,{}),onChange:T})})]}),e.jsx(We,{columns:v,dataSource:u,bordered:!0,size:"small",pagination:{pageSize:12}})]})]})},ql=()=>(pe("จัดการผู้ใช้งาน (จังหวัด)"),e.jsx("div",{children:e.jsx(wl,{})})),Il=()=>{const a=O(t=>t.user),l=O(t=>t.token),p=a.zone,[h]=r.useForm(),[z,E]=c.useState(!1),[q,M]=c.useState([]),[L,G]=c.useState([]),[T,u]=c.useState([]),[v,_]=c.useState([]),[i,f]=c.useState({provcode:""}),[j,I]=c.useState(null),[k,le]=c.useState(!1),[Q]=r.useForm();c.useEffect(()=>{y(),le(!0),te()},[]);const te=async()=>{await Le(l).then(t=>{u(t.data)}).catch(t=>{console.log(t)})},ee=T.map(t=>({id:t.id,sub_questId:t.sub_questId,choice:t.choice,sub_quest_listname:t.sub_quest_listname,sub_quest_total_point:t.sub_quest_total_point,sub_quest_require_point:t.sub_quest_require_point,description:t.description,necessary:t.necessary,createdAt:t.createdAt,updatedAt:t.updatedAt})),W=async()=>{await Ne(l).then(t=>{M(t.data)}).catch(t=>{console.log(t)})},y=async()=>{E(!0),await Ns(l,p).then(t=>{G(t.data)}).catch(t=>{console.log(t)}).finally(()=>E(!1))},m=L.filter(t=>t.category_questId===1).map(t=>({id:t.id,category_questId:t.category_questId,questId:t.questId,sub_questId:t.sub_questId,quest_name:t.quests.quest_name,sub_quest_name:t.sub_quests.sub_quest_name,sub_quest_list:t.sub_quests.sub_quest_lists,check:t.check,file_name:t.file_name,ssj_approve:t.ssj_approve,zone_approve:t.zone_approve,hcode:t.hcode,hname_th:t.hospitals.hname_th,provcode:t.hospitals.provcode,provname:t.hospitals.provname,users_id:t.userId,users_firstname_th:t.users.firstname_th,users_lastname_th:t.users.lastname_th})),N=[...new Map(m.map(t=>[t.provname,t])).values()],Y=[...new Map(m.map(t=>[t.hname_th,t])).values()].filter(t=>t.provcode===i.provcode),R=N.sort((t,D)=>t-D).map(t=>({value:t.provcode,label:t.provname})),$=Y.map(t=>({value:t.hcode,label:t.hname_th+" ["+t.hcode+"]"})),re=t=>{f({provcode:t})},ae=1,P=async t=>{const D=t.provcode,d=t.hcode;W(),_(m.filter(U=>U.provcode===D&&U.hcode===d)),await Qe(l,ae,d).then(U=>{I(U.data)}).catch(U=>{console.log(U)})};c.useEffect(()=>{Q.setFieldsValue({evaluateId:v.id,usersId:a.id,hcode:v.hcode,hname_th:v.hname_th,province:v.provname,zone:a.zone,zone_approve:!0})});const n=async t=>{console.log(t)},F=t=>{console.log("Fialed: ",t)},x=q.filter(t=>t.category_questId===1),K=t=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${t}`,"_blank","noreferer")};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านโครงสร้าง"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("p",{className:"text-slate-700 font-bold",children:"เลือกจังหวัดและหน่วยบริการ :"}),e.jsxs(r,{name:"formSearch",form:h,layout:"inline",onFinish:P,onFinishFailed:F,children:[e.jsx(r.Item,{name:"provcode",rules:[{required:!0,message:"กรุณาเลือกจักหวัด"}],children:e.jsx(X,{showSearch:!0,optionFilterProp:"label",filterSort:(t,D)=>((t==null?void 0:t.label)??"").toLowerCase().localeCompare(((D==null?void 0:D.label)??"").toLowerCase()),placeholder:"กรุณาเลือกจังหวัด...",options:R,onSelect:t=>re(t),style:{width:"200px"}})}),e.jsx(r.Item,{name:"hcode",rules:[{required:!0,message:"กรุณาเลือกหน่วยบริการ"}],children:e.jsx(X,{showSearch:!0,optionFilterProp:"label",filterSort:(t,D)=>((t==null?void 0:t.label)??"").toLowerCase().localeCompare(((D==null?void 0:D.label)??"").toLowerCase()),placeholder:"กรุณาเลือกหน่วยบริการ...",options:$,style:{width:"250px"}})}),e.jsx(r.Item,{shouldUpdate:!0,children:()=>e.jsx(H,{type:"primary",htmlType:"submit",disabled:!k||!h.isFieldsTouched(!0)||!!h.getFieldsError().filter(({errors:t})=>t.length).length,children:"ค้นหา"})})]}),j?e.jsx(e.Fragment,{children:e.jsxs(H,{onClick:()=>K(j.file_name),type:"dashed",children:[e.jsx(Re,{})," ดูเอกสาร/หลักฐาน"]})}):null]}),e.jsx(je,{}),e.jsx("div",{children:e.jsxs(r,{name:"formZoneApprove",form:Q,onFinish:n,onFinishFailed:F,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ไฟล์หลักฐาน"})]})}),e.jsx("tbody",{children:x.map((t,D)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:4,children:e.jsx("p",{className:"ml-1 p-1 font-bold",children:e.jsx("u",{children:t.quest_name})})})},D),v.map((d,U)=>d.questId===t.id?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(r.Item,{name:"evaluateId"+d.id,hidden:!0,initialValue:d.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"usersId"+d.id,hidden:!0,initialValue:a.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hcode"+d.id,hidden:!0,initialValue:d.hcode,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hname_th"+d.id,hidden:!0,initialValue:d.hname_th,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"province"+d.id,hidden:!0,initialValue:d.provname,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone"+d.id,hidden:!0,initialValue:a.zone,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone_approve"+d.id,hidden:!0,initialValue:!0,children:e.jsx(g,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"text-slate-600",children:d.sub_quest_name}),e.jsx("div",{className:"pl-10 gap-2",children:d.check.split(",").map(se=>ee.map(J=>J.sub_questId===d.sub_questId&&J.choice===se?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(we,{checked:!0}),e.jsx("p",{className:J.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:J.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:d.check.split(",").map(se=>ee.map(J=>J.sub_questId===d.sub_questId&&J.choice===se?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:J.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:d.check.split(",").map(se=>ee.map(J=>J.sub_questId===d.sub_questId&&J.choice===se?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:J.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:d.file_name?e.jsx(e.Fragment,{children:e.jsxs(H,{onClick:()=>K(t.file_name),children:[e.jsx(Ke,{})," ดูไฟล์"]})}):e.jsx(e.Fragment,{children:"-"})})})]},U)}):null)]}))})]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{className:"m-3",children:e.jsx(r.Item,{children:e.jsxs(H,{type:"primary",htmlType:"submit",style:{width:500},children:[e.jsx(Ie,{})," Approve ผลการประเมินด้านโครงสร้าง"]})})})})]})})]})]})},Sl=()=>(pe("อนุมัติด้านโครงสร้าง"),e.jsx("div",{children:e.jsx(Il,{})})),Fl=()=>{const a=O(t=>t.user),l=O(t=>t.token),p=a.zone,[h]=r.useForm(),[z,E]=c.useState(!1),[q,M]=c.useState([]),[L,G]=c.useState([]),[T,u]=c.useState([]),[v,_]=c.useState([]),[i,f]=c.useState({provcode:""}),[j,I]=c.useState(null),[k,le]=c.useState(!1),[Q]=r.useForm();c.useEffect(()=>{y(),le(!0),te()},[]);const te=async()=>{await Le(l).then(t=>{_(t.data)}).catch(t=>{console.log(t)})},ee=v.map(t=>({id:t.id,sub_questId:t.sub_questId,choice:t.choice,sub_quest_listname:t.sub_quest_listname,sub_quest_total_point:t.sub_quest_total_point,sub_quest_require_point:t.sub_quest_require_point,description:t.description,necessary:t.necessary,createdAt:t.createdAt,updatedAt:t.updatedAt})),W=async()=>{await Ne(l).then(t=>{M(t.data)}).catch(t=>{console.log(t)})},y=async()=>{E(!0),await Ns(l,p).then(t=>{G(t.data)}).catch(t=>{console.log(t)}).finally(()=>E(!1))},m=L.filter(t=>t.category_questId===2).map(t=>({id:t.id,category_questId:t.category_questId,questId:t.questId,sub_questId:t.sub_questId,quest_name:t.quests.quest_name,sub_quest_name:t.sub_quests.sub_quest_name,sub_quest_list:t.sub_quests.sub_quest_lists,check:t.check,file_name:t.file_name,ssj_approve:t.ssj_approve,zone_approve:t.zone_approve,hcode:t.hcode,hname_th:t.hospitals.hname_th,provcode:t.hospitals.provcode,provname:t.hospitals.provname,users_id:t.userId,users_firstname_th:t.users.firstname_th,users_lastname_th:t.users.lastname_th})),N=[...new Map(m.map(t=>[t.provname,t])).values()],ne=[...new Map(m.map(t=>[t.hname_th,t])).values()],Y=N.sort((t,D)=>t-D).map(t=>({value:t.provcode,label:t.provname})),$=ne.filter(t=>t.provcode===i.provcode).map(t=>({value:t.hcode,label:t.hname_th+" ["+t.hcode+"]"})),re=t=>{f({provcode:t})},ae=2,P=async t=>{const D=t.provcode,d=t.hcode;W(),u(m.filter(U=>U.provcode===D&&U.hcode===d)),await Qe(l,ae,d).then(U=>{I(U.data)}).catch(U=>{console.log(U)})};c.useEffect(()=>{Q.setFieldsValue({evaluateId:T.id,usersId:a.id,hcode:T.hcode,hname_th:T.hname_th,province:T.provname,zone:a.zone,zone_approve:!0})});const n=async t=>{console.log(t)},F=t=>{console.log("Fialed: ",t)},x=q.filter(t=>t.category_questId===2),K=t=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${t}`,"_blank","noreferer")};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านบริหารจัดการ"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("p",{className:"text-slate-700 font-bold",children:"เลือกจังหวัดและหน่วยบริการ :"}),e.jsxs(r,{name:"formSearch",form:h,layout:"inline",onFinish:P,onFinishFailed:F,children:[e.jsx(r.Item,{name:"provcode",rules:[{required:!0,message:"กรุณาเลือกจักหวัด"}],children:e.jsx(X,{showSearch:!0,optionFilterProp:"label",filterSort:(t,D)=>((t==null?void 0:t.label)??"").toLowerCase().localeCompare(((D==null?void 0:D.label)??"").toLowerCase()),placeholder:"กรุณาเลือกจังหวัด...",options:Y,onSelect:t=>re(t),style:{width:"200px"}})}),e.jsx(r.Item,{name:"hcode",rules:[{required:!0,message:"กรุณาเลือกหน่วยบริการ"}],children:e.jsx(X,{showSearch:!0,optionFilterProp:"label",filterSort:(t,D)=>((t==null?void 0:t.label)??"").toLowerCase().localeCompare(((D==null?void 0:D.label)??"").toLowerCase()),placeholder:"กรุณาเลือกหน่วยบริการ...",options:$,style:{width:"250px"}})}),e.jsx(r.Item,{shouldUpdate:!0,children:()=>e.jsx(H,{type:"primary",htmlType:"submit",disabled:!k||!h.isFieldsTouched(!0)||!!h.getFieldsError().filter(({errors:t})=>t.length).length,children:"ค้นหา"})})]}),j?e.jsx(e.Fragment,{children:e.jsxs(H,{onClick:()=>K(j.file_name),type:"dashed",children:[e.jsx(Re,{})," ดูเอกสาร/หลักฐาน"]})}):null]}),e.jsx(je,{}),e.jsx("div",{children:e.jsxs(r,{name:"formZoneApprove",form:Q,onFinish:n,onFinishFailed:F,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ภาพหลักฐาน"})]})}),e.jsx("tbody",{children:x.map((t,D)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:4,children:e.jsx("p",{className:"ml-1 p-1 font-bold",children:e.jsx("u",{children:t.quest_name})})})},D),T.map((d,U)=>d.questId===t.id?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(r.Item,{name:"evaluateId"+d.id,hidden:!0,initialValue:d.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"usersId"+d.id,hidden:!0,initialValue:a.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hcode"+d.id,hidden:!0,initialValue:d.hcode,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hname_th"+d.id,hidden:!0,initialValue:d.hname_th,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"province"+d.id,hidden:!0,initialValue:d.provname,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone"+d.id,hidden:!0,initialValue:a.zone,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone_approve"+d.id,hidden:!0,initialValue:!0,children:e.jsx(g,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"text-slate-600",children:d.sub_quest_name}),e.jsx("div",{className:"pl-10 gap-2",children:d.check.split(",").map(se=>ee.map(J=>J.sub_questId===d.sub_questId&&J.choice===se?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(we,{checked:!0}),e.jsx("p",{className:J.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:J.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:d.check.split(",").map(se=>ee.map(J=>J.sub_questId===d.sub_questId&&J.choice===se?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:J.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:d.check.split(",").map(se=>ee.map(J=>J.sub_questId===d.sub_questId&&J.choice===se?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:J.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:d.file_name?e.jsx(e.Fragment,{children:e.jsx(Ts,{className:"px-1 py-1",width:100,src:`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${d.file_name}`})}):e.jsx(e.Fragment,{children:"-"})})})]},U)}):null)]}))})]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{className:"m-3",children:e.jsx(r.Item,{children:e.jsxs(H,{type:"primary",htmlType:"submit",style:{width:500},children:[e.jsx(Ie,{})," Approve ผลการประเมินด้านโครงสร้าง"]})})})})]})})]})]})},zl=()=>(pe("อนุมัติด้านบริหารจัดการ"),e.jsx("div",{children:e.jsx(Fl,{})})),Ll=()=>{const a=O(t=>t.user),l=O(t=>t.token),p=a.zone,[h]=r.useForm(),[z]=r.useForm(),[E,q]=c.useState(!1),[M,L]=c.useState([]),[G,T]=c.useState([]),[u,v]=c.useState([]),[_,i]=c.useState({provcode:""}),[f,j]=c.useState(null),[I,k]=c.useState(!1),[le,Q]=c.useState([]);c.useEffect(()=>{y(),k(!0),te()},[]);const te=async()=>{await Le(l).then(t=>{Q(t.data)}).catch(t=>{console.log(t)})},ee=le.map(t=>({id:t.id,sub_questId:t.sub_questId,choice:t.choice,sub_quest_listname:t.sub_quest_listname,sub_quest_total_point:t.sub_quest_total_point,sub_quest_require_point:t.sub_quest_require_point,description:t.description,necessary:t.necessary,createdAt:t.createdAt,updatedAt:t.updatedAt})),W=async()=>{await Ne(l).then(t=>{L(t.data)}).catch(t=>{console.log(t)})},y=async()=>{q(!0),await Ns(l,p).then(t=>{T(t.data)}).catch(t=>{console.log(t)}).finally(()=>q(!1))},m=G.filter(t=>t.category_questId===4).map(t=>({id:t.id,category_questId:t.category_questId,questId:t.questId,sub_questId:t.sub_questId,quest_name:t.quests.quest_name,sub_quest_name:t.sub_quests.sub_quest_name,sub_quest_list:t.sub_quests.sub_quest_lists,check:t.check,file_name:t.file_name,ssj_approve:t.ssj_approve,zone_approve:t.zone_approve,hcode:t.hcode,hname_th:t.hospitals.hname_th,provcode:t.hospitals.provcode,provname:t.hospitals.provname,users_id:t.userId,users_firstname_th:t.users.firstname_th,users_lastname_th:t.users.lastname_th})),N=[...new Map(m.map(t=>[t.provname,t])).values()],ne=[...new Map(m.map(t=>[t.hname_th,t])).values()],Y=N.sort((t,D)=>t-D).map(t=>({value:t.provcode,label:t.provname})),$=ne.filter(t=>t.provcode===_.provcode).map(t=>({value:t.hcode,label:t.hname_th+" ["+t.hcode+"]"})),re=t=>{i({provcode:t})},ae=4,P=async t=>{const D=t.provcode,d=t.hcode;W(),v(m.filter(U=>U.provcode===D&&U.hcode===d)),await Qe(l,ae,d).then(U=>{j(U.data)}).catch(U=>{console.log(U)})};c.useEffect(()=>{z.setFieldsValue({evaluateId:u.id,usersId:a.id,hcode:u.hcode,hname_th:u.hname_th,province:u.provname,zone:a.zone,zone_approve:!0})});const n=async t=>{console.log(t)},F=t=>{console.log("Fialed: ",t)},x=M.filter(t=>t.category_questId===4),K=t=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${t}`,"_blank","noreferer")};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านบุคลากร"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("p",{className:"text-slate-700 font-bold",children:"เลือกจังหวัดและหน่วยบริการ :"}),e.jsxs(r,{name:"formSearch",form:h,layout:"inline",onFinish:P,onFinishFailed:F,children:[e.jsx(r.Item,{name:"provcode",rules:[{required:!0,message:"กรุณาเลือกจักหวัด"}],children:e.jsx(X,{showSearch:!0,optionFilterProp:"label",filterSort:(t,D)=>((t==null?void 0:t.label)??"").toLowerCase().localeCompare(((D==null?void 0:D.label)??"").toLowerCase()),placeholder:"กรุณาเลือกจังหวัด...",options:Y,onSelect:t=>re(t),style:{width:"200px"}})}),e.jsx(r.Item,{name:"hcode",rules:[{required:!0,message:"กรุณาเลือกหน่วยบริการ"}],children:e.jsx(X,{showSearch:!0,optionFilterProp:"label",filterSort:(t,D)=>((t==null?void 0:t.label)??"").toLowerCase().localeCompare(((D==null?void 0:D.label)??"").toLowerCase()),placeholder:"กรุณาเลือกหน่วยบริการ...",options:$,style:{width:"250px"}})}),e.jsx(r.Item,{shouldUpdate:!0,children:()=>e.jsx(H,{type:"primary",htmlType:"submit",disabled:!I||!h.isFieldsTouched(!0)||!!h.getFieldsError().filter(({errors:t})=>t.length).length,children:"ค้นหา"})})]}),f?e.jsx(e.Fragment,{children:e.jsxs(H,{onClick:()=>K(f.file_name),type:"dashed",children:[e.jsx(Re,{})," ดูเอกสาร/หลักฐาน"]})}):null]}),e.jsx(je,{}),e.jsx("div",{children:e.jsxs(r,{name:"formZoneApprove",form:z,onFinish:n,onFinishFailed:F,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ภาพหลักฐาน"})]})}),e.jsx("tbody",{children:x.map((t,D)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:4,children:e.jsx("p",{className:"ml-1 p-1 font-bold",children:e.jsx("u",{children:t.quest_name})})})},D),u.map((d,U)=>d.questId===t.id?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(r.Item,{name:"evaluateId"+d.id,hidden:!0,initialValue:d.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"usersId"+d.id,hidden:!0,initialValue:a.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hcode"+d.id,hidden:!0,initialValue:d.hcode,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hname_th"+d.id,hidden:!0,initialValue:d.hname_th,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"province"+d.id,hidden:!0,initialValue:d.provname,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone"+d.id,hidden:!0,initialValue:a.zone,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone_approve"+d.id,hidden:!0,initialValue:!0,children:e.jsx(g,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"text-slate-600",children:d.sub_quest_name}),e.jsx("div",{className:"pl-10 gap-2",children:d.check.split(",").map(se=>ee.map(J=>J.sub_questId===d.sub_questId&&J.choice===se?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(we,{checked:!0}),e.jsx("p",{className:J.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:J.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:d.check.split(",").map(se=>ee.map(J=>J.sub_questId===d.sub_questId&&J.choice===se?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:J.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:d.check.split(",").map(se=>ee.map(J=>J.sub_questId===d.sub_questId&&J.choice===se?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:J.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:d.file_name?e.jsx(e.Fragment,{children:e.jsx(Ts,{className:"px-1 py-1",width:100,src:`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${d.file_name}`})}):e.jsx(e.Fragment,{children:"-"})})})]},U)}):null)]}))})]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{className:"m-3",children:e.jsx(r.Item,{children:e.jsxs(H,{type:"primary",htmlType:"submit",style:{width:500},children:[e.jsx(Ie,{})," Approve ผลการประเมินด้านโครงสร้าง"]})})})})]})})]})]})},Pl=()=>(pe("อนุมัติด้านบุคลากร"),e.jsx("div",{children:e.jsx(Ll,{})})),Cl=()=>{const a=O(t=>t.user),l=O(t=>t.token),p=a.zone,[h]=r.useForm(),[z]=r.useForm(),[E,q]=c.useState(!1),[M,L]=c.useState([]),[G,T]=c.useState([]),[u,v]=c.useState([]),[_,i]=c.useState({provcode:""}),[f,j]=c.useState(null),[I,k]=c.useState(!1),[le,Q]=c.useState([]);c.useEffect(()=>{y(),k(!0),te()},[]);const te=async()=>{await Le(l).then(t=>{Q(t.data)}).catch(t=>{console.log(t)})},ee=le.map(t=>({id:t.id,sub_questId:t.sub_questId,choice:t.choice,sub_quest_listname:t.sub_quest_listname,sub_quest_total_point:t.sub_quest_total_point,sub_quest_require_point:t.sub_quest_require_point,description:t.description,necessary:t.necessary,createdAt:t.createdAt,updatedAt:t.updatedAt})),W=async()=>{await Ne(l).then(t=>{L(t.data)}).catch(t=>{console.log(t)})},y=async()=>{q(!0),await Ns(l,p).then(t=>{T(t.data)}).catch(t=>{console.log(t)}).finally(()=>q(!1))},m=G.filter(t=>t.category_questId===3).map(t=>({id:t.id,category_questId:t.category_questId,questId:t.questId,sub_questId:t.sub_questId,quest_name:t.quests.quest_name,sub_quest_name:t.sub_quests.sub_quest_name,sub_quest_list:t.sub_quests.sub_quest_lists,check:t.check,file_name:t.file_name,ssj_approve:t.ssj_approve,zone_approve:t.zone_approve,hcode:t.hcode,hname_th:t.hospitals.hname_th,provcode:t.hospitals.provcode,provname:t.hospitals.provname,users_id:t.userId,users_firstname_th:t.users.firstname_th,users_lastname_th:t.users.lastname_th})),N=[...new Map(m.map(t=>[t.provname,t])).values()],ne=[...new Map(m.map(t=>[t.hname_th,t])).values()],Y=N.sort((t,D)=>t-D).map(t=>({value:t.provcode,label:t.provname})),$=ne.filter(t=>t.provcode===_.provcode).map(t=>({value:t.hcode,label:t.hname_th+" ["+t.hcode+"]"})),re=t=>{i({provcode:t})},ae=3,P=async t=>{const D=t.provcode,d=t.hcode;W(),v(m.filter(U=>U.provcode===D&&U.hcode===d)),await Qe(l,ae,d).then(U=>{j(U.data)}).catch(U=>{console.log(U)})},n=t=>{console.log("Fialed: ",t)},F=M.filter(t=>t.category_questId===3);c.useEffect(()=>{z.setFieldsValue({evaluateId:u.id,usersId:a.id,hcode:u.hcode,hname_th:u.hname_th,province:u.provname,zone:a.zone,zone_approve:!0})});const x=async t=>{console.log(t)},K=t=>{window.open(`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${t}`,"_blank","noreferer")};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"Approve ด้านการบริการ"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("p",{className:"text-slate-700 font-bold",children:"เลือกจังหวัดและหน่วยบริการ :"}),e.jsxs(r,{name:"formSearch",form:h,layout:"inline",onFinish:P,onFinishFailed:n,children:[e.jsx(r.Item,{name:"provcode",rules:[{required:!0,message:"กรุณาเลือกจักหวัด"}],children:e.jsx(X,{showSearch:!0,optionFilterProp:"label",filterSort:(t,D)=>((t==null?void 0:t.label)??"").toLowerCase().localeCompare(((D==null?void 0:D.label)??"").toLowerCase()),placeholder:"กรุณาเลือกจังหวัด...",options:Y,onSelect:t=>re(t),style:{width:"200px"}})}),e.jsx(r.Item,{name:"hcode",rules:[{required:!0,message:"กรุณาเลือกหน่วยบริการ"}],children:e.jsx(X,{showSearch:!0,optionFilterProp:"label",filterSort:(t,D)=>((t==null?void 0:t.label)??"").toLowerCase().localeCompare(((D==null?void 0:D.label)??"").toLowerCase()),placeholder:"กรุณาเลือกหน่วยบริการ...",options:$,style:{width:"250px"}})}),e.jsx(r.Item,{shouldUpdate:!0,children:()=>e.jsx(H,{type:"primary",htmlType:"submit",disabled:!I||!h.isFieldsTouched(!0)||!!h.getFieldsError().filter(({errors:t})=>t.length).length,children:"ค้นหา"})})]}),f?e.jsx(e.Fragment,{children:e.jsxs(H,{onClick:()=>K(f.file_name),type:"dashed",children:[e.jsx(Re,{})," ดูเอกสาร/หลักฐาน"]})}):null]}),e.jsx(je,{}),e.jsx("div",{children:e.jsxs(r,{name:"formZoneApprove",form:z,onFinish:x,onFinishFailed:n,children:[e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-md text-slate-500 border border-l border-r border-slate-300 bg-slate-50",children:[e.jsx("th",{className:"text-center p-4 border-r",children:"เกณฑ์การประเมินและคำตอบ"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-center p-4 border-r w-32",children:"ภาพหลักฐาน"})]})}),e.jsx("tbody",{children:F.map((t,D)=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"border-b border-l border-r",children:e.jsx("td",{colSpan:4,children:e.jsx("p",{className:"ml-1 p-1 font-bold",children:e.jsx("u",{children:t.quest_name})})})},D),u.map((d,U)=>d.questId===t.id?e.jsx(e.Fragment,{children:e.jsxs("tr",{className:"border-neutral-200 dark:border-white/10 border-b border-l border-r",children:[e.jsxs("td",{className:"p-4",children:[e.jsx(r.Item,{name:"evaluateId"+d.id,hidden:!0,initialValue:d.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"usersId"+d.id,hidden:!0,initialValue:a.id,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hcode"+d.id,hidden:!0,initialValue:d.hcode,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hname_th"+d.id,hidden:!0,initialValue:d.hname_th,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"province"+d.id,hidden:!0,initialValue:d.provname,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone"+d.id,hidden:!0,initialValue:a.zone,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"zone_approve"+d.id,hidden:!0,initialValue:!0,children:e.jsx(g,{})}),e.jsxs("div",{className:"ml-7",children:[e.jsx("p",{className:"text-slate-600",children:d.sub_quest_name}),e.jsx("div",{className:"pl-10 gap-2",children:d.check.split(",").map(se=>ee.map(J=>J.sub_questId===d.sub_questId&&J.choice===se?e.jsxs("div",{className:"flex items-baseline gap-2 mt-3 ml-7",children:[e.jsx(we,{checked:!0}),e.jsx("p",{className:J.sub_quest_listname==="ไม่มีการดำเนินการ"?"text-red-700":"text-green-700",children:J.sub_quest_listname})]}):null))})]})]}),e.jsx("td",{className:"text-center border-l",children:d.check.split(",").map(se=>ee.map(J=>J.sub_questId===d.sub_questId&&J.choice===se?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:J.sub_quest_total_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:d.check.split(",").map(se=>ee.map(J=>J.sub_questId===d.sub_questId&&J.choice===se?e.jsx("div",{className:"flex justify-center items-baseline gap-2 mt-3",children:e.jsx("p",{className:"font-bold",children:J.sub_quest_require_point})}):null))}),e.jsx("td",{className:"text-center border-l",children:e.jsx("div",{className:"flex justify-center items-center",children:d.file_name?e.jsx(e.Fragment,{children:e.jsx(Ts,{className:"px-1 py-1",width:100,src:`https://bdh-service.moph.go.th/api/smarthosp/file-uploads/${d.file_name}`})}):e.jsx(e.Fragment,{children:"-"})})})]},U)}):null)]}))})]}),e.jsx("div",{className:"flex justify-center space-x-1 mt-3",children:e.jsx("div",{className:"m-3",children:e.jsx(r.Item,{children:e.jsxs(H,{type:"primary",htmlType:"submit",style:{width:500},children:[e.jsx(Ie,{})," Approve ผลการประเมินด้านโครงสร้าง"]})})})})]})})]})]})},kl=()=>(pe("อนุมัติด้านบริการ"),e.jsx("div",{children:e.jsx(Cl,{})})),El=()=>{be();const a=O(j=>j.user),l=O(j=>j.token),[p,h]=c.useState(!1),[z,E]=c.useState([]),[q,M]=c.useState([]),[L,G]=c.useState(null),[T,u]=c.useState(null),v=a.zone;c.useEffect(()=>{_()},[]);const _=async()=>{await St(l,v).then(j=>{E(j.data)}).catch(j=>{console.log(j)})},i=[...new Map(z.map(j=>[j.provname,j])).values()];[...new Map(z.map(j=>[j.hname_th,j])).values()];const f=j=>{console.log("Value: ",j);var I=null;const le=(I===j?j:null)?null:I=j;G(L!==j?le:null)};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsxs("p",{className:"ml-2",children:["รายงานผลการประเมินของเขตสุขภาพที่ ",Number(v)," "]})}),e.jsx("div",{className:"bg-white rounded-md shadow-md p-3",children:e.jsxs("table",{className:"w-full text-left table-fixed text-slate-800",children:[e.jsx("thead",{children:e.jsx("tr",{className:"text-slate-800 border border-l border-r border-slate-300 bg-slate-50",children:e.jsxs("th",{className:"text-center p-2 border-r",children:["รายชื่อจังหวัดในเขตสุขภาพที่ ",Number(v)]})})}),i.map((j,I)=>e.jsxs("tbody",{children:[e.jsx("tr",{className:"cursor-pointer hover:bg-slate-50",onClick:()=>f(I),children:e.jsx("td",{className:"border p-1 text-center font-bold text-yellow-700",children:e.jsx("p",{children:j.provname})})},I),L===I?e.jsx("tr",{children:e.jsx("td",{className:"border",children:e.jsxs("table",{className:"w-full table-fixed text-slate-700",children:[e.jsxs("thead",{className:"bg-slate-50",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:2,className:"text-sm text-center border",children:"หน่วยบริการ"}),e.jsx("th",{colSpan:2,className:"text-sm text-center border w-52",children:"ด้านโครงสร้าง"}),e.jsx("th",{colSpan:2,className:"text-sm text-center border w-52",children:"ด้านบริหารจัดการ"}),e.jsx("th",{colSpan:2,className:"text-sm text-center border w-52",children:"ด้านการบริการ"}),e.jsx("th",{colSpan:2,className:"text-sm text-center border w-52",children:"ด้านบุคลากร"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"text-sm text-center border",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-sm text-center border",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-sm text-center border",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-sm text-center border",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-sm text-center border",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-sm text-center border",children:"คะแนนจำเป็น"}),e.jsx("th",{className:"text-sm text-center border",children:"คะแนนเต็ม"}),e.jsx("th",{className:"text-sm text-center border",children:"คะแนนจำเป็น"})]})]}),z.map((k,le)=>k.provcode===j.provcode?e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border",children:e.jsxs("p",{className:"pl-2 text-sm",children:[k.hname_th," [",k.hcode,"]"]})}),e.jsx("td",{className:"border"}),e.jsx("td",{className:"border"}),e.jsx("td",{className:"border"}),e.jsx("td",{className:"border"}),e.jsx("td",{className:"border"}),e.jsx("td",{className:"border"}),e.jsx("td",{className:"border"}),e.jsx("td",{className:"border"})]},le)}):null)]})})}):null]}))]})})]})},Tl=()=>(pe("รายงานผลระดับเขตฯ"),e.jsx("div",{children:e.jsx(El,{})})),Al=()=>{const a=O(C=>C.user),l=O(C=>C.token);be();const[p,h]=c.useState(!1),[z,E]=c.useState([]),[q,M]=c.useState([]),[L,G]=c.useState([]),[T,u]=c.useState([]),v=a.province;c.useEffect(()=>{_(),i(),W(),y()},[]);const _=async()=>{await is(l,v).then(C=>{console.log("Hosp: ",C.data),E(C.data)}).catch(C=>{console.log(C)})},i=async()=>{await ys(l,v).then(C=>{console.log("List: ",C.data),M(C.data)}).catch(C=>{console.log(C)})},f=q.filter(C=>C.category_quests.id===1),j=q.filter(C=>C.category_quests.id===2),I=q.filter(C=>C.category_quests.id===3),k=q.filter(C=>C.category_quests.id===4),le=[...new Map(f.map(C=>[C.hcode,C])).values()],Q=[...new Map(j.map(C=>[C.hcode,C])).values()],te=[...new Map(I.map(C=>[C.hcode,C])).values()],ee=[...new Map(k.map(C=>[C.hcode,C])).values()],W=async()=>{await nn(l,v).then(C=>{G(C.data)}).catch(C=>{console.log(C)})},y=async()=>{await ln(l,v).then(C=>{u(C.data)}).catch(C=>{console.log(C)})};return e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:As,alt:"Gem"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ระดับเพชร"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsx("p",{className:"text-4xl",children:"0"}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsx("div",{className:"flex text-green-700",children:e.jsx("p",{children:"0.0 % "})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:gs,alt:"Gold"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ระดับทอง"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsx("p",{className:"text-4xl",children:"0"}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsx("div",{className:"flex text-green-700",children:e.jsx("p",{children:"0.0 % "})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:as,alt:"Silver"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ระดับเงิน"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsx("p",{className:"text-4xl",children:"0"}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsx("div",{className:"flex text-green-700",children:e.jsx("p",{children:"0.0 % "})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:zs,alt:"HospitalIcon"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"รพ.ทั้งหมด"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsxs("p",{className:"text-4xl",children:["0/",z.length]}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsx("div",{className:"flex text-green-700",children:e.jsx("p",{children:"0.0 % "})})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(Ee,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านโครงสร้าง"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsxs("p",{className:"text-4xl",children:[le.length," /"]}),e.jsx("p",{className:"text-4xl",children:z.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(Ee,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านบริหารจัดการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsxs("p",{className:"text-4xl",children:[Q.length," /"]}),e.jsx("p",{className:"text-4xl",children:z.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(Ee,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านการบริการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsxs("p",{className:"text-4xl",children:[te.length," /"]}),e.jsx("p",{className:"text-4xl",children:z.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(Ee,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านบุคลากร"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsxs("p",{className:"text-4xl",children:[ee.length," /"]}),e.jsx("p",{className:"text-4xl",children:z.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(Zs,{}),e.jsx("p",{className:"text-green-800",children:"ผู้ประเมินรายใหม่ที่ยังไม่อนุมัติ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:T.length}),e.jsx("p",{className:"text-xs",children:"ราย"})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(qt,{}),e.jsx("p",{className:"text-green-800",children:"ผู้ประเมินรายใหม่ที่อนุมัติแล้ว"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:L.length}),e.jsx("p",{className:"text-xs",children:"ราย"})]})]})]})})},Rl=()=>(pe("Dashboard"),e.jsx("div",{children:e.jsx(Al,{})})),Ql=()=>{be();const a=O(k=>k.user),l=O(k=>k.token),[p,h]=c.useState(!1),[z,E]=c.useState([]),[q,M]=c.useState([]),[L,G]=c.useState([]),[T,u]=c.useState([]),v=a.zone;c.useEffect(()=>{_(),i(),j(),I()},[]);const _=async()=>{await St(l,v).then(k=>{E(k.data)}).catch(k=>{console.log(k)})},i=async()=>{await Ns(l,v).then(k=>{M(k.data)}).catch(k=>{console.log(k)})},f=q.map(k=>({id:k.id,category_questId:k.category_questId,questId:k.questId,sub_questId:k.sub_questId,quest_name:k.quests.quest_name,sub_quest_name:k.sub_quests.sub_quest_name,sub_quest_list:k.sub_quests.sub_quest_lists,check:k.check,file_name:k.file_name,ssj_approve:k.ssj_approve,zone_approve:k.zone_approve,hcode:k.hcode,hname_th:k.hospitals.hname_th,provcode:k.hospitals.provcode,provname:k.hospitals.provname,users_id:k.userId,users_firstname_th:k.users.firstname_th,users_lastname_th:k.users.lastname_th}));console.log("Data: ",f);const j=async()=>{await rn(l,v).then(k=>{G(k.data)}).catch(k=>{console.log(k)})},I=async()=>{await cn(l,v).then(k=>{u(k.data)}).catch(k=>{console.log(k)})};return e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:As,alt:"Gem"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ระดับเพชร"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsx("p",{className:"text-4xl",children:"0"}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsxs("div",{className:"flex text-green-700",children:[e.jsx("p",{children:"0.0 % "}),e.jsx(Ss,{})]})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:gs,alt:"Gold"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ระดับทอง"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsx("p",{className:"text-4xl",children:"0"}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsxs("div",{className:"flex text-green-700",children:[e.jsx("p",{children:"0.0 % "}),e.jsx(Ss,{})]})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:as,alt:"Silver"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"ระดับเงิน"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsx("p",{className:"text-4xl",children:"0"}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsxs("div",{className:"flex text-green-700",children:[e.jsx("p",{children:"0.0 % "}),e.jsx(Ss,{})]})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{className:"bg-amber-50 w-12 rounded-full shadow-md",src:zs,alt:"HospitalIcon"}),e.jsx("p",{className:"text-2xl text-green-700 font-bold",children:"รพ.ทั้งหมด"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 my-3",children:[e.jsxs("p",{className:"text-4xl",children:["0/",z.length]}),e.jsx("p",{children:"รพ."})]}),e.jsxs("div",{className:"p-2 flex justify-between",children:[e.jsx("div",{className:"text-slate-400",children:e.jsx("p",{children:"จำนวนทั้งหมด"})}),e.jsxs("div",{className:"flex text-green-700",children:[e.jsx("p",{children:"0.0 % "}),e.jsx(Ss,{})]})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(Ee,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านโครงสร้าง"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:"0 /"}),e.jsx("p",{className:"text-4xl",children:z.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(Ee,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านบริหารจัดการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:"0 /"}),e.jsx("p",{className:"text-4xl",children:z.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(Ee,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านการบริการ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:"0 /"}),e.jsx("p",{className:"text-4xl",children:z.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(Ee,{}),e.jsx("p",{className:"text-green-800",children:"หน่วยงานที่ประเมินด้านบุคลากร"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:"0 /"}),e.jsx("p",{className:"text-4xl",children:z.length}),e.jsx("p",{className:"text-xs",children:"รพ."})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-2 text-blue-800",children:[e.jsx("p",{children:"อนุมัติแล้ว"}),e.jsx("p",{children:"0"}),e.jsx("p",{children:"รพ."})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(Zs,{}),e.jsx("p",{className:"text-green-800",children:"คกก.สสจ.ที่ยังไม่อนุมัติ"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:T.length}),e.jsx("p",{className:"text-xs",children:"ราย"})]})]}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(qt,{}),e.jsx("p",{className:"text-green-800",children:"คกก.สสจ.ที่อนุมัติแล้ว"})]}),e.jsxs("div",{className:"flex justify-center items-baseline gap-1 p-3",children:[e.jsx("p",{className:"text-4xl",children:L.length}),e.jsx("p",{className:"text-xs",children:"ราย"})]})]})]})})},Ul=()=>(pe("Dashboard-zone"),e.jsx("div",{children:e.jsx(Ql,{})})),Bl=()=>{const a=O(T=>T.user),l=O(T=>T.token),[p,h]=c.useState(!1),[z,E]=c.useState({cyber_level:"",cyber_image:"",usersId:"",hcode:""});c.useEffect(()=>{h(!0),G()},[]);const[q]=r.useForm(),M=[{value:"Green",label:e.jsxs("div",{className:"flex gap-2 pl-3 text-green-800",children:[e.jsx("p",{children:"เขียว"}),e.jsx(Hs,{})]})},{value:"Yellow",label:e.jsxs("div",{className:"flex gap-2 pl-3 text-yellow-400",children:[e.jsx("p",{className:"",children:"เหลือง"}),e.jsx(Hs,{})]})},{value:"Red",label:e.jsxs("div",{className:"flex gap-2 pl-3 text-red-500",children:[e.jsx("p",{className:"",children:"แดง"}),e.jsx(Hs,{})]})}],L=async T=>{console.log(T);const u=new FormData;u.append("cyber_image",T.cyber_image.file.originFileObj),u.append("cyber_level",T.cyber_level),u.append("usersId",T.usersId),u.append("hcode",T.hcode),await qa(l,u).then(v=>{V.success(v.data.message)}).catch(v=>{console.log(v)})};c.useEffect(()=>{q.setFieldsValue({usersId:a.id,hcode:a.hcode})},[]);const G=async()=>{await Ks(l,a.hcode).then(T=>{E(T.data)}).catch(T=>{console.log(T)})};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center text-2xl font-bold mb-8 text-green-600",children:e.jsx("p",{className:"ml-2",children:"ระดับ Cyber Scurity ของศูนย์เทคโนโลยีสารสนเทศและการสื่อสาร"})}),e.jsxs("div",{className:"bg-white rounded-md shadow-md p-3",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs(r,{form:q,name:"formCyberCheck",layout:"inline",onFinish:L,children:[e.jsx(r.Item,{name:"cyber_level",label:e.jsx("b",{children:"ระดับ Cyber Security ศทส."}),rules:[{required:!0,message:"กรุณาเลือกระดับ Cyber!"}],children:e.jsx(X,{className:"",options:M,style:{width:200},placeholder:"กรุณาเลือกระดับ Cyber..."})}),e.jsx(r.Item,{name:"cyber_image",label:e.jsx("b",{children:"อัปโหลดไฟล์/ภาพ"}),rules:[{required:!0,message:"กรุณาเพิ่มภาพระดับ Cyber!"}],children:e.jsx(ze,{customRequest:({onSuccess:T})=>T("ok"),children:e.jsx(H,{icon:e.jsx(ye,{}),style:{width:200},children:"Click to Upload"})})}),e.jsx(r.Item,{name:"usersId",hidden:!0,children:e.jsx(g,{})}),e.jsx(r.Item,{name:"hcode",hidden:!0,children:e.jsx(g,{})}),e.jsx(r.Item,{shouldUpdate:!0,children:()=>e.jsx(H,{type:"primary",htmlType:"submit",disabled:!p||!q.isFieldsTouched(!0)||!!q.getFieldsError().filter(({errors:T})=>T.length).length,children:"เพิ่มข้อมูล"})})]})}),e.jsx(je,{}),e.jsx("div",{className:"grid grid-cols-6 gap-4",children:e.jsx("div",{className:"col-start-2 col-span-4",children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(Ts,{className:"px-1 py-1",width:450,src:`https://bdh-service.moph.go.th/api/smarthosp/cyber-image/${z.cyber_image}`})})})})]})]})},Ml=()=>e.jsx("div",{children:e.jsx(Bl,{})}),Dl=Zt([{path:"/smarthosp-quest/",element:e.jsx(ga,{}),children:[{index:!0,element:e.jsx(za,{})},{path:"checklist",element:e.jsx(La,{})},{path:"user-guide",element:e.jsx(Pa,{})},{path:"register",element:e.jsx(Qa,{})},{path:"login",element:e.jsx(Ua,{})},{path:"contact-us",element:e.jsx(ts,{})}]},{path:"/smarthosp-quest/user",element:e.jsx(Fs,{element:e.jsx(Oa,{})}),children:[{index:!0,element:e.jsx(vt,{})},{path:"contact-us",element:e.jsx(ts,{})}]},{path:"/smarthosp-quest/user/responder",element:e.jsx(Fs,{element:e.jsx(Un,{})}),children:[{index:!0,element:e.jsx(vt,{})},{path:"evaluate-infrastructure",element:e.jsx(Yn,{})},{path:"evaluate-management",element:e.jsx(Xn,{})},{path:"evaluate-service",element:e.jsx(tl,{})},{path:"evaluate-people",element:e.jsx(ll,{})},{path:"cyber-check",element:e.jsx(Ml,{})},{path:"report-hosp",element:e.jsx(dl,{})},{path:"contact-us",element:e.jsx(ts,{})}]},{path:"/smarthosp-quest/user/prov-approve",element:e.jsx(Fs,{element:e.jsx(Hn,{})}),children:[{index:!0,element:e.jsx(Rl,{})},{path:"ssj-usermanagement",element:e.jsx(xl,{})},{path:"ssj-approve-infrastructure",element:e.jsx(pl,{})},{path:"ssj-approve-management",element:e.jsx(gl,{})},{path:"ssj-approve-service",element:e.jsx(vl,{})},{path:"ssj-approve-people",element:e.jsx(_l,{})},{path:"report-prov",element:e.jsx(Nl,{})},{path:"contact-us",element:e.jsx(ts,{})}]},{path:"/smarthosp-quest/user/zone-approve",element:e.jsx(Fs,{element:e.jsx($n,{})}),children:[{index:!0,element:e.jsx(Ul,{})},{path:"zone-usermanagement",element:e.jsx(ql,{})},{path:"zone-approve-infrastructure",element:e.jsx(Sl,{})},{path:"zone-approve-management",element:e.jsx(zl,{})},{path:"zone-approve-service",element:e.jsx(kl,{})},{path:"zone-approve-people",element:e.jsx(Pl,{})},{path:"report-zone",element:e.jsx(Tl,{})},{path:"contact-us",element:e.jsx(ts,{})}]},{path:"/smarthosp-quest/admin",element:e.jsx(Ba,{element:e.jsx(Ka,{})}),children:[{index:!0,element:e.jsx(Za,{})},{path:"manage-user",element:e.jsx(hn,{})},{path:"manage-topic",element:e.jsx(bn,{})},{path:"manage-quest",element:e.jsx(qn,{})},{path:"manage-sub-quest",element:e.jsx(En,{})},{path:"report-centre",element:e.jsx(Tn,{})},{path:"contact-us",element:e.jsx(ts,{})}]}]),Hl=()=>e.jsx(e.Fragment,{children:e.jsx($t,{router:Dl})}),Ol=()=>e.jsxs(e.Fragment,{children:[e.jsx(da,{}),e.jsx(Hl,{})]});ra({});Gt(document.getElementById("root")).render(e.jsx(Ol,{}));
